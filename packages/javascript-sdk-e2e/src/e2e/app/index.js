/*!
 * 
 * @forgerock/javascript-sdk
 *
 * index.js
 *
 * Copyright (c) 2021 ForgeRock. All rights reserved.
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file for details.
 *
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("forgerock",[],t):"object"==typeof exports?exports.forgerock=t():e.forgerock=t()}(self,(function(){return(()=>{var e={680:(e,t,r)=>{"use strict";var n=r(286),o=r(429),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},429:(e,t,r)=>{"use strict";var n=r(90),o=r(286),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),c=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),l=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(n,a,arguments);if(c&&u){var r=c(t,"length");r.configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var d=function(){return s(n,i,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d},388:e=>{var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString;e.exports=function(e,n,o){if("[object Function]"!==r.call(n))throw new TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var a=0;a<i;a++)n.call(o,e[a],a,e);else for(var s in e)t.call(e,s)&&n.call(o,e[s],s,e)}},795:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,o="[object Function]";e.exports=function(e){var i=this;if("function"!=typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var a,s=r.call(arguments,1),c=function(){if(this instanceof a){var t=i.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,s.concat(r.call(arguments)))},u=Math.max(0,i.length-s.length),l=[],d=0;d<u;d++)l.push("$"+d);if(a=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(c),i.prototype){var p=function(){};p.prototype=i.prototype,a.prototype=new p,p.prototype=null}return a}},90:(e,t,r)=>{"use strict";var n=r(795);e.exports=Function.prototype.bind||n},286:(e,t,r)=>{"use strict";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var u=function(){throw new a},l=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(e){return u}}}():u,d=r(636)(),p=Object.getPrototypeOf||function(e){return e.__proto__},f={},y="undefined"==typeof Uint8Array?n:p(Uint8Array),g={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":d?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?p(p([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?p(""[Symbol.iterator]()):n,"%Symbol%":d?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":l,"%TypedArray%":y,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},h=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=p(o.prototype))}return g[t]=r,r},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=r(90),b=r(198),w=v.call(Function.call,Array.prototype.concat),A=v.call(Function.apply,Array.prototype.splice),O=v.call(Function.call,String.prototype.replace),C=v.call(Function.call,String.prototype.slice),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,k=/\\(\\)?/g,P=function(e){var t=C(e,0,1),r=C(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return O(e,S,(function(e,t,r,o){n[n.length]=r?O(o,k,"$1"):t||e})),n},E=function(e,t){var r,n=e;if(b(m,n)&&(n="%"+(r=m[n])[0]+"%"),b(g,n)){var i=g[n];if(i===f&&(i=h(n)),void 0===i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');var r=P(e),n=r.length>0?r[0]:"",i=E("%"+n+"%",t),s=i.name,u=i.value,l=!1,d=i.alias;d&&(n=d[0],A(r,w([0,1],d)));for(var p=1,f=!0;p<r.length;p+=1){var y=r[p],h=C(y,0,1),m=C(y,-1);if(('"'===h||"'"===h||"`"===h||'"'===m||"'"===m||"`"===m)&&h!==m)throw new o("property names with quotes must have matching quotes");if("constructor"!==y&&f||(l=!0),b(g,s="%"+(n+="."+y)+"%"))u=g[s];else if(null!=u){if(!(y in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&p+1>=r.length){var v=c(u,y);u=(f=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[y]}else f=b(u,y),u=u[y];f&&!l&&(g[s]=u)}}return u}},636:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(679);e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},679:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},226:(e,t,r)=>{"use strict";var n=r(679);e.exports=function(){return n()&&!!Symbol.toStringTag}},198:(e,t,r)=>{"use strict";var n=r(90);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},285:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},635:(e,t,r)=>{"use strict";var n=r(226)(),o=r(680)("Object.prototype.toString"),i=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o(e)},a=function(e){return!!i(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==o(e)&&"[object Function]"===o(e.callee)},s=function(){return i(arguments)}();i.isLegacyArguments=a,e.exports=s?i:a},138:(e,t,r)=>{"use strict";var n,o=Object.prototype.toString,i=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=r(226)(),c=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(a.test(i.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===o.call(e);if(!c)return!1;if(void 0===n){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();n=!!t&&c(t)}return c(e)===n}},21:(e,t,r)=>{"use strict";var n=r(388),o=r(191),i=r(680),a=i("Object.prototype.toString"),s=r(226)(),c="undefined"==typeof globalThis?r.g:globalThis,u=o(),l=i("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},d=i("String.prototype.slice"),p={},f=r(765),y=Object.getPrototypeOf;s&&f&&y&&n(u,(function(e){var t=new c[e];if(Symbol.toStringTag in t){var r=y(t),n=f(r,Symbol.toStringTag);if(!n){var o=y(r);n=f(o,Symbol.toStringTag)}p[e]=n.get}}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=d(a(e),8,-1);return l(u,t)>-1}return!!f&&function(e){var t=!1;return n(p,(function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}})),t}(e)}},82:e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},895:(e,t,r)=>{"use strict";var n=r(635),o=r(138),i=r(94),a=r(21);function s(e){return e.call.bind(e)}var c="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,l=s(Object.prototype.toString),d=s(Number.prototype.valueOf),p=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(c)var y=s(BigInt.prototype.valueOf);if(u)var g=s(Symbol.prototype.valueOf);function h(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function m(e){return"[object Map]"===l(e)}function v(e){return"[object Set]"===l(e)}function b(e){return"[object WeakMap]"===l(e)}function w(e){return"[object WeakSet]"===l(e)}function A(e){return"[object ArrayBuffer]"===l(e)}function O(e){return"undefined"!=typeof ArrayBuffer&&(A.working?A(e):e instanceof ArrayBuffer)}function C(e){return"[object DataView]"===l(e)}function S(e){return"undefined"!=typeof DataView&&(C.working?C(e):e instanceof DataView)}t.isArgumentsObject=n,t.isGeneratorFunction=o,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||S(e)},t.isUint8Array=function(e){return"Uint8Array"===i(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===i(e)},t.isUint16Array=function(e){return"Uint16Array"===i(e)},t.isUint32Array=function(e){return"Uint32Array"===i(e)},t.isInt8Array=function(e){return"Int8Array"===i(e)},t.isInt16Array=function(e){return"Int16Array"===i(e)},t.isInt32Array=function(e){return"Int32Array"===i(e)},t.isFloat32Array=function(e){return"Float32Array"===i(e)},t.isFloat64Array=function(e){return"Float64Array"===i(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===i(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===i(e)},m.working="undefined"!=typeof Map&&m(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(m.working?m(e):e instanceof Map)},v.working="undefined"!=typeof Set&&v(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(v.working?v(e):e instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(b.working?b(e):e instanceof WeakMap)},w.working="undefined"!=typeof WeakSet&&w(new WeakSet),t.isWeakSet=function(e){return w(e)},A.working="undefined"!=typeof ArrayBuffer&&A(new ArrayBuffer),t.isArrayBuffer=O,C.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&C(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=S;var k="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function P(e){return"[object SharedArrayBuffer]"===l(e)}function E(e){return void 0!==k&&(void 0===P.working&&(P.working=P(new k)),P.working?P(e):e instanceof k)}function T(e){return h(e,d)}function I(e){return h(e,p)}function x(e){return h(e,f)}function N(e){return c&&h(e,y)}function j(e){return u&&h(e,g)}t.isSharedArrayBuffer=E,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=T,t.isStringObject=I,t.isBooleanObject=x,t.isBigIntObject=N,t.isSymbolObject=j,t.isBoxedPrimitive=function(e){return T(e)||I(e)||x(e)||N(e)||j(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(O(e)||E(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},335:(e,t,r)=>{var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},o=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(c(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])h(s)||!A(s)?a+=" "+s:a+=" "+c(s);return a},t.deprecate=function(e,r){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return e.apply(this,arguments)}};var i={},a=/^$/;if(process.env.NODE_DEBUG){var s=process.env.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),a=new RegExp("^"+s+"$","i")}function c(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&t._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),d(n,e,n.depth)}function u(e,t){var r=c.styles[t];return r?"["+c.colors[r][0]+"m"+e+"["+c.colors[r][1]+"m":e}function l(e,t){return e}function d(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,e);return v(o)||(o=d(e,o,n)),o}var i=function(e,t){if(b(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(m(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(h(t))return e.stylize("null","null")}(e,r);if(i)return i;var a=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),C(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(r);if(0===a.length){if(S(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(w(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(O(r))return e.stylize(Date.prototype.toString.call(r),"date");if(C(r))return p(r)}var u,l="",A=!1,k=["{","}"];(y(r)&&(A=!0,k=["[","]"]),S(r))&&(l=" [Function"+(r.name?": "+r.name:"")+"]");return w(r)&&(l=" "+RegExp.prototype.toString.call(r)),O(r)&&(l=" "+Date.prototype.toUTCString.call(r)),C(r)&&(l=" "+p(r)),0!==a.length||A&&0!=r.length?n<0?w(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=A?function(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)I(t,String(a))?i.push(f(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(f(e,t,r,n,o,!0))})),i}(e,r,n,s,a):a.map((function(t){return f(e,r,n,s,t,A)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,l,k)):k[0]+l+k[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),I(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=h(r)?d(e,c.value,null):d(e,c.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),b(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function y(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function h(e){return null===e}function m(e){return"number"==typeof e}function v(e){return"string"==typeof e}function b(e){return void 0===e}function w(e){return A(e)&&"[object RegExp]"===k(e)}function A(e){return"object"==typeof e&&null!==e}function O(e){return A(e)&&"[object Date]"===k(e)}function C(e){return A(e)&&("[object Error]"===k(e)||e instanceof Error)}function S(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!i[e])if(a.test(e)){var r=process.pid;i[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else i[e]=function(){};return i[e]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r(895),t.isArray=y,t.isBoolean=g,t.isNull=h,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=b,t.isRegExp=w,t.types.isRegExp=w,t.isObject=A,t.isDate=O,t.types.isDate=O,t.isError=C,t.types.isNativeError=C,t.isFunction=S,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(82);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",T(),t.format.apply(t,arguments))},t.inherits=r(285),t._extend=function(e,t){if(!t||!A(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function N(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(x&&e[x]){var t;if("function"!=typeof(t=e[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),x&&Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=x,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};e.apply(this,t).then((function(e){process.nextTick(i.bind(null,null,e))}),(function(e){process.nextTick(N.bind(null,e,i))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,n(e)),t}},94:(e,t,r)=>{"use strict";var n=r(388),o=r(191),i=r(680),a=i("Object.prototype.toString"),s=r(226)(),c="undefined"==typeof globalThis?r.g:globalThis,u=o(),l=i("String.prototype.slice"),d={},p=r(765),f=Object.getPrototypeOf;s&&p&&f&&n(u,(function(e){if("function"==typeof c[e]){var t=new c[e];if(Symbol.toStringTag in t){var r=f(t),n=p(r,Symbol.toStringTag);if(!n){var o=f(r);n=p(o,Symbol.toStringTag)}d[e]=n.get}}}));var y=r(21);e.exports=function(e){return!!y(e)&&(s&&Symbol.toStringTag in e?function(e){var t=!1;return n(d,(function(r,n){if(!t)try{var o=r.call(e);o===n&&(t=o)}catch(e){}})),t}(e):l(a(e),8,-1))}},191:(e,t,r)=>{"use strict";var n=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<n.length;t++)"function"==typeof o[n[t]]&&(e[e.length]=n[t]);return e}},765:(e,t,r)=>{"use strict";var n=r(286)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(e){n=null}e.exports=n}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{AttributeInputCallback:()=>P,Auth:()=>f,CallbackType:()=>g,ChoiceCallback:()=>E,Config:()=>t,ConfirmationCallback:()=>T,Deferred:()=>Xe,DeviceProfileCallback:()=>I,Dispatcher:()=>h,ErrorCode:()=>y,FRAuth:()=>J,FRCallback:()=>k,FRDevice:()=>oe,FRLoginFailure:()=>C,FRLoginSuccess:()=>S,FRPolicy:()=>A,FRRecoveryCodes:()=>ie,FRStep:()=>W,FRUser:()=>Ue,FRWebAuthn:()=>He,HiddenValueCallback:()=>x,HttpClient:()=>Qe,KbaCreateCallback:()=>N,LocalStorage:()=>Ye,MetadataCallback:()=>j,NameCallback:()=>R,OAuth2Client:()=>Pe,PKCE:()=>ve,PasswordCallback:()=>U,PolicyKey:()=>m,PollingWaitCallback:()=>$,ReCaptchaCallback:()=>B,RedirectCallback:()=>M,ResponseType:()=>be,SelectIdPCallback:()=>V,SessionManager:()=>Te,StepType:()=>O,SuspendedTextOutputCallback:()=>_,TermsAndConditionsCallback:()=>D,TextOutputCallback:()=>F,TokenManager:()=>Ne,TokenStorage:()=>ge,UserManager:()=>je,ValidatedCreatePasswordCallback:()=>L,ValidatedCreateUsernameCallback:()=>q,WebAuthnOutcome:()=>$e,WebAuthnStepType:()=>Me,defaultMessageCreator:()=>w});const e=6e4;const t=class{static set(e){if(!this.isValid(e))throw new Error("Configuration is invalid");e.serverConfig&&this.validateServerConfig(e.serverConfig),this.options=Object.assign({},e)}static get(e){if(!this.options&&!e)throw new Error("Configuration has not been set");const t=Object.assign(Object.assign({},this.options),e);if(!t.serverConfig||!t.serverConfig.baseUrl)throw new Error("Server configuration has not been set");return t}static isValid(e){return!(!e||!e.serverConfig)}static validateServerConfig(t){t.timeout||(t.timeout=e);const r=t.baseUrl;r&&"/"!==r.charAt(r.length-1)&&(t.baseUrl=r+"/")}};var o;!function(e){e.Authenticate="AUTHENTICATE",e.Authorize="AUTHORIZE",e.EndSession="END_SESSION",e.Logout="LOGOUT",e.ExchangeToken="EXCHANGE_TOKEN",e.RefreshToken="REFRESH_TOKEN",e.ResumeAuthenticate="RESUME_AUTHENTICATE",e.RevokeToken="REVOKE_TOKEN",e.StartAuthenticate="START_AUTHENTICATE",e.UserInfo="USER_INFO"}(o||(o={}));const i="forgerock-sdk";function a(t,r=6e4){const n=r||e;return Promise.race([t,new Promise(((e,t)=>window.setTimeout((()=>t(new Error("Timeout"))),n)))])}function s(e){const t="http:"===e.protocol&&-1===["","80"].indexOf(e.port)||"https:"===e.protocol&&-1===["","443"].indexOf(e.port)?`:${e.port}`:"";return`${e.protocol}//${e.hostname}${t}`}function c(e,t,r){const n=function(e){const t=(e||"").split("/").map((e=>e.trim())).filter((e=>""!==e));return"root"!==t[0]&&t.unshift("root"),t.map((e=>`realms/${e}`)).join("/")}(t),o={authenticate:`json/${n}/authenticate`,authorize:`oauth2/${n}/authorize`,accessToken:`oauth2/${n}/access_token`,endSession:`oauth2/${n}/connect/endSession`,userInfo:`oauth2/${n}/userinfo`,revoke:`oauth2/${n}/token/revoke`,sessions:`json/${n}/sessions/`};return r&&r[e]?r[e]:o[e]}function u(e,t){const r=new URL(e);if(t.startsWith("/"))return`${s(r)}${t}`;const n=r.pathname.split("/"),o=t.split("/").filter((e=>!!e)),i=[...n.slice(0,-1),...o].join("/");return`${s(r)}${i}`}function l(e){const t=[];for(const r in e)e[r]&&t.push(r+"="+encodeURIComponent(e[r]));return t.join("&")}const d=function(e,{type:t,payload:r}){const n=Object.freeze({type:t,payload:r});return t=>{if(!Array.isArray(t))return e;const r=t.map((e=>e));return function t(){const o=r.shift();return o&&o(e,n,t),e}()}};var p=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const f=class{static next(e,r){return p(this,void 0,void 0,(function*(){const{middleware:n,realmPath:i,serverConfig:s,tree:c,type:u}=t.get(r),l=r?r.query:{},p=this.constructUrl(s,i,c,l),f=d({url:new URL(p),init:this.configureRequest(e)},{type:e?o.Authenticate:o.StartAuthenticate,payload:{tree:c,type:u||"service"}})(n),y=yield a(fetch(f.url.toString(),f.init),s.timeout);return yield this.getResponseJson(y)}))}static constructUrl(e,t,r,n){const o=r?{authIndexType:"service",authIndexValue:r}:void 0,i=Object.assign(Object.assign({},n),o),a=Object.keys(i).length>0?`?${l(i)}`:"",s=c("authenticate",t,e.paths);return u(e.baseUrl,`${s}${a}`)}static configureRequest(e){return{body:e?JSON.stringify(e):void 0,credentials:"include",headers:new Headers({accept:"application/json","accept-api-version":"protocol=1.0,resource=2.1","content-type":"application/json","x-requested-with":i}),method:"POST"}}static getResponseJson(e){return p(this,void 0,void 0,(function*(){const t=e.headers.get("content-type"),r=t&&t.indexOf("application/json")>-1?yield e.json():{};return r.status=e.status,r.ok=e.ok,r}))}};var y,g;!function(e){e.BadRequest="BAD_REQUEST",e.Timeout="TIMEOUT",e.Unauthorized="UNAUTHORIZED",e.Unknown="UNKNOWN"}(y||(y={})),function(e){e.BooleanAttributeInputCallback="BooleanAttributeInputCallback",e.ChoiceCallback="ChoiceCallback",e.ConfirmationCallback="ConfirmationCallback",e.DeviceProfileCallback="DeviceProfileCallback",e.HiddenValueCallback="HiddenValueCallback",e.KbaCreateCallback="KbaCreateCallback",e.MetadataCallback="MetadataCallback",e.NameCallback="NameCallback",e.NumberAttributeInputCallback="NumberAttributeInputCallback",e.PasswordCallback="PasswordCallback",e.PollingWaitCallback="PollingWaitCallback",e.ReCaptchaCallback="ReCaptchaCallback",e.RedirectCallback="RedirectCallback",e.SelectIdPCallback="SelectIdPCallback",e.StringAttributeInputCallback="StringAttributeInputCallback",e.SuspendedTextOutputCallback="SuspendedTextOutputCallback",e.TermsAndConditionsCallback="TermsAndConditionsCallback",e.TextOutputCallback="TextOutputCallback",e.ValidatedCreatePasswordCallback="ValidatedCreatePasswordCallback",e.ValidatedCreateUsernameCallback="ValidatedCreateUsernameCallback"}(g||(g={}));const h=class{constructor(){this.callbacks={}}addEventListener(e,t){!function(e,t,r){e[t]=e[t]||[],e[t].indexOf(r)<0&&e[t].push(r)}(this.callbacks,e,t)}removeEventListener(e,t){!function(e,t,r){if(!e[t])return;const n=e[t].indexOf(r);n>=0&&e[t].splice(n,1)}(this.callbacks,e,t)}clearEventListeners(e){!function(e,t){Object.keys(e).forEach((r=>{t&&r!==t||delete e[r]}))}(this.callbacks,e)}dispatchEvent(e){if(this.callbacks[e.type])for(const t of this.callbacks[e.type])t(e)}};var m;function v(e,t,r){return 1===e?t:void 0!==r?r:t+"s"}function b(e,t,r){return e&&void 0!==e[t]?e[t]:r}!function(e){e.CannotContainCharacters="CANNOT_CONTAIN_CHARACTERS",e.CannotContainDuplicates="CANNOT_CONTAIN_DUPLICATES",e.CannotContainOthers="CANNOT_CONTAIN_OTHERS",e.LeastCapitalLetters="AT_LEAST_X_CAPITAL_LETTERS",e.LeastNumbers="AT_LEAST_X_NUMBERS",e.MatchRegexp="MATCH_REGEXP",e.MaximumLength="MAX_LENGTH",e.MaximumNumber="MAXIMUM_NUMBER_VALUE",e.MinimumLength="MIN_LENGTH",e.MinimumNumber="MINIMUM_NUMBER_VALUE",e.Required="REQUIRED",e.Unique="UNIQUE",e.UnknownPolicy="UNKNOWN_POLICY",e.ValidArrayItems="VALID_ARRAY_ITEMS",e.ValidDate="VALID_DATE",e.ValidEmailAddress="VALID_EMAIL_ADDRESS_FORMAT",e.ValidNameFormat="VALID_NAME_FORMAT",e.ValidNumber="VALID_NUMBER",e.ValidPhoneFormat="VALID_PHONE_FORMAT",e.ValidQueryFilter="VALID_QUERY_FILTER",e.ValidType="VALID_TYPE"}(m||(m={}));const w={[m.CannotContainCharacters]:(e,t)=>`${e} must not contain following characters: "${b(t,"forbiddenChars","")}"`,[m.CannotContainDuplicates]:(e,t)=>`${e}  must not contain duplicates: "${b(t,"duplicateValue","")}"`,[m.CannotContainOthers]:(e,t)=>`${e} must not contain: "${b(t,"disallowedFields","")}"`,[m.LeastCapitalLetters]:(e,t)=>{const r=b(t,"numCaps",0);return`${e} must contain at least ${r} capital ${v(r,"letter")}`},[m.LeastNumbers]:(e,t)=>{const r=b(t,"numNums",0);return`${e} must contain at least ${r} numeric ${v(r,"value")}`},[m.MatchRegexp]:e=>`${e} has failed the "MATCH_REGEXP" policy`,[m.MaximumLength]:(e,t)=>{const r=b(t,"maxLength",0);return`${e} must be at most ${r} ${v(r,"character")}`},[m.MaximumNumber]:e=>`${e} has failed the "MAXIMUM_NUMBER_VALUE" policy`,[m.MinimumLength]:(e,t)=>{const r=b(t,"minLength",0);return`${e} must be at least ${r} ${v(r,"character")}`},[m.MinimumNumber]:e=>`${e} has failed the "MINIMUM_NUMBER_VALUE" policy`,[m.Required]:e=>`${e} is required`,[m.Unique]:e=>`${e} must be unique`,[m.UnknownPolicy]:(e,t)=>`${e}: Unknown policy requirement "${b(t,"policyRequirement","Unknown")}"`,[m.ValidArrayItems]:e=>`${e} has failed the "VALID_ARRAY_ITEMS" policy`,[m.ValidDate]:e=>`${e} has an invalid date`,[m.ValidEmailAddress]:e=>`${e} has an invalid email address`,[m.ValidNameFormat]:e=>`${e} has an invalid name format`,[m.ValidNumber]:e=>`${e} has an invalid number`,[m.ValidPhoneFormat]:e=>`${e} has an invalid phone number`,[m.ValidQueryFilter]:e=>`${e} has failed the "VALID_QUERY_FILTER" policy`,[m.ValidType]:e=>`${e} has failed the "VALID_TYPE" policy`};const A=class{static parseErrors(e,t){const r=[];return e.detail&&e.detail.failedPolicyRequirements&&e.detail.failedPolicyRequirements.map((e=>{r.push.apply(r,[{detail:e,messages:this.parseFailedPolicyRequirement(e,t)}])})),r}static parseFailedPolicyRequirement(e,t){const r=[];return e.policyRequirements.map((n=>{r.push(this.parsePolicyRequirement(e.property,n,t))})),r}static parsePolicyRequirement(e,t,r={}){const n="string"==typeof t?JSON.parse(t):Object.assign({},t),o=n.policyRequirement;return(r[o]||w[o]||w[m.UnknownPolicy])(e,n.params?Object.assign(Object.assign({},n.params),{policyRequirement:o}):{policyRequirement:o})}};var O;!function(e){e.LoginFailure="LoginFailure",e.LoginSuccess="LoginSuccess",e.Step="Step"}(O||(O={}));const C=class{constructor(e){this.payload=e,this.type=O.LoginFailure}getCode(){return Number(this.payload.code)}getDetail(){return this.payload.detail}getMessage(){return this.payload.message}getProcessedMessage(e){return A.parseErrors(this.payload,e)}getReason(){return this.payload.reason}};const S=class{constructor(e){this.payload=e,this.type=O.LoginSuccess}getRealm(){return this.payload.realm}getSessionToken(){return this.payload.tokenId}getSuccessUrl(){return this.payload.successUrl}};const k=class{constructor(e){this.payload=e}getType(){return this.payload.type}getInputValue(e=0){return this.getArrayElement(this.payload.input,e).value}setInputValue(e,t=0){this.getArrayElement(this.payload.input,t).value=e}getOutputValue(e=0){return this.getArrayElement(this.payload.output,e).value}getOutputByName(e,t){const r=this.payload.output.find((t=>t.name===e));return r?r.value:t}getArrayElement(e,t=0){if(void 0===e)throw new Error(`No NameValue array was provided to search (selector ${t})`);if("number"==typeof t){if(t<0||t>e.length-1)throw new Error(`Selector index ${t} is out of range`);return e[t]}if("string"==typeof t){const r=e.find((e=>e.name===t));if(!r)throw new Error(`Missing callback input entry "${t}"`);return r}if("object"==typeof t&&t.test&&t.exec){const r=e.find((e=>t.test(e.name)));if(!r)throw new Error(`Missing callback input entry "${t}"`);return r}throw new Error("Invalid selector value type")}};const P=class extends k{constructor(e){super(e),this.payload=e}getName(){return this.getOutputByName("name","")}getPrompt(){return this.getOutputByName("prompt","")}isRequired(){return this.getOutputByName("required",!1)}getFailedPolicies(){return this.getOutputByName("failedPolicies",[])}getPolicies(){return this.getOutputByName("policies",{})}setValidateOnly(e){this.setInputValue(e,/validateOnly/)}setValue(e){this.setInputValue(e)}};const E=class extends k{constructor(e){super(e),this.payload=e}getPrompt(){return this.getOutputByName("prompt","")}getDefaultChoice(){return this.getOutputByName("defaultChoice",0)}getChoices(){return this.getOutputByName("choices",[])}setChoiceIndex(e){const t=this.getChoices().length;if(e<0||e>t-1)throw new Error(`${e} is out of bounds`);this.setInputValue(e)}setChoiceValue(e){const t=this.getChoices().indexOf(e);if(-1===t)throw new Error(`"${e}" is not a valid choice`);this.setInputValue(t)}};const T=class extends k{constructor(e){super(e),this.payload=e}getDefaultOption(){return Number(this.getOutputByName("defaultOption",0))}getMessageType(){return Number(this.getOutputByName("messageType",0))}getOptions(){return this.getOutputByName("options",[])}getOptionType(){return Number(this.getOutputByName("optionType",0))}getPrompt(){return this.getOutputByName("prompt","")}setOptionIndex(e){if(0!==e&&1!==e)throw new Error(`"${e}" is not a valid choice`);this.setInputValue(e)}setOptionValue(e){const t=this.getOptions().indexOf(e);if(-1===t)throw new Error(`"${e}" is not a valid choice`);this.setInputValue(t)}};const I=class extends k{constructor(e){super(e),this.payload=e}getMessage(){return this.getOutputByName("message","")}isMetadataRequired(){return this.getOutputByName("metadata",!1)}isLocationRequired(){return this.getOutputByName("location",!1)}setProfile(e){this.setInputValue(JSON.stringify(e))}};const x=class extends k{constructor(e){super(e),this.payload=e}};const N=class extends k{constructor(e){super(e),this.payload=e}getPrompt(){return this.getOutputByName("prompt","")}getPredefinedQuestions(){return this.getOutputByName("predefinedQuestions",[])}setQuestion(e){this.setValue("question",e)}setAnswer(e){this.setValue("answer",e)}setValue(e,t){if(!this.payload.input)throw new Error("KBA payload is missing input");const r=this.payload.input.find((t=>t.name.endsWith(e)));if(!r)throw new Error(`No input has name ending in "${e}"`);r.value=t}};const j=class extends k{constructor(e){super(e),this.payload=e}getData(){return this.getOutputByName("data",{})}};const R=class extends k{constructor(e){super(e),this.payload=e}getPrompt(){return this.getOutputByName("prompt","")}setName(e){this.setInputValue(e)}};const U=class extends k{constructor(e){super(e),this.payload=e}getFailedPolicies(){return this.getOutputByName("failedPolicies",[])}getPolicies(){return this.getOutputByName("policies",[])}getPrompt(){return this.getOutputByName("prompt","")}setPassword(e){this.setInputValue(e)}};const $=class extends k{constructor(e){super(e),this.payload=e}getMessage(){return this.getOutputByName("message","")}getWaitTime(){return Number(this.getOutputByName("waitTime",0))}};const B=class extends k{constructor(e){super(e),this.payload=e}getSiteKey(){return this.getOutputByName("recaptchaSiteKey","")}setResult(e){this.setInputValue(e)}};const M=class extends k{constructor(e){super(e),this.payload=e}getRedirectUrl(){return this.getOutputByName("redirectUrl","")}};const V=class extends k{constructor(e){super(e),this.payload=e}getProviders(){return this.getOutputByName("providers",[])}setProvider(e){const t=this.getProviders().find((t=>t.provider===e));if(!t)throw new Error(`"${e}" is not a valid choice`);this.setInputValue(t.provider)}};const F=class extends k{constructor(e){super(e),this.payload=e}getMessage(){return this.getOutputByName("message","")}getMessageType(){return this.getOutputByName("messageType","")}};const _=class extends F{constructor(e){super(e),this.payload=e}};const D=class extends k{constructor(e){super(e),this.payload=e}getTerms(){return this.getOutputByName("terms","")}getVersion(){return this.getOutputByName("version","")}getCreateDate(){const e=this.getOutputByName("createDate","");return new Date(e)}setAccepted(e=!0){this.setInputValue(e)}};const L=class extends k{constructor(e){super(e),this.payload=e}getFailedPolicies(){return this.getOutputByName("failedPolicies",[])}getPolicies(){return this.getOutputByName("policies",{})}getPrompt(){return this.getOutputByName("prompt","")}isRequired(){return this.getOutputByName("required",!1)}setPassword(e){this.setInputValue(e)}setValidateOnly(e){this.setInputValue(e,/validateOnly/)}};const q=class extends k{constructor(e){super(e),this.payload=e}getPrompt(){return this.getOutputByName("prompt","")}getFailedPolicies(){return this.getOutputByName("failedPolicies",[])}getPolicies(){return this.getOutputByName("policies",{})}isRequired(){return this.getOutputByName("required",!1)}setName(e){this.setInputValue(e)}setValidateOnly(e){this.setInputValue(e,/validateOnly/)}};const z=function(e){switch(e.type){case g.BooleanAttributeInputCallback:return new P(e);case g.ChoiceCallback:return new E(e);case g.ConfirmationCallback:return new T(e);case g.DeviceProfileCallback:return new I(e);case g.HiddenValueCallback:return new x(e);case g.KbaCreateCallback:return new N(e);case g.MetadataCallback:return new j(e);case g.NameCallback:return new R(e);case g.NumberAttributeInputCallback:return new P(e);case g.PasswordCallback:return new U(e);case g.PollingWaitCallback:return new $(e);case g.ReCaptchaCallback:return new B(e);case g.RedirectCallback:return new M(e);case g.SelectIdPCallback:return new V(e);case g.StringAttributeInputCallback:return new P(e);case g.SuspendedTextOutputCallback:return new _(e);case g.TermsAndConditionsCallback:return new D(e);case g.TextOutputCallback:return new F(e);case g.ValidatedCreatePasswordCallback:return new L(e);case g.ValidatedCreateUsernameCallback:return new q(e);default:return new k(e)}};const W=class{constructor(e,t){this.payload=e,this.type=O.Step,this.callbacks=[],e.callbacks&&(this.callbacks=this.convertCallbacks(e.callbacks,t))}getCallbackOfType(e){const t=this.getCallbacksOfType(e);if(1!==t.length)throw new Error(`Expected 1 callback of type "${e}", but found ${t.length}`);return t[0]}getCallbacksOfType(e){return this.callbacks.filter((t=>t.getType()===e))}setCallbackValue(e,t){const r=this.getCallbacksOfType(e);if(1!==r.length)throw new Error(`Expected 1 callback of type "${e}", but found ${r.length}`);r[0].setInputValue(t)}getDescription(){return this.payload.description}getHeader(){return this.payload.header}getStage(){return this.payload.stage}convertCallbacks(e,t){return e.map((e=>(t||z)(e)||z(e)))}};var H=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};class K{static next(e,t){return H(this,void 0,void 0,(function*(){const r=yield f.next(e?e.payload:void 0,t);if(r.authId){const e=t?t.callbackFactory:void 0;return new W(r,e)}return!r.authId&&r.ok?new S(r):new C(r)}))}static redirect(e){const t=e.getCallbackOfType(g.RedirectCallback).getRedirectUrl();window.localStorage.setItem(this.previousStepKey,JSON.stringify(e)),window.location.assign(t)}static resume(e,t){return H(this,void 0,void 0,(function*(){const r=new URL(e),n=r.searchParams.get("code"),o=r.searchParams.get("form_post_entry"),i=r.searchParams.get("nonce"),a=r.searchParams.get("scope"),s=r.searchParams.get("state"),c=r.searchParams.get("suspendedId");let u;if(n&&s||o){const e=window.localStorage.getItem(this.previousStepKey);if(!e)throw new Error("Error: could not retrieve original redirect information.");try{u=JSON.parse(e)}catch(e){throw new Error("Error: could not parse redirect params or step information")}window.localStorage.removeItem(this.previousStepKey)}const l=Object.assign(Object.assign({},t),{query:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t&&t.query),n&&{code:n}),o&&{form_post_entry:o}),i&&{nonce:i}),a&&{scope:a}),s&&{state:s}),c&&{suspendedId:c})});return yield this.next(u,l)}))}static start(e){return H(this,void 0,void 0,(function*(){return yield K.next(void 0,e)}))}}K.previousStepKey="FRAuth_PreviousStep";const J=K,G=["userAgent","appName","appCodeName","appVersion","appMinorVersion","buildID","product","productSub","vendor","vendorSub","browserLanguage"],Q=["fontNames","displayProps","browserProps","hardwareProps","platformProps"],X={mac:["Macintosh","MacIntel","MacPPC","Mac68K"],windows:["Win32","Win64","Windows","WinCE"],ios:["iPhone","iPad","iPod"]},Y=["width","height","pixelDepth","orientation.angle"],Z=["cursive","monospace","serif","sans-serif","fantasy","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Bookman Old Style","Bradley Hand ITC","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Georgia","Gentium","Impact","King","Lucida Console","Lalit","Modena","Monotype Corsiva","Papyrus","Tahoma","TeX","Times","Times New Roman","Trebuchet MS","Verdana","Verona"],ee=["cpuClass","deviceMemory","hardwareConcurrency","maxTouchPoints","oscpu"],te=["language","platform","userLanguage","systemLanguage"];const re=class{reduceToObject(e,t){return e.reduce(((e,r)=>{if(r.includes(".")){const n=r.split("."),o=n[0],i=n[1],a=t[o]&&t[o][i];e[i]=null!=a?a:""}else e[r]=null!=t[r]?t[r]:null;return e}),{})}reduceToString(e,t){return e.reduce(((e,r)=>e=`${e}${t[r].filename};`),"")}};var ne=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const oe=class extends re{constructor(e){super(),this.config={fontNames:Z,devicePlatforms:X,displayProps:Y,browserProps:G,hardwareProps:ee,platformProps:te},e&&Object.keys(e).forEach((t=>{if(!Q.includes(t))throw new Error("Device profile configuration category does not exist.");this.config[t]=e[t]}))}getBrowserMeta(){return navigator?this.reduceToObject(this.config.browserProps,navigator):(console.warn("Cannot collect browser metadata. navigator is not defined."),{})}getBrowserPluginsNames(){return navigator&&navigator.plugins?this.reduceToString(Object.keys(navigator.plugins),navigator.plugins):(console.warn("Cannot collect browser plugin information. navigator.plugins is not defined."),"")}getDeviceName(){if(!navigator)return console.warn("Cannot collect device name. navigator is not defined."),"";const e=navigator.userAgent,t=navigator.platform;switch(!0){case this.config.devicePlatforms.mac.includes(t):return"Mac (Browser)";case this.config.devicePlatforms.ios.includes(t):return`${t} (Browser)`;case this.config.devicePlatforms.windows.includes(t):return"Windows (Browser)";case/Android/.test(t)||/Android/.test(e):return"Android (Browser)";case/CrOS/.test(e)||/Chromebook/.test(e):return"Chrome OS (Browser)";case/Linux/.test(t):return"Linux (Browser)";default:return`${t||"Unknown"} (Browser)`}}getDisplayMeta(){return screen||console.warn("Cannot collect screen information. screen is not defined."),this.reduceToObject(this.config.displayProps,screen)}getHardwareMeta(){return navigator?this.reduceToObject(this.config.hardwareProps,navigator):(console.warn("Cannot collect OS metadata. Navigator is not defined."),{})}getIdentifier(){if(!window.crypto||!window.crypto.getRandomValues)return console.warn("Cannot generate profile ID. Crypto and/or getRandomValues is not supported."),"";if(!localStorage)return console.warn("Cannot store profile ID. localStorage is not supported."),"";let e=localStorage.getItem("profile-id");return e||(e=window.crypto.getRandomValues(new Uint32Array(3)).join("-"),localStorage.setItem("profile-id",e)),e}getInstalledFonts(){const e=document.createElement("canvas");if(!e)return console.warn("Cannot collect font data. Browser does not support canvas element"),"";const t=e.getContext&&e.getContext("2d");if(!t)return console.warn("Cannot collect font data. Browser does not support 2d canvas context"),"";const r="abcdefghi0123456789";t.font="72px Comic Sans";const n=t.measureText(r).width;return this.config.fontNames.reduce(((e,o)=>{t.font=`72px ${o}, Comic Sans`;return t.measureText(r).width!==n&&(e=`${e}${o};`),e}),"")}getLocationCoordinates(){return ne(this,void 0,void 0,(function*(){return navigator&&navigator.geolocation?new Promise((e=>ne(this,void 0,void 0,(function*(){navigator.geolocation.getCurrentPosition((t=>e({latitude:t.coords.latitude,longitude:t.coords.longitude})),(t=>{console.warn("Cannot collect geolocation information. "+t.code+": "+t.message),e({})}),{enableHighAccuracy:!0,timeout:3e4,maximumAge:0})})))):(console.warn("Cannot collect geolocation information. navigator.geolocation is not defined."),Promise.resolve({}))}))}getOSMeta(){return navigator?this.reduceToObject(this.config.platformProps,navigator):(console.warn("Cannot collect OS metadata. navigator is not defined."),{})}getProfile({location:e,metadata:t}){return ne(this,void 0,void 0,(function*(){const r={identifier:this.getIdentifier()};return t&&(r.metadata={hardware:Object.assign(Object.assign({},this.getHardwareMeta()),{display:this.getDisplayMeta()}),browser:Object.assign(Object.assign({},this.getBrowserMeta()),{plugins:this.getBrowserPluginsNames()}),platform:Object.assign(Object.assign({},this.getOSMeta()),{deviceName:this.getDeviceName(),fonts:this.getInstalledFonts(),timezone:this.getTimezoneOffset()})}),e&&(r.location=yield this.getLocationCoordinates()),r}))}getTimezoneOffset(){try{return(new Date).getTimezoneOffset()}catch(e){return console.warn("Cannot collect timezone information. getTimezoneOffset is not defined."),null}}};const ie=class{static getCodes(e){var t;return function(e){const t=e.match(/\s[\w\W]"([\w]*)\\/g);return Array.isArray(t)&&t.map((e=>{const t=e.match(/"([\w]*)\\/);return Array.isArray(t)?t[1]:""}))||[]}((null===(t=this.getDisplayCallback(e))||void 0===t?void 0:t.getOutputByName("message",""))||"")}static isDisplayStep(e){return!!this.getDisplayCallback(e)}static getDisplayCallback(e){return e.getCallbacksOfType(g.TextOutputCallback).find((e=>{const t=e.getOutputByName("message",void 0);return t&&(t.includes("Recovery Codes")||t.includes("recovery codes"))}))}},ae="forgerock-sdk",se="tokens";var ce=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const ue=class{static get(e){return ce(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{const n=()=>r(),o=window.indexedDB.open(ae);o.onsuccess=()=>{if(!o.result.objectStoreNames.contains(e))return o.result.close(),r("Client ID not found");const i=o.result.transaction(e,"readonly").objectStore(e).get(se);i.onsuccess=e=>{if(!e||!e.target)throw new Error("Missing storage event target");o.result.close(),t(e.target.result)},i.onerror=n},o.onupgradeneeded=()=>{o.result.close(),r("IndexedDB upgrade needed")},o.onerror=n}))}))}static set(e,t){return ce(this,void 0,void 0,(function*(){return new Promise(((r,n)=>{let o=window.indexedDB.open(ae);const i=()=>{o.result.close(),r()},a=()=>n(),s=()=>{o.result.createObjectStore(e)},c=()=>{if(!o.result.objectStoreNames.contains(e)){const e=o.result.version+1;return o.result.close(),o=window.indexedDB.open(ae,e),o.onupgradeneeded=s,o.onsuccess=c,void(o.onerror=a)}const r=o.result.transaction(e,"readwrite");r.onerror=a;const n=r.objectStore(e).put(t,se);n.onsuccess=i,n.onerror=a};o.onupgradeneeded=s,o.onsuccess=c,o.onerror=a}))}))}static remove(e){return ce(this,void 0,void 0,(function*(){return new Promise(((t,r)=>{const n=()=>r(),o=window.indexedDB.open(ae);o.onsuccess=()=>{if(!o.result.objectStoreNames.contains(e))return t();const r=o.result.transaction(e,"readwrite").objectStore(e).delete(se);r.onsuccess=()=>{t()},r.onerror=n},o.onerror=n}))}))}};var le=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const de=class{static get(e){return le(this,void 0,void 0,(function*(){const t=localStorage.getItem(`${ae}-${e}`);try{return Promise.resolve(JSON.parse(t||""))}catch(e){return void console.warn("Could not parse token from localStorage. This could be due to accessing a removed token")}}))}static set(e,t){return le(this,void 0,void 0,(function*(){const r=JSON.stringify(t);localStorage.setItem(`${ae}-${e}`,r)}))}static remove(e){return le(this,void 0,void 0,(function*(){localStorage.removeItem(`${ae}-${e}`)}))}};var pe=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const fe=class{static get(e){return pe(this,void 0,void 0,(function*(){const t=sessionStorage.getItem(`${ae}-${e}`);try{return Promise.resolve(JSON.parse(t||""))}catch(e){return void console.warn("Could not parse token from sessionStorage. This could be due to accessing a removed token")}}))}static set(e,t){return pe(this,void 0,void 0,(function*(){const r=JSON.stringify(t);sessionStorage.setItem(`${ae}-${e}`,r)}))}static remove(e){return pe(this,void 0,void 0,(function*(){sessionStorage.removeItem(`${ae}-${e}`)}))}};var ye=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const ge=class{static get(){return ye(this,void 0,void 0,(function*(){const{clientId:e,tokenStore:t}=this.getClientConfig();return"sessionStorage"===t?yield fe.get(e):"localStorage"===t?yield de.get(e):"indexedDB"===t?yield ue.get(e):t&&t.get?yield t.get(e):yield de.get(e)}))}static set(e){return ye(this,void 0,void 0,(function*(){const{clientId:t,tokenStore:r}=this.getClientConfig();return"sessionStorage"===r?yield fe.set(t,e):"localStorage"===r?yield de.set(t,e):"indexedDB"===r?yield ue.set(t,e):r&&r.set?yield r.set(t,e):yield de.set(t,e)}))}static remove(){return ye(this,void 0,void 0,(function*(){const{clientId:e,tokenStore:t}=this.getClientConfig();return"sessionStorage"===t?yield fe.remove(e):"localStorage"===t?yield de.remove(e):"indexedDB"===t?yield ue.remove(e):t&&t.remove?yield t.remove(e):yield de.remove(e)}))}static getClientConfig(){const{clientId:e,tokenStore:r}=t.get();if(!e)throw new Error("clientId is required to manage token storage");return{clientId:e,tokenStore:r}}};function he(e){return e.ok||4===Math.floor(e.status/100)}var me=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const ve=class{static createState(){return this.createRandomString(16)}static createVerifier(){return this.createRandomString(32)}static createChallenge(e){return me(this,void 0,void 0,(function*(){const t=yield this.sha256(e);return this.base64UrlEncode(t)}))}static base64UrlEncode(e){const t=Array.prototype.slice.call(e);return window.btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}static sha256(e){return me(this,void 0,void 0,(function*(){const t=(new TextEncoder).encode(e),r=yield window.crypto.subtle.digest("SHA-256",t);return new Uint8Array(r)}))}static createRandomString(e=32){const t=new Uint8Array(e);return window.crypto.getRandomValues(t),btoa(t.join("")).replace(/[^a-zA-Z0-9]+/,"")}};var be;!function(e){e.Code="code",e.Token="token"}(be||(be={}));var we=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const Ae="Authentication or consent required",Oe="Authorization timed out",Ce="Failed to fetch",Se="NetworkError when attempting to fetch resource.",ke="Cross-origin redirection";const Pe=class{static createAuthorizeUrl(e){return we(this,void 0,void 0,(function*(){const{clientId:r,middleware:n,redirectUri:i,scope:a}=t.get(e),s=Object.assign(Object.assign({},e.query),{client_id:r,redirect_uri:i,response_type:e.responseType,scope:a,state:e.state});if(e.verifier){const t=yield ve.createChallenge(e.verifier);s.code_challenge=t,s.code_challenge_method="S256"}const c=d({url:new URL(this.getUrl("authorize",s,e)),init:{}},{type:o.Authorize}),{url:u}=c(n);return u.toString()}))}static getAuthCodeByIframe(e){return we(this,void 0,void 0,(function*(){const r=yield this.createAuthorizeUrl(e),{serverConfig:n}=t.get(e);return new Promise(((e,t)=>{const o=document.createElement("iframe"),i=()=>{};let a=i,s=i,c=0;s=()=>{window.clearTimeout(c),o.removeEventListener("load",a),o.remove()},a=()=>{if(o.contentWindow){const t=o.contentWindow.location.href;(this.containsAuthCode(t)||this.containsAuthError(t))&&(s(),e(t))}},c=window.setTimeout((()=>{s(),t(new Error(Oe))}),n.timeout),o.style.display="none",o.addEventListener("load",a),document.body.appendChild(o),o.src=r}))}))}static getOAuth2Tokens(e){return we(this,void 0,void 0,(function*(){const{clientId:r,redirectUri:n}=t.get(e),o={client_id:r,code:e.authorizationCode,grant_type:"authorization_code",redirect_uri:n};e.verifier&&(o.code_verifier=e.verifier);const i=l(o),a={body:i,headers:new Headers({"content-length":i.length.toString(),"content-type":"application/x-www-form-urlencoded"}),method:"POST"},s=yield this.request("accessToken",void 0,!1,a,e),c=yield this.getBody(s);if(200!==s.status){const e="string"==typeof c?`Expected 200, received ${s.status}`:this.parseError(c);throw new Error(e)}const u=c;if(!u.access_token)throw new Error("Access token not found in response");return{accessToken:u.access_token,idToken:u.id_token,refreshToken:u.refresh_token}}))}static getUserInfo(e){return we(this,void 0,void 0,(function*(){const t=yield this.request("userInfo",void 0,!0,void 0,e);if(200!==t.status)throw new Error(`Failed to get user info; received ${t.status}`);return yield t.json()}))}static endSession(e){return we(this,void 0,void 0,(function*(){const{idToken:t}=yield ge.get(),r={};t&&(r.id_token_hint=t);const n=yield this.request("endSession",r,!0,void 0,e);if(!he(n))throw new Error(`Failed to end session; received ${n.status}`);return n}))}static revokeToken(e){return we(this,void 0,void 0,(function*(){const{clientId:r}=t.get(e),{accessToken:n}=yield ge.get(),o={body:l({client_id:r,token:n}),credentials:"include",headers:new Headers({"content-type":"application/x-www-form-urlencoded"}),method:"POST"},i=yield this.request("revoke",void 0,!1,o,e);if(!he(i))throw new Error(`Failed to revoke token; received ${i.status}`);return i}))}static request(e,r,n,i,s){return we(this,void 0,void 0,(function*(){const{middleware:c,serverConfig:u}=t.get(s),l=this.getUrl(e,r,s);if(i=i||{},n){const{accessToken:e}=yield ge.get();i.credentials="include",i.headers=i.headers||new Headers,i.headers.set("authorization",`Bearer ${e}`)}const p=d({url:new URL(l),init:i},{type:(e=>{switch(e){case"accessToken":return o.ExchangeToken;case"endSession":return o.EndSession;case"revoke":return o.RevokeToken;default:return o.UserInfo}})(e)}),f=p(c);return yield a(fetch(f.url.toString(),f.init),u.timeout)}))}static containsAuthCode(e){return!!e&&/code=([^&]+)/.test(e)}static containsAuthError(e){return!!e&&/error=([^&]+)/.test(e)}static getBody(e){return we(this,void 0,void 0,(function*(){const t=e.headers.get("content-type");return t&&t.indexOf("application/json")>-1?yield e.json():yield e.text()}))}static parseError(e){if(e){if(e.error&&e.error_description)return`${e.error}: ${e.error_description}`;if(e.code&&e.message)return`${e.code}: ${e.message}`}}static getUrl(e,r,n){const{realmPath:o,serverConfig:i}=t.get(n),a=c(e,o,i.paths);let s=u(i.baseUrl,a);return r&&(s+=`?${l(r)}`),s}};var Ee=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const Te=class{static logout(e){return Ee(this,void 0,void 0,(function*(){const{middleware:r,realmPath:n,serverConfig:s}=t.get(e),l={credentials:"include",headers:new Headers({"accept-api-version":"protocol=1.0,resource=2.0","x-requested-with":i}),method:"POST"},p=`${c("sessions",n,s.paths)}?_action=logout`,f=u(s.baseUrl,p),y=d({url:new URL(f),init:l},{type:o.Logout})(r),g=yield a(fetch(y.url.toString(),y.init),s.timeout);if(!he(g))throw new Error(`Failed to log out; received ${g.status}`);return g}))}};var Ie=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};class xe{static getTokens(e){var r,n,o;return Ie(this,void 0,void 0,(function*(){let i=null;const{clientId:s,serverConfig:c,support:u}=t.get(e);try{i=yield ge.get()}catch(e){console.info("No stored tokens available",e)}if(i&&!(null==e?void 0:e.forceRenew)&&!(null===(r=null==e?void 0:e.query)||void 0===r?void 0:r.code))return i;if(i)try{yield Pe.revokeToken(e),yield xe.deleteTokens()}catch(e){console.warn("Existing tokens could not be revoked or deleted",e)}if((null===(n=null==e?void 0:e.query)||void 0===n?void 0:n.code)&&(null===(o=null==e?void 0:e.query)||void 0===o?void 0:o.state)){const t=window.sessionStorage.getItem(s);window.sessionStorage.removeItem(s);const r=JSON.parse(t);return yield this.tokenExchange(e,r)}const l=ve.createVerifier(),d=ve.createState(),p=Object.assign(Object.assign({},e),{responseType:be.Code,state:d,verifier:l}),f=yield Pe.createAuthorizeUrl(p);try{let t;if("legacy"===u||void 0===u)t=new URL(yield Pe.getAuthCodeByIframe(p));else{const e=yield a(fetch(f,{credentials:"include",mode:"cors"}),c.timeout);t=new URL(e.url)}if(t.searchParams.get("error"))throw Error(`${t.searchParams.get("error_description")}`);if(!t.searchParams.get("code"))throw Error(Ae);const r=function(e){const t=new URL(e),r={};return t.searchParams.forEach(((e,t)=>r[t]=e)),r}(t.toString());e||(e={}),e.query=r}catch(t){if(!(t instanceof Error)||"redirect"!==(null==e?void 0:e.login))throw t;if(Ae!==t.message&&Oe!==t.message&&Ce!==t.message&&Se!==t.message&&!t.message.includes(ke))throw t;return window.sessionStorage.setItem(s,JSON.stringify(p)),window.location.assign(f)}return yield this.tokenExchange(e,{state:d,verifier:l})}))}static deleteTokens(){return Ie(this,void 0,void 0,(function*(){yield ge.remove()}))}static tokenExchange(e,t){var r,n,o,i;return Ie(this,void 0,void 0,(function*(){if((null===(r=e.query)||void 0===r?void 0:r.state)!==t.state)throw new Error("State mismatch");if(!(null===(n=e.query)||void 0===n?void 0:n.code)||Array.isArray(null===(o=e.query)||void 0===o?void 0:o.code))throw new Error("Failed to acquire authorization code");const a=null===(i=e.query)||void 0===i?void 0:i.code,s=t.verifier,c=Object.assign(Object.assign({},e),{authorizationCode:a,verifier:s}),u=yield Pe.getOAuth2Tokens(c);if(!u||!u.accessToken)throw new Error("Unable to exchange authorization for tokens");try{yield ge.set(u)}catch(e){console.error("Failed to store tokens",e)}return u}))}}const Ne=xe;const je=class{static getCurrentUser(e){return Pe.getUserInfo(e)}};var Re=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const Ue=class{static login(e,t){return Re(this,void 0,void 0,(function*(){throw console.info(e,t),new Error("FRUser.login() not implemented")}))}static loginWithUI(e,t){return Re(this,void 0,void 0,(function*(){try{yield e.getSession(t),yield Ne.getTokens({forceRenew:!0});return yield je.getCurrentUser()}catch(e){throw new Error("Login failed")}}))}static logout(e){return Re(this,void 0,void 0,(function*(){try{yield Te.logout(e)}catch(e){console.warn("Session logout was not successful")}try{yield Pe.endSession(e)}catch(e){console.warn("OAuth endSession was not successful")}try{yield Pe.revokeToken(e)}catch(e){console.warn("OAuth revokeToken was not successful")}yield Ne.deleteTokens()}))}};var $e,Be,Me;function Ve(e){return e||[]}function Fe(e){const t=new Uint8Array(e);return(new TextDecoder).decode(t)}function _e(e){return e?e[1]:""}function De(e){try{return e.split("}").filter((e=>!!e&&"]"!==e)).map((e=>{const t=function(e){const t=/new Int8Array\((.+)\)/.exec(e);if(null===t||t.length<2)return[];return JSON.parse(t[1])}(e);return{id:new Int8Array(t).buffer,type:"public-key"}}))}catch(e){const t=new Error("Transforming credential object to string failed");throw t.name=Be.EncodingError,t}}function Le(e){return Array.isArray(e)?e:"string"==typeof e?e&&"["===e[0]?JSON.parse(e):(e=e.replace(/(\w+):/g,'"$1":'),JSON.parse(`[${e}]`)):void 0}function qe(e){return e.includes("rpId")?e.replace(/rpId: "(.+)",/,"$1"):e.replace(/id: "(.+)",/,"$1")}!function(e){e.Error="ERROR",e.Unsupported="unsupported"}($e||($e={})),function(e){e.AbortError="AbortError",e.DataError="DataError",e.ConstraintError="ConstraintError",e.EncodingError="EncodingError",e.InvalidError="InvalidError",e.NetworkError="NetworkError",e.NotAllowedError="NotAllowedError",e.NotSupportedError="NotSupportedError",e.SecurityError="SecurityError",e.TimeoutError="TimeoutError",e.UnknownError="UnknownError"}(Be||(Be={})),function(e){e[e.None=0]="None",e[e.Authentication=1]="Authentication",e[e.Registration=2]="Registration"}(Me||(Me={}));const ze=r(335);r.g.TextEncoder=ze.TextEncoder;var We=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const He=class{static getWebAuthnStepType(e){const t=this.getOutcomeCallback(e),r=this.getMetadataCallback(e),n=this.getTextOutputCallback(e);if(t&&r){const e=r.getOutputValue("data");return(null==e?void 0:e.pubKeyCredParams)?Me.Registration:Me.Authentication}if(t&&n){return n.getMessage().includes("pubKeyCredParams")?Me.Registration:Me.Authentication}return Me.None}static authenticate(e){return We(this,void 0,void 0,(function*(){const{hiddenCallback:t,metadataCallback:r,textOutputCallback:n}=this.getCallbacks(e);if(t&&(r||n)){let o;try{let e;if(r){const t=r.getOutputValue("data");e=this.createAuthenticationPublicKey(t)}else n&&(e=function(e){let t,r;r=e.includes("acceptableCredentials")?_e(e.match(/acceptableCredentials"*\s*=\s*\[([^]+)\s*]/)).trim():_e(e.match(/allowCredentials"{0,}:\s{0,}\[([^]+)\s{0,}]/)).trim();const n=_e(e.match(/userVerification"{0,}:\s{0,}"(\w+)"/));r&&(t=(r.split("},")||[r]).map((e=>{const t=_e(e.match(/type"{0,}:\s{0,}"([\w-]+)"/)),r=Ve(e.match(/id"{0,}:\s{0,}new\s{0,}(Uint|Int)8Array\(([^\)]+)/)),n=JSON.parse(r[2]);return{type:t,id:new Int8Array(n).buffer}})));const o=Number(_e(e.match(/timeout"{0,}:\s{0,}(\d+)/))),i=Ve(e.match(/challenge"{0,}:\s{0,}new\s{0,}(Uint|Int)8Array\(([^\)]+)/)),a=JSON.parse(i[2]),s=new Int8Array(a).buffer,c=_e(e.match(/rpId"{0,}:\s{0,}\\{0,}"([^"\\]*)/));return Object.assign(Object.assign(Object.assign({challenge:s,timeout:o},t&&{allowCredentials:t}),n&&{userVerification:n}),c&&{rpId:c})}(n.getMessage()));const t=yield this.getAuthenticationCredential(e);o=this.getAuthenticationOutcome(t)}catch(e){if(!(e instanceof Error))throw e;if(e.name===Be.NotSupportedError)throw t.setInputValue($e.Unsupported),e;throw t.setInputValue(`${$e.Error}::${e.name}:${e.message}`),e}return t.setInputValue(o),e}{const e=new Error("Incorrect callbacks for WebAuthn authentication");throw e.name=Be.DataError,null==t||t.setInputValue(`${$e.Error}::${e.name}:${e.message}`),e}}))}static register(e){return We(this,void 0,void 0,(function*(){const{hiddenCallback:t,metadataCallback:r,textOutputCallback:n}=this.getCallbacks(e);if(t&&(r||n)){let o;try{let e;if(r){const t=r.getOutputValue("data");e=this.createRegistrationPublicKey(t)}else n&&(e=function(e){const t=new TextEncoder,r=_e(e.match(/attestation"{0,}:\s{0,}"(\w+)"/)),n=Number(_e(e.match(/timeout"{0,}:\s{0,}(\d+)/))),o=_e(e.match(/userVerification"{0,}:\s{0,}"(\w+)"/)),i=_e(e.match(/requireResidentKey"{0,}:\s{0,}(\w+)/)),a=_e(e.match(/authenticatorAttachment"{0,}:\s{0,}"([\w-]+)/)),s=_e(e.match(/rp"{0,}:\s{0,}{([^}]+)}/)).trim(),c=_e(s.match(/id"{0,}:\s{0,}"([^"]*)"/)),u=_e(s.match(/name"{0,}:\s{0,}"([^"]*)"/)),l=_e(e.match(/user"{0,}:\s{0,}{([^]{0,})},/)).trim(),d=_e(l.match(/id"{0,}:\s{0,}Uint8Array.from\("([^"]+)"/)),p=_e(l.match(/name"{0,}:\s{0,}"([\d\w._-]+)"/)),f=_e(l.match(/displayName"{0,}:\s{0,}"([\d\w\s.@_-]+)"/)),y=Le(_e(e.match(/pubKeyCredParams"*:\s*\[([^]+\d\s*})\s*]/)).trim());if(!y){const e=new Error("Missing pubKeyCredParams property from registration options");throw e.name=Be.DataError,e}const g=De(_e(e.match(/excludeCredentials"{0,}:\s{0,}\[([^]+)\s{0,}]/)).trim()),h=Ve(e.match(/challenge"{0,}:\s{0,}new\s{0,}(Uint|Int)8Array\(([^\)]+)/)),m=JSON.parse(h[2]),v=new Int8Array(m).buffer;return Object.assign(Object.assign({attestation:r,authenticatorSelection:Object.assign(Object.assign({userVerification:o},a&&{authenticatorAttachment:a}),"true"===i&&{requireResidentKey:!!i}),challenge:v},g.length&&{excludeCredentials:g}),{pubKeyCredParams:y,rp:Object.assign({name:u},c&&{id:c}),timeout:n,user:{displayName:f,id:t.encode(d),name:p}})}(n.getMessage()));const t=yield this.getRegistrationCredential(e);o=this.getRegistrationOutcome(t)}catch(e){if(!(e instanceof Error))throw e;if(e.name===Be.NotSupportedError)throw t.setInputValue($e.Unsupported),e;throw t.setInputValue(`${$e.Error}::${e.name}:${e.message}`),e}return t.setInputValue(o),e}{const e=new Error("Incorrect callbacks for WebAuthn registration");throw e.name=Be.DataError,null==t||t.setInputValue(`${$e.Error}::${e.name}:${e.message}`),e}}))}static getCallbacks(e){const t=this.getOutcomeCallback(e),r=this.getMetadataCallback(e),n=this.getTextOutputCallback(e),o={hiddenCallback:t};return r?o.metadataCallback=r:n&&(o.textOutputCallback=n),o}static getMetadataCallback(e){return e.getCallbacksOfType(g.MetadataCallback).find((e=>{const t=e.getOutputByName("data",void 0);return t&&t.hasOwnProperty("relyingPartyId")}))}static getOutcomeCallback(e){return e.getCallbacksOfType(g.HiddenValueCallback).find((e=>"webAuthnOutcome"===e.getOutputByName("id","")))}static getTextOutputCallback(e){return e.getCallbacksOfType(g.TextOutputCallback).find((e=>{const t=e.getOutputByName("message",void 0);return t&&t.includes("webAuthnOutcome")}))}static getAuthenticationCredential(e){return We(this,void 0,void 0,(function*(){if(!window.PublicKeyCredential){const e=new Error("PublicKeyCredential not supported by this browser");throw e.name=Be.NotSupportedError,e}return yield navigator.credentials.get({publicKey:e})}))}static getAuthenticationOutcome(e){if(null===e){const e=new Error("No credential generated from authentication");throw e.name=Be.UnknownError,e}try{const t=Fe(e.response.clientDataJSON),r=e.response,n=new Int8Array(r.authenticatorData).toString(),o=new Int8Array(r.signature).toString(),i=Fe(e.response.userHandle);let a=`${t}::${n}::${o}::${e.id}`;return i&&(a=`${a}::${i}`),a}catch(e){const t=new Error("Transforming credential object to string failed");throw t.name=Be.EncodingError,t}}static getRegistrationCredential(e){return We(this,void 0,void 0,(function*(){if(!window.PublicKeyCredential){const e=new Error("PublicKeyCredential not supported by this browser");throw e.name=Be.NotSupportedError,e}return yield navigator.credentials.create({publicKey:e})}))}static getRegistrationOutcome(e){if(null===e){const e=new Error("No credential generated from registration");throw e.name=Be.UnknownError,e}try{const t=Fe(e.response.clientDataJSON),r=e.response;return`${t}::${new Int8Array(r.attestationObject).toString()}::${e.id}`}catch(e){const t=new Error("Transforming credential object to string failed");throw t.name=Be.EncodingError,t}}static createAuthenticationPublicKey(e){const{acceptableCredentials:t,allowCredentials:r,challenge:n,relyingPartyId:o,timeout:i,userVerification:a}=e,s=qe(o),c=De(r||t||"");return Object.assign(Object.assign(Object.assign({challenge:Uint8Array.from(atob(n),(e=>e.charCodeAt(0))).buffer,timeout:i},c&&{allowCredentials:c}),a&&{userVerification:a}),s&&{rpId:s})}static createRegistrationPublicKey(e){const{pubKeyCredParams:t}=e,r=Le(t);if(!r){const e=new Error("Missing pubKeyCredParams property from registration options");throw e.name=Be.DataError,e}const n=De(e.excludeCredentials),{attestationPreference:o,authenticatorSelection:i,challenge:a,relyingPartyId:s,relyingPartyName:c,timeout:u,userId:l,userName:d,displayName:p}=e,f=qe(s),y=Object.assign({name:c},f&&{id:f});return Object.assign(Object.assign({attestation:o,authenticatorSelection:JSON.parse(i),challenge:Uint8Array.from(atob(a),(e=>e.charCodeAt(0))).buffer},n.length&&{excludeCredentials:n}),{pubKeyCredParams:r,rp:y,timeout:u,user:{displayName:p||d,id:Int8Array.from(l.split("").map((e=>e.charCodeAt(0)))),name:d}})}};var Ke=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};function Je(e){const t=new URL(e).searchParams.get("authIndexValue")||"",r=new DOMParser,n=decodeURIComponent(t),o=r.parseFromString(n,"application/xml").querySelector("Value");return o?o.innerHTML:""}var Ge=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))};const Qe=class extends h{static request(e){return Ge(this,void 0,void 0,(function*(){let r,n=yield this._request(e,!1),i=!1;if(function(e,t){return"function"==typeof t?t(e):401===e.status}(n,e.requiresNewToken)&&(n=yield this._request(e,!0)),e.authorization&&e.authorization.handleStep&&(n.redirected&&function(e){return(e.headers.get("Content-Type")||"").includes("html")&&e.url.includes("composite_advice")}(n)?(i=!0,r=function(e){const t={};return e.url.includes("AuthenticateToServiceConditionAdvice")?t.AuthenticateToServiceConditionAdvice=[Je(e.url)]:t.TransactionConditionAdvice=[Je(e.url)],{resource:"",actions:{},attributes:{},advices:t,ttl:0}}(n)):(yield function(e){return Ke(this,void 0,void 0,(function*(){const t=e.clone();return!!(yield t.json()).advices}))}(n))&&(r=yield function(e){return Ke(this,void 0,void 0,(function*(){return yield e.json()}))}(n)),r&&r.advices)){const{middleware:s,realmPath:p,serverConfig:f}=t.get(e.authorization.config),y=function(e,t,r,n,o){const i=e.advices&&e.advices.AuthenticateToServiceConditionAdvice,a=e.advices&&e.advices.TransactionConditionAdvice;let s="",d="";i?(s=i.reduce(((e,t)=>`${t}${e?` ${e}`:e}`),""),d="AuthenticateToServiceConditionAdvice"):a&&(s=a.reduce(((e,t)=>`${t}${e?` ${e}`:e}`),""),d="TransactionConditionAdvice");const p=`<Advices><AttributeValuePair><Attribute name="${d}"/><Value>${s}</Value></AttributeValuePair></Advices>`,f=c("authenticate",n,o),y={authIndexType:"composite_advice",authIndexValue:p};return{init:{method:"POST",credentials:"include",headers:new Headers({"Accept-API-Version":"resource=2.0, protocol=1.0"})},timeout:r,url:u(t,`${f}?${l(y)}`)}}(r,f.baseUrl,e.timeout,p,f.paths),g=new URL(y.url),h=g.searchParams.get("authIndexType"),m=g.searchParams.get("authIndexValue"),v=d({url:new URL(y.url),init:y.init},{type:o.StartAuthenticate,payload:{type:h,tree:m}}),{url:b,init:w}=v(s);y.url=b.toString(),y.init=w;const A=yield this._request(y,!1);if(!(yield function(e){return Ke(this,void 0,void 0,(function*(){const t=e.clone();return!!(yield t.json()).callbacks}))}(A)))throw new Error('Error: Initial response from auth server not a "step".');if(!((a=r).advices&&a.advices.AuthenticateToServiceConditionAdvice?Array.isArray(a.advices.AuthenticateToServiceConditionAdvice)&&a.advices.AuthenticateToServiceConditionAdvice.length>0:a.advices&&a.advices.TransactionConditionAdvice&&Array.isArray(a.advices.TransactionConditionAdvice)&&a.advices.TransactionConditionAdvice.length>0))throw new Error("Error: Transactional or Service Advice is empty.");let O;yield this.stepIterator(A,e.authorization.handleStep,h,m);try{O=yield ge.get()}catch(e){}i?e.url=function(e,t,r){const n=new URL(e);if(t.TransactionConditionAdvice){const e=t.TransactionConditionAdvice[0];n.searchParams.append("_txid",e)}return r&&r.idToken&&n.searchParams.append("_idtoken",r.idToken),n.toString()}(e.url,r.advices,O):e.init.headers=function(e,t,r){const n=new Headers(e.headers);return t.AuthenticateToServiceConditionAdvice?n.set("x-tree",t.AuthenticateToServiceConditionAdvice[0]):t.TransactionConditionAdvice&&n.set("x-txid",t.TransactionConditionAdvice[0]),r&&r.idToken&&n.set("x-idtoken",r.idToken),n}(e.init,r.advices,O),n=yield this._request(e,!1)}var a;return n}))}static setAuthHeaders(e,t){return Ge(this,void 0,void 0,(function*(){let r;try{r=yield ge.get()}catch(e){}return r&&r.accessToken&&(r=yield Ne.getTokens({forceRenew:t}),r&&r.accessToken&&e.set("Authorization",`Bearer ${r.accessToken}`)),e}))}static stepIterator(e,t,r,n){return Ge(this,void 0,void 0,(function*(){const o=yield e.json(),i=new W(o);return new Promise(((e,o)=>Ge(this,void 0,void 0,(function*(){!function i(a){return Ge(this,void 0,void 0,(function*(){const s=yield t(a),c=yield J.next(s,{type:r,tree:n});c.type===O.LoginSuccess?e():c.type===O.LoginFailure?o("Authentication tree failure."):i(c)}))}(i)}))))}))}static _request(e,t){return Ge(this,void 0,void 0,(function*(){const{url:r,init:n,timeout:o}=e;let i,s=new Headers(n.headers||{});e.bypassAuthentication||(s=yield this.setAuthHeaders(s,t)),n.headers=s;try{i=yield a(fetch(r,n),o)}catch(e){i=yield a(fetch(r,{method:"GET"}),o)}return i}))}};const Xe=class{constructor(){this.promise=new Promise(((e,t)=>{this.reject=t,this.resolve=e}))}};const Ye=class{constructor(e=!1){this.storage=e?window.localStorage:window.sessionStorage}get(e){const t=this.storage.getItem(e);if(t)return JSON.parse(t)}set(e,t){this.storage.setItem(e,JSON.stringify(t))}remove(e){this.storage.removeItem(e)}}})(),n})()}));
//# sourceMappingURL=index.js.map