!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("forgerock",[],e):"object"==typeof exports?exports.forgerock=e():t.forgerock=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=37)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.payload=t}return t.prototype.getType=function(){return this.payload.type},t.prototype.getInputValue=function(t){return void 0===t&&(t=0),this.getArrayElement(this.payload.input,t).value},t.prototype.setInputValue=function(t,e){void 0===e&&(e=0),this.getArrayElement(this.payload.input,e).value=t},t.prototype.getOutputValue=function(t){return void 0===t&&(t=0),this.getArrayElement(this.payload.output,t).value},t.prototype.getOutputByName=function(t,e){var n=this.payload.output.find((function(e){return e.name===t}));return n?n.value:e},t.prototype.getArrayElement=function(t,e){if(void 0===e&&(e=0),void 0===t)throw new Error("No NameValue array was provided to search (selector "+e+")");if("number"==typeof e){if(e<0||e>t.length-1)throw new Error("Selector index "+e+" is out of range");return t[e]}if("string"==typeof e){var n=t.find((function(t){return t.name===e}));if(!n)throw new Error('Missing callback input entry "'+e+'"');return n}throw new Error("Invalid selector value type")},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(38);e.DEFAULT_TIMEOUT=o.DEFAULT_TIMEOUT;var i=function(){function t(){}return t.set=function(t){if(!this.isValid(t))throw new Error("Configuration is invalid");t.serverConfig&&this.validateServerConfig(t.serverConfig),this.options=r({},t)},t.get=function(t){if(!this.options&&!t)throw new Error("Configuration has not been set");var e=r(r({},this.options),t);if(!e.serverConfig||!e.serverConfig.baseUrl)throw new Error("Server configuration has not been set");return e},t.isValid=function(t){return!(!t||!t.serverConfig)},t.validateServerConfig=function(t){t.timeout||(t.timeout=o.DEFAULT_TIMEOUT);var e=t.baseUrl;e&&"/"!==e.charAt(e.length-1)&&(t.baseUrl=e+"/")},t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.withTimeout=function(t,e){void 0===e&&(e=r.DEFAULT_TIMEOUT);var n=e||r.DEFAULT_TIMEOUT;return Promise.race([t,new Promise((function(t,e){return window.setTimeout((function(){return e(new Error("Timeout"))}),n)}))])}},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,u=i.length;a<u;a++,o++)r[o]=i[a];return r};function o(t){var e="http:"===t.protocol&&-1===["","80"].indexOf(t.port)||"https:"===t.protocol&&-1===["","443"].indexOf(t.port)?":"+t.port:"";return t.protocol+"//"+t.hostname+e}Object.defineProperty(e,"__esModule",{value:!0}),e.getBaseUrl=o,e.resolve=function(t,e){var n=new URL(t);if(e.startsWith("/"))return""+o(n)+e;var i=n.pathname.split("/"),a=e.split("/").filter((function(t){return!!t})),u=r(i.slice(0,-1),a).join("/");return""+o(n)+u},e.parseQuery=function(t){var e=new URL(t),n={};return e.searchParams.forEach((function(t,e){return n[e]=t})),n},e.stringify=function(t){var e=[];for(var n in t)t[n]&&e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.LoginFailure="LoginFailure",t.LoginSuccess="LoginSuccess",t.Step="Step"}(r||(r={})),e.StepType=r},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(1)),u=i(n(8)),c=n(34),s=i(n(9)),l=n(6),f=n(2),p=n(3),d=n(46);e.ResponseType=d.ResponseType;var h=function(){function t(){}return t.getAuthorizeUrl=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i,u,c,l,f,p=this;return o(this,(function(o){switch(o.label){case 0:return e=a.default.get(t),n=e.serverConfig,r=e.clientId,i=e.redirectUri,u=e.scope,c={client_id:r,redirect_uri:i,response_type:t.responseType,scope:u,state:t.state},t.verifier?[4,s.default.createChallenge(t.verifier)]:[3,2];case 1:l=o.sent(),c.code_challenge=l,c.code_challenge_method="S256",o.label=2;case 2:return f=this.getUrl("authorize",c,t),[2,new Promise((function(t,e){var r,o=document.createElement("iframe"),i=function(){},a=i,u=0;r=function(){window.clearTimeout(u),o.removeEventListener("load",a),o.remove()},a=function(){if(o.contentWindow){var e=o.contentWindow.location.href;p.containsAuthCode(e)&&(r(),t(e))}},u=window.setTimeout((function(){r(),e("Timeout")}),n.timeout),o.style.display="none",o.addEventListener("load",a),document.body.appendChild(o),o.src=f}))]}}))}))},t.getOAuth2Tokens=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i,u,c,s,l,f,d;return o(this,(function(o){switch(o.label){case 0:return e=a.default.get(t),n=e.clientId,r=e.redirectUri,i={client_id:n,code:t.authorizationCode,grant_type:"authorization_code",redirect_uri:r},t.verifier&&(i.code_verifier=t.verifier),u=p.stringify(i),c={body:u,headers:{"content-length":u.length.toString(),"content-type":"application/x-www-form-urlencoded"},method:"POST"},[4,this.request("access_token",void 0,!1,c,t)];case 1:return s=o.sent(),[4,this.getBody(s)];case 2:if(l=o.sent(),200!==s.status)throw f="string"==typeof l?"Expected 200, received "+s.status:this.parseError(l),new Error(f);if(!(d=l).access_token)throw new Error("Access token not found in response");return[2,{accessToken:d.access_token,idToken:d.id_token,refreshToken:d.refresh_token}]}}))}))},t.getUserInfo=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.request("userinfo",void 0,!0,void 0,t)];case 1:if(200!==(e=n.sent()).status)throw new Error("Failed to get user info; received "+e.status);return[4,e.json()];case 2:return[2,n.sent()]}}))}))},t.endSession=function(t){return r(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(o){switch(o.label){case 0:return[4,u.default.get()];case 1:return e=o.sent().idToken,n={},e&&(n.id_token_hint=e),[4,this.request("connect/endSession",n,!0,void 0,t)];case 2:if(r=o.sent(),!c.isOkOr4xx(r))throw new Error("Failed to end session; received "+r.status);return[2]}}))}))},t.revokeToken=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i;return o(this,(function(o){switch(o.label){case 0:return e=a.default.get(t).clientId,[4,u.default.get()];case 1:return n=o.sent().accessToken,r={body:p.stringify({client_id:e,token:n}),credentials:"include",headers:{"content-type":"application/x-www-form-urlencoded"},method:"POST"},[4,this.request("token/revoke",void 0,!1,r,t)];case 2:if(i=o.sent(),!c.isOkOr4xx(i))throw new Error("Failed to revoke token; received "+i.status);return[2]}}))}))},t.request=function(t,e,n,i,c){return r(this,void 0,void 0,(function(){var r,s,l;return o(this,(function(o){switch(o.label){case 0:return r=a.default.get(c).serverConfig,s=this.getUrl(t,e,c),i=i||{},n?[4,u.default.get()]:[3,2];case 1:l=o.sent().accessToken,i.credentials="include",i.headers=i.headers||new Headers,i.headers.set("authorization","Bearer "+l),o.label=2;case 2:return[4,f.withTimeout(fetch(s,i),r.timeout)];case 3:return[2,o.sent()]}}))}))},t.containsAuthCode=function(t){return!!t&&/code=([^&]+)/.test(t)},t.getBody=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=t.headers.get("content-type"))&&e.indexOf("application/json")>-1?[4,t.json()]:[3,2];case 1:return[2,n.sent()];case 2:return[4,t.text()];case 3:return[2,n.sent()]}}))}))},t.parseError=function(t){if(t){if(t.error&&t.error_description)return t.error+": "+t.error_description;if(t.code&&t.message)return t.code+": "+t.message}},t.getUrl=function(t,e,n){var r=a.default.get(n),o=r.realmPath,i=r.serverConfig,u=l.getRealmUrlPath(o),c=p.resolve(i.baseUrl,"oauth2/"+u+"/"+t);return e&&(c+="?"+p.stringify(e)),c},t}();e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRealmUrlPath=function(t){var e=(t||"").split("/").map((function(t){return t.trim()})).filter((function(t){return""!==t}));return"root"!==e[0]&&e.unshift("root"),e.map((function(t){return"realms/"+t})).join("/")}},function(t,e,n){"use strict";var r,o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.BadRequest="BAD_REQUEST",t.Timeout="TIMEOUT",t.Unauthorized="UNAUTHORIZED",t.Unknown="UNKNOWN"}(r||(r={})),e.ErrorCode=r,function(t){t.BooleanAttributeInputCallback="BooleanAttributeInputCallback",t.ChoiceCallback="ChoiceCallback",t.ConfirmationCallback="ConfirmationCallback",t.HiddenValueCallback="HiddenValueCallback",t.KbaCreateCallback="KbaCreateCallback",t.MetadataCallback="MetadataCallback",t.NameCallback="NameCallback",t.PasswordCallback="PasswordCallback",t.PollingWaitCallback="PollingWaitCallback",t.ReCaptchaCallback="ReCaptchaCallback",t.StringAttributeInputCallback="StringAttributeInputCallback",t.TermsAndConditionsCallback="TermsAndConditionsCallback",t.TextOutputCallback="TextOutputCallback",t.ValidatedCreatePasswordCallback="ValidatedCreatePasswordCallback",t.ValidatedCreateUsernameCallback="ValidatedCreateUsernameCallback"}(o||(o={})),e.CallbackType=o},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(1)),u=n(45),c=function(){function t(){}return t.get=function(){return r(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){return t=this.getClientId(),[2,new Promise((function(n,r){var o=function(){return r()},i=window.indexedDB.open(u.DB_NAME);i.onsuccess=function(){if(!i.result.objectStoreNames.contains(t))return i.result.close(),n(void 0);var r=i.result.transaction(t,"readonly").objectStore(t).get(u.TOKEN_KEY);r.onsuccess=function(t){var r=e.getResult(t);i.result.close(),n(r)},r.onerror=o},i.onupgradeneeded=function(){i.result.close(),n(void 0)},i.onerror=o}))]}))}))},t.set=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){return e=this.getClientId(),[2,new Promise((function(n,r){var o=window.indexedDB.open(u.DB_NAME),i=function(){o.result.close(),n()},a=function(){return r()},c=function(){o.result.createObjectStore(e)},s=function(){if(!o.result.objectStoreNames.contains(e)){var n=o.result.version+1;return o.result.close(),(o=window.indexedDB.open(u.DB_NAME,n)).onupgradeneeded=c,o.onsuccess=s,void(o.onerror=a)}var r=o.result.transaction(e,"readwrite");r.onerror=a;var l=r.objectStore(e).put(t,u.TOKEN_KEY);l.onsuccess=i,l.onerror=a};o.onupgradeneeded=c,o.onsuccess=s,o.onerror=a}))]}))}))},t.remove=function(){return r(this,void 0,void 0,(function(){var t;return o(this,(function(e){return t=this.getClientId(),[2,new Promise((function(e,n){var r=function(){return n()},o=window.indexedDB.open(u.DB_NAME);o.onsuccess=function(){if(!o.result.objectStoreNames.contains(t))return e();var n=o.result.transaction(t,"readwrite").objectStore(t).delete(u.TOKEN_KEY);n.onsuccess=function(){e()},n.onerror=r},o.onerror=r}))]}))}))},t.getClientId=function(){var t=a.default.get().clientId;if(!t)throw new Error("clientId is required to manage token storage");return t},t.getResult=function(t){if(!t||!t.target)throw new Error("Missing storage event target");return t.target.result},t}();e.default=c},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.createVerifier=function(t){void 0===t&&(t=32);var e=new Uint8Array(t);return window.crypto.getRandomValues(e),this.base64UrlEncode(e)},t.createChallenge=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.sha256(t)];case 1:return e=n.sent(),[2,this.base64UrlEncode(e)]}}))}))},t.base64UrlEncode=function(t){var e=Array.prototype.slice.call(t);return window.btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},t.sha256=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return e=(new TextEncoder).encode(t),[4,window.crypto.subtle.digest("SHA-256",e)];case 1:return n=r.sent(),[2,new Uint8Array(n)]}}))}))},t}();e.default=i},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=a(n(5)),s=u(n(8)),l=u(n(35)),f=u(n(9)),p=n(3),d=function(){function t(){}return t.getTokens=function(t){return o(this,void 0,void 0,(function(){var e,n,o,a,u,d,h,y,v,_;return i(this,(function(i){switch(i.label){case 0:if(t&&t.forceRenew)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,s.default.get()];case 2:return(e=i.sent())?[2,e]:[3,4];case 3:return n=i.sent(),console.error("Failed to retrieve stored tokens",n),[3,4];case 4:return o=f.default.createVerifier(),a=l.default()().toString(),u=r(r({},t),{responseType:c.ResponseType.Code,state:a,verifier:o}),[4,c.default.getAuthorizeUrl(u)];case 5:if(d=i.sent(),(h=p.parseQuery(d)).state!==a)throw new Error("State mismatch");if(!h.code||Array.isArray(h.code))throw new Error("Failed to acquire authorization code");return y=h.code,v=r(r({},t),{authorizationCode:y,verifier:o}),[4,c.default.getOAuth2Tokens(v)];case 6:e=i.sent(),i.label=7;case 7:return i.trys.push([7,9,,10]),[4,s.default.set(e)];case 8:return i.sent(),[3,10];case 9:return _=i.sent(),console.error("Failed to store tokens",_),[3,10];case 10:return[2,e]}}))}))},t.deleteTokens=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.default.remove()];case 1:return t.sent(),[2]}}))}))},t}();e.default=d},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=a(n(1)),c=n(12),s=n(6),l=n(2),f=n(3),p=function(){function t(){}return t.next=function(t,e){return o(this,void 0,void 0,(function(){var n,r,o,a,c,s,f,p;return i(this,(function(i){switch(i.label){case 0:return n=u.default.get(e),r=n.realmPath,o=n.serverConfig,a=n.tree,c=e?e.query:{},s=this.constructUrl(o,r,a,c),f=this.configureRequest(t),[4,l.withTimeout(fetch(s,f),o.timeout)];case 1:return p=i.sent(),[4,this.getResponseJson(p)];case 2:return[2,i.sent()]}}))}))},t.constructUrl=function(t,e,n,o){var i=s.getRealmUrlPath(e),a=n?{authIndexType:"service",authIndexValue:n}:void 0,u=r(r({},o),a),c="json/"+i+"/authenticate"+(Object.keys(u).length>0?"?"+f.stringify(u):"");return f.resolve(t.baseUrl,c)},t.configureRequest=function(t){return{body:t?JSON.stringify(t):void 0,credentials:"include",headers:{accept:"application/json","accept-api-version":"protocol=1.0,resource=2.1","content-type":"application/json","x-requested-with":c.REQUESTED_WITH},method:"POST"}},t.getResponseJson=function(t){return o(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return e=t.headers.get("content-type"),e&&e.indexOf("application/json")>-1?[4,t.json()]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=void 0,r.label=3;case 3:return[2,n]}}))}))},t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.REQUESTED_WITH="forgerock-sdk"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(39),o=function(){function t(){this.callbacks={}}return t.prototype.addEventListener=function(t,e){r.add(this.callbacks,t,e)},t.prototype.removeEventListener=function(t,e){r.remove(this.callbacks,t,e)},t.prototype.clearEventListeners=function(t){r.clear(this.callbacks,t)},t.prototype.dispatchEvent=function(t){if(this.callbacks[t.type])for(var e=0,n=this.callbacks[t.type];e<n.length;e++){(0,n[e])(t)}},t}();e.default=o},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(15)),i=n(4),a=function(){function t(t){this.payload=t,this.type=i.StepType.LoginFailure}return t.prototype.getCode=function(){return Number(this.payload.code)},t.prototype.getDetail=function(){return this.payload.detail},t.prototype.getMessage=function(){return this.payload.message},t.prototype.getProcessedMessage=function(t){return o.default.parseErrors(this.payload,t)},t.prototype.getReason=function(){return this.payload.reason},t}();e.default=a},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(16);e.PolicyKey=i.PolicyKey;var a=o(n(17)),u=function(){function t(){}return t.parseErrors=function(t,e){var n=this,r=[];return t.detail&&t.detail.failedPolicyRequirements&&t.detail.failedPolicyRequirements.map((function(t){r.push.apply(r,[{detail:t,messages:n.parseFailedPolicyRequirement(t,e)}])})),r},t.parseFailedPolicyRequirement=function(t,e){var n=this,r=[];return t.policyRequirements.map((function(o){r.push(n.parsePolicyRequirement(t.property,o,e))})),r},t.parsePolicyRequirement=function(t,e,n){void 0===n&&(n={});var o="string"==typeof e?JSON.parse(e):r({},e),u=o.policyRequirement;return(n[u]||a.default[u]||a.default[i.PolicyKey.UnknownPolicy])(t,o.params?r(r({},o.params),{policyRequirement:u}):{policyRequirement:u})},t}();e.default=u},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.CannotContainCharacters="CANNOT_CONTAIN_CHARACTERS",t.CannotContainDuplicates="CANNOT_CONTAIN_DUPLICATES",t.CannotContainOthers="CANNOT_CONTAIN_OTHERS",t.LeastCapitalLetters="AT_LEAST_X_CAPITAL_LETTERS",t.LeastNumbers="AT_LEAST_X_NUMBERS",t.MatchRegexp="MATCH_REGEXP",t.MaximumLength="MAX_LENGTH",t.MaximumNumber="MAXIMUM_NUMBER_VALUE",t.MinimumLength="MIN_LENGTH",t.MinimumNumber="MINIMUM_NUMBER_VALUE",t.Required="REQUIRED",t.Unique="UNIQUE",t.UnknownPolicy="UNKNOWN_POLICY",t.ValidArrayItems="VALID_ARRAY_ITEMS",t.ValidDate="VALID_DATE",t.ValidEmailAddress="VALID_EMAIL_ADDRESS_FORMAT",t.ValidNameFormat="VALID_NAME_FORMAT",t.ValidNumber="VALID_NUMBER",t.ValidPhoneFormat="VALID_PHONE_FORMAT",t.ValidQueryFilter="VALID_QUERY_FILTER",t.ValidType="VALID_TYPE"}(r||(r={})),e.PolicyKey=r},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0});var o=n(41),i=n(16),a=n(42),u=((r={})[i.PolicyKey.CannotContainCharacters]=function(t,e){return t+' must not contain following characters: "'+a.getProp(e,"forbiddenChars","")+'"'},r[i.PolicyKey.CannotContainDuplicates]=function(t,e){return t+'  must not contain duplicates: "'+a.getProp(e,"duplicateValue","")+'"'},r[i.PolicyKey.CannotContainOthers]=function(t,e){return t+' must not contain: "'+a.getProp(e,"disallowedFields","")+'"'},r[i.PolicyKey.LeastCapitalLetters]=function(t,e){var n=a.getProp(e,"numCaps",0);return t+" must contain at least "+n+" capital "+o.plural(n,"letter")},r[i.PolicyKey.LeastNumbers]=function(t,e){var n=a.getProp(e,"numNums",0);return t+" must contain at least "+n+" numeric "+o.plural(n,"value")},r[i.PolicyKey.MatchRegexp]=function(t){return t+' has failed the "MATCH_REGEXP" policy'},r[i.PolicyKey.MaximumLength]=function(t,e){var n=a.getProp(e,"maxLength",0);return t+" must be at most "+n+" "+o.plural(n,"character")},r[i.PolicyKey.MaximumNumber]=function(t){return t+' has failed the "MAXIMUM_NUMBER_VALUE" policy'},r[i.PolicyKey.MinimumLength]=function(t,e){var n=a.getProp(e,"minLength",0);return t+" must be at least "+n+" "+o.plural(n,"character")},r[i.PolicyKey.MinimumNumber]=function(t){return t+' has failed the "MINIMUM_NUMBER_VALUE" policy'},r[i.PolicyKey.Required]=function(t){return t+" is required"},r[i.PolicyKey.Unique]=function(t){return t+" must be unique"},r[i.PolicyKey.UnknownPolicy]=function(t,e){return t+': Unknown policy requirement "'+a.getProp(e,"policyRequirement","Unknown")+'"'},r[i.PolicyKey.ValidArrayItems]=function(t){return t+' has failed the "VALID_ARRAY_ITEMS" policy'},r[i.PolicyKey.ValidDate]=function(t){return t+" has an invalid date"},r[i.PolicyKey.ValidEmailAddress]=function(t){return t+" has an invalid email address"},r[i.PolicyKey.ValidNameFormat]=function(t){return t+" has an invalid name format"},r[i.PolicyKey.ValidNumber]=function(t){return t+" has an invalid number"},r[i.PolicyKey.ValidPhoneFormat]=function(t){return t+" has an invalid phone number"},r[i.PolicyKey.ValidQueryFilter]=function(t){return t+' has failed the "VALID_QUERY_FILTER" policy'},r[i.PolicyKey.ValidType]=function(t){return t+' has failed the "VALID_TYPE" policy'},r);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=function(){function t(t){this.payload=t,this.type=r.StepType.LoginSuccess}return t.prototype.getRealm=function(){return this.payload.realm},t.prototype.getSessionToken=function(){return this.payload.tokenId},t.prototype.getSuccessUrl=function(){return this.payload.successUrl},t}();e.default=o},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(43)),i=n(4),a=function(){function t(t,e){this.payload=t,this.type=i.StepType.Step,this.callbacks=[],t.callbacks&&(this.callbacks=this.convertCallbacks(t.callbacks,e))}return t.prototype.getCallbackOfType=function(t){var e=this.getCallbacksOfType(t);if(1!==e.length)throw new Error('Expected 1 callback of type "'+t+'", but found '+e.length);return e[0]},t.prototype.getCallbacksOfType=function(t){return this.callbacks.filter((function(e){return e.getType()===t}))},t.prototype.setCallbackValue=function(t,e){var n=this.getCallbacksOfType(t);if(1!==n.length)throw new Error('Expected 1 callback of type "'+t+'", but found '+n.length);n[0].setInputValue(e)},t.prototype.getDescription=function(){return this.payload.description},t.prototype.getHeader=function(){return this.payload.header},t.prototype.getStage=function(){return this.payload.stage},t.prototype.convertCallbacks=function(t,e){return t.map((function(t){return(e||o.default)(t)||o.default(t)}))},t}();e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getName=function(){return this.getOutputByName("name","")},e.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},e.prototype.isRequired=function(){return this.getOutputByName("required",!1)},e.prototype.getFailedPolicies=function(){return this.getOutputByName("failedPolicies",[])},e.prototype.getPolicies=function(){return this.getOutputByName("policies",[])},e.prototype.setValue=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},e.prototype.getDefaultChoice=function(){return this.getOutputByName("defaultChoice",0)},e.prototype.getChoices=function(){return this.getOutputByName("choices",[])},e.prototype.setChoiceIndex=function(t){var e=this.getChoices().length;if(t<0||t>e-1)throw new Error(t+" is out of bounds");this.setInputValue(t)},e.prototype.setChoiceValue=function(t){var e=this.getChoices().indexOf(t);if(-1===e)throw new Error('"'+t+'" is not a valid choice');this.setInputValue(e)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getDefaultOption=function(){return Number(this.getOutputByName("defaultOption",0))},e.prototype.getMessageType=function(){return Number(this.getOutputByName("messageType",0))},e.prototype.getOptions=function(){return this.getOutputByName("options",[])},e.prototype.getOptionType=function(){return Number(this.getOutputByName("optionType",0))},e.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},e.prototype.getPredefinedQuestions=function(){return this.getOutputByName("predefinedQuestions",[])},e.prototype.setQuestion=function(t){this.setValue("question",t)},e.prototype.setAnswer=function(t){this.setValue("answer",t)},e.prototype.setValue=function(t,e){if(!this.payload.input)throw new Error("KBA payload is missing input");var n=this.payload.input.find((function(e){return e.name.endsWith(t)}));if(!n)throw new Error('No input has name ending in "'+t+'"');n.value=e},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getData=function(){return this.getOutputByName("data",{})},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},e.prototype.setName=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getFailedPolicies=function(){return this.getOutputByName("failedPolicies",[])},e.prototype.getPolicies=function(){return this.getOutputByName("policies",[])},e.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},e.prototype.setPassword=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getMessage=function(){return this.getOutputByName("message","")},e.prototype.getWaitTime=function(){return Number(this.getOutputByName("waitTime",0))},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getSiteKey=function(){return this.getOutputByName("recaptchaSiteKey","")},e.prototype.setResult=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getTerms=function(){return this.getOutputByName("terms","")},e.prototype.getVersion=function(){return this.getOutputByName("version","")},e.prototype.getCreateDate=function(){var t=this.getOutputByName("createDate","");return new Date(t)},e.prototype.setAccepted=function(t){void 0===t&&(t=!0),this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getMessage=function(){return this.getOutputByName("message","")},e.prototype.getMessageType=function(){return this.getOutputByName("messageType","")},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getFailedPolicies=function(){return this.getOutputByName("failedPolicies",[])},e.prototype.getPolicies=function(){return this.getOutputByName("policies",[])},e.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},e.prototype.isRequired=function(){return this.getOutputByName("required",!1)},e.prototype.setPassword=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputByName("prompt","")},e.prototype.getFailedPolicies=function(){return this.getOutputByName("failedPolicies",[])},e.prototype.getPolicies=function(){return this.getOutputByName("policies",[])},e.prototype.isRequired=function(){return this.getOutputByName("required",!1)},e.prototype.setName=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isOkOr4xx=function(t){return t.ok||4===Math.floor(t.status/100)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){void 0===t&&(t=15);var e=-1,n=0;if(t<4||t>15)throw new Error("Invalid nonce length");return function(){var r=Math.pow(10,2)*+new Date;r===e?n++:(n=0,e=r);var o=(r+n).toString();return+o.substr(o.length-t)}}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(5)),i=function(){function t(){}return t.getCurrentUser=function(){return o.default.getUserInfo()},t}();e.default=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(11));e.Auth=i.default;var a=n(7);e.CallbackType=a.CallbackType,e.ErrorCode=a.ErrorCode;var u=r(n(1));e.Config=u.default;var c=r(n(13));e.Dispatcher=c.default;var s=r(n(40));e.FRAuth=s.default;var l=r(n(0));e.FRCallback=l.default;var f=r(n(20));e.AttributeInputCallback=f.default;var p=r(n(21));e.ChoiceCallback=p.default;var d=r(n(22));e.ConfirmationCallback=d.default;var h=r(n(23));e.HiddenValueCallback=h.default;var y=r(n(24));e.KbaCreateCallback=y.default;var v=r(n(25));e.MetadataCallback=v.default;var _=r(n(26));e.NameCallback=_.default;var b=r(n(27));e.PasswordCallback=b.default;var g=r(n(28));e.PollingWaitCallback=g.default;var m=r(n(29));e.ReCaptchaCallback=m.default;var w=r(n(30));e.TermsAndConditionsCallback=w.default;var O=r(n(31));e.TextOutputCallback=O.default;var P=r(n(32));e.ValidatedCreatePasswordCallback=P.default;var C=r(n(33));e.ValidatedCreateUsernameCallback=C.default;var k=n(4);e.StepType=k.StepType;var T=r(n(14));e.FRLoginFailure=T.default;var A=r(n(18));e.FRLoginSuccess=A.default;var M=r(n(19));e.FRStep=M.default;var E=o(n(15));e.FRPolicy=E.default,e.PolicyKey=E.PolicyKey;var j=r(n(17));e.defaultMessageCreator=j.default;var N=r(n(44));e.FRUser=N.default;var x=o(n(47));e.FRWebAuthn=x.default,e.WebAuthnOutcome=x.WebAuthnOutcome,e.WebAuthnStepType=x.WebAuthnStepType;var S=r(n(50));e.HttpClient=S.default;var I=o(n(5));e.OAuth2Client=I.default,e.ResponseType=I.ResponseType;var R=r(n(51));e.SessionManager=R.default;var U=r(n(10));e.TokenManager=U.default;var D=r(n(8));e.TokenStorage=D.default;var V=r(n(36));e.UserManager=V.default;var B=r(n(52));e.Deferred=B.default;var L=r(n(35));e.nonce=L.default;var K=r(n(9));e.PKCE=K.default;var F=r(n(53));e.LocalStorage=F.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DEFAULT_TIMEOUT=5e3},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.add=function(t,e,n){t[e]=t[e]||[],t[e].indexOf(n)<0&&t[e].push(n)},e.remove=function(t,e,n){if(t[e]){var r=t[e].indexOf(n);r>=0&&t[e].splice(r,1)}},e.clear=function(t,e){Object.keys(t).forEach((function(n){e&&n!==e||delete t[n]}))}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(11)),u=i(n(14)),c=i(n(18)),s=i(n(19)),l=function(){function t(){}return t.next=function(t,e){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return[4,a.default.next(t?t.payload:void 0,e)];case 1:return(n=o.sent()).tokenId?[2,new c.default(n)]:n.authId?(r=e?e.callbackFactory:void 0,[2,new s.default(n,r)]):[2,new u.default(n)]}}))}))},t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.plural=function(t,e,n){return 1===t?e:void 0!==n?n:e+"s"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getProp=function(t,e,n){return t&&void 0!==t[e]?t[e]:n}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(0)),i=n(7),a=r(n(20)),u=r(n(21)),c=r(n(22)),s=r(n(23)),l=r(n(24)),f=r(n(25)),p=r(n(26)),d=r(n(27)),h=r(n(28)),y=r(n(29)),v=r(n(30)),_=r(n(31)),b=r(n(32)),g=r(n(33));e.default=function(t){switch(t.type){case i.CallbackType.BooleanAttributeInputCallback:return new a.default(t);case i.CallbackType.ChoiceCallback:return new u.default(t);case i.CallbackType.ConfirmationCallback:return new c.default(t);case i.CallbackType.HiddenValueCallback:return new s.default(t);case i.CallbackType.KbaCreateCallback:return new l.default(t);case i.CallbackType.MetadataCallback:return new f.default(t);case i.CallbackType.NameCallback:return new p.default(t);case i.CallbackType.PasswordCallback:return new d.default(t);case i.CallbackType.PollingWaitCallback:return new h.default(t);case i.CallbackType.ReCaptchaCallback:return new y.default(t);case i.CallbackType.StringAttributeInputCallback:return new a.default(t);case i.CallbackType.TermsAndConditionsCallback:return new v.default(t);case i.CallbackType.TextOutputCallback:return new _.default(t);case i.CallbackType.ValidatedCreatePasswordCallback:return new b.default(t);case i.CallbackType.ValidatedCreateUsernameCallback:return new g.default(t);default:return new o.default(t)}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(5)),u=i(n(10)),c=i(n(36)),s=function(){function t(){}return t.login=function(t,e){return r(this,void 0,void 0,(function(){return o(this,(function(n){throw console.info(t,e),new Error("FRUser.login() not implemented")}))}))},t.loginWithUI=function(t,e){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,t.getSession(e)];case 1:return n.sent(),[4,u.default.getTokens({forceRenew:!0})];case 2:return n.sent(),[4,c.default.getCurrentUser()];case 3:return[2,n.sent()];case 4:throw n.sent(),new Error("Login failed");case 5:return[2]}}))}))},t.logout=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,a.default.endSession(t)];case 1:return e.sent(),[4,a.default.revokeToken(t)];case 2:return e.sent(),[4,u.default.deleteTokens()];case 3:return e.sent(),[3,5];case 4:throw e.sent(),new Error("Logout failed");case 5:return[2]}}))}))},t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DB_NAME="forgerock-sdk";e.TOKEN_KEY="tokens"},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Code="code",t.Token="token"}(r||(r={})),e.ResponseType=r},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(7),u=n(48);e.WebAuthnOutcome=u.WebAuthnOutcome,e.WebAuthnStepType=u.WebAuthnStepType;var c=n(49),s=function(){function t(){}return t.getWebAuthnStepType=function(t){var e=this.getOutcomeCallback(t),n=this.getMetadataCallback(t);return e&&n?n.getOutputValue("data").acceptableCredentials?u.WebAuthnStepType.Authentication:u.WebAuthnStepType.Registration:u.WebAuthnStepType.None},t.authenticate=function(t){return o(this,void 0,void 0,(function(){var e,n,r,o,a,u,c,s;return i(this,(function(i){switch(i.label){case 0:if(e=this.getCallbacks(t),n=e.hiddenCallback,r=e.metadataCallback,!n||!r)throw new Error("Invalid webauthn payload");i.label=1;case 1:return i.trys.push([1,3,,4]),a=r.getOutputValue("data"),u=this.createAuthenticationPublicKey(a),[4,this.getAuthenticationCredential(u)];case 2:return c=i.sent(),o=this.getAuthenticationOutcome(c),[3,4];case 3:return s=i.sent(),o=this.getErrorOutcome(s),[3,4];case 4:return n.setInputValue(o),[2,t]}}))}))},t.register=function(t){return o(this,void 0,void 0,(function(){var e,n,r,o,a,u,c,s;return i(this,(function(i){switch(i.label){case 0:if(e=this.getCallbacks(t),n=e.hiddenCallback,r=e.metadataCallback,!n||!r)throw new Error("Invalid webauthn payload");i.label=1;case 1:return i.trys.push([1,3,,4]),a=r.getOutputValue("data"),u=this.createRegistrationPublicKey(a),[4,this.getRegistrationCredential(u)];case 2:return c=i.sent(),o=this.getRegistrationOutcome(c),[3,4];case 3:return s=i.sent(),o=this.getErrorOutcome(s),[3,4];case 4:return n.setInputValue(o),[2,t]}}))}))},t.getCallbacks=function(t){return{hiddenCallback:this.getOutcomeCallback(t),metadataCallback:this.getMetadataCallback(t)}},t.getMetadataCallback=function(t){return t.getCallbacksOfType(a.CallbackType.MetadataCallback).find((function(t){var e=t.getOutputByName("data",void 0);return e&&e.hasOwnProperty("relyingPartyId")}))},t.getOutcomeCallback=function(t){return t.getCallbacksOfType(a.CallbackType.HiddenValueCallback).find((function(t){return"webAuthnOutcome"===t.getOutputByName("id","")}))},t.getAuthenticationCredential=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,navigator.credentials.get({publicKey:t})];case 1:return[2,e.sent()]}}))}))},t.getAuthenticationOutcome=function(t){if(!window.PublicKeyCredential)return u.WebAuthnOutcome.Unsupported;try{if(null===t)throw new Error("No credential provided");var e=c.getClientDataJson(t),n=t.response;return e+"::"+new Int8Array(n.authenticatorData).toString()+"::"+new Int8Array(n.signature).toString()+"::"+t.id}catch(t){return this.getErrorOutcome(t)}},t.getRegistrationCredential=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,navigator.credentials.create({publicKey:t})];case 1:return[2,e.sent()]}}))}))},t.getRegistrationOutcome=function(t){if(!window.PublicKeyCredential)return u.WebAuthnOutcome.Unsupported;try{if(null===t)throw new Error("No credential provided");var e=c.getClientDataJson(t),n=t.response;return e+"::"+new Int8Array(n.attestationObject).toString()+"::"+t.id}catch(t){return this.getErrorOutcome(t)}},t.createAuthenticationPublicKey=function(t){var e=t.acceptableCredentials,n=t.challenge,o=t.relyingPartyId,i=t.timeout,a=c.parseRelyingPartyId(o);return r({allowCredentials:c.parseCredentials(e),challenge:Uint8Array.from(atob(n),(function(t){return t.charCodeAt(0)})).buffer,timeout:i},a&&{rpId:a})},t.createRegistrationPublicKey=function(t){var e=t.pubKeyCredParams,n=c.parsePubKeyArray(e);if(!n)throw new Error("Missing pubKeyCredParams");var o=t.attestationPreference,i=t.authenticatorSelection,a=t.challenge,u=t.relyingPartyId,s=t.relyingPartyName,l=t.timeout,f=t.userId,p=t.userName,d=c.parseRelyingPartyId(u),h=r({name:s},d&&{id:d});return{attestation:o,authenticatorSelection:JSON.parse(i),challenge:Uint8Array.from(atob(a),(function(t){return t.charCodeAt(0)})).buffer,pubKeyCredParams:n,rp:h,timeout:l,user:{displayName:p,id:Int8Array.from(f.split("").map((function(t){return t.charCodeAt(0)}))),name:p}}},t.getErrorOutcome=function(t){var e=t.name?t.name+":":"";return u.WebAuthnOutcome.Error+"::"+e+t.message},t}();e.default=s},function(t,e,n){"use strict";var r,o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Error="ERROR",t.Unsupported="unsupported"}(r||(r={})),e.WebAuthnOutcome=r,function(t){t[t.None=0]="None",t[t.Authentication=1]="Authentication",t[t.Registration=2]="Registration"}(o||(o={})),e.WebAuthnStepType=o},function(t,e,n){"use strict";function r(t){var e=/new Int8Array\((.+)\)/.exec(t);return null===e||e.length<2?[]:JSON.parse(e[1])}Object.defineProperty(e,"__esModule",{value:!0}),e.parsePubKeyArray=function(t){if(t){if(Array.isArray(t))return t;if("string"==typeof t)return t.length>0&&"["===t[0]?JSON.parse(t):(t=t.replace(/(\w+):/g,'"$1":'),JSON.parse("["+t+"]"))}},e.parseNumberArray=r,e.parseCredentials=function(t){try{return t.split("}").filter((function(t){return!!t})).map((function(t){var e=r(t);return{id:new Int8Array(e).buffer,type:"public-key"}}))}catch(t){throw new Error("Failed to parse credentials")}},e.getClientDataJson=function(t){var e=new Uint8Array(t.response.clientDataJSON);return String.fromCharCode.apply(null,Array.from(e))},e.parseRelyingPartyId=function(t){return t.replace(/rpId: "(.+)",/,"$1")}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=u(n(13)),s=u(n(10)),l=n(2),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.request=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this._request(t,!1)];case 1:return e=n.sent(),this.newTokenRequired(e,t.requiresNewToken)?[4,this._request(t,!0)]:[3,3];case 2:e=n.sent(),n.label=3;case 3:return[2,e]}}))}))},e._request=function(t,e){return i(this,void 0,void 0,(function(){var n,r,o,i,u;return a(this,(function(a){switch(a.label){case 0:return n=t.url,r=t.init,o=t.timeout,i=new Headers(r.headers),t.bypassAuthentication?[3,2]:[4,s.default.getTokens({forceRenew:e})];case 1:u=a.sent(),i.set("authorization","Bearer "+u.accessToken),a.label=2;case 2:return r.headers=i,[4,l.withTimeout(fetch(n,r),o)];case 3:return[2,a.sent()]}}))}))},e.newTokenRequired=function(t,e){return"function"==typeof e?e(t):401===t.status},e}(c.default);e.default=f},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(1)),u=n(12),c=n(34),s=n(6),l=n(2),f=n(3),p=function(){function t(){}return t.logout=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i,p,d,h;return o(this,(function(o){switch(o.label){case 0:return e=a.default.get(t),n=e.realmPath,r=e.serverConfig,i={credentials:"include",headers:{"accept-api-version":"protocol=1.0,resource=2.0","x-requested-with":u.REQUESTED_WITH},method:"POST"},p=s.getRealmUrlPath(n),d=f.resolve(r.baseUrl,"json/"+p+"/sessions/?_action=logout"),[4,l.withTimeout(fetch(d,i),r.timeout)];case 1:if(h=o.sent(),!c.isOkOr4xx(h))throw new Error("Failed to log out; received "+h.status);return[2]}}))}))},t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this;this.promise=new Promise((function(e,n){t.reject=n,t.resolve=e}))};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){void 0===t&&(t=!1),this.storage=t?window.localStorage:window.sessionStorage}return t.prototype.get=function(t){var e=this.storage.getItem(t);if(e)return JSON.parse(e)},t.prototype.set=function(t,e){this.storage.setItem(t,JSON.stringify(e))},t.prototype.remove=function(t){this.storage.removeItem(t)},t}();e.default=r}])}));
//# sourceMappingURL=index.js.map