!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("forgerock",[],e):"object"==typeof exports?exports.forgerock=e():t.forgerock=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=31)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.payload=t}return t.prototype.getType=function(){return this.payload.type},t.prototype.getInputValue=function(t){return void 0===t&&(t=0),this.getArrayElement(this.payload.input,t).value},t.prototype.setInputValue=function(t,e){void 0===e&&(e=0),this.getArrayElement(this.payload.input,e).value=t},t.prototype.getOutputValue=function(t){return void 0===t&&(t=0),this.getArrayElement(this.payload.output,t).value},t.prototype.getOutputByName=function(t){var e=this.payload.output.find((function(e){return e.name===t}));if(!e)throw new Error('Missing callback output entry "'+t+'"');return e},t.prototype.getArrayElement=function(t,e){if(void 0===e&&(e=0),"number"==typeof e){if(e<0||e>t.length-1)throw new Error("Selector index "+e+" is out of range");return t[e]}if("string"==typeof e){var n=t.find((function(t){return t.name===e}));if(!n)throw new Error('Missing callback input entry "'+e+'"');return n}throw new Error("Invalid selector value type")},t}();e.default=r},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(38);e.DEFAULT_TIMEOUT=o.DEFAULT_TIMEOUT;var i=function(){function t(){}return t.set=function(t){if(!this.isValid(t))throw new Error("Configuration is invalid");t.serverConfig&&this.setTimeout(t.serverConfig),this.options=r({},t)},t.get=function(t){if(!this.options&&!t)throw new Error("Configuration has not been set");var e=r(r({},this.options),t);if(!e.serverConfig||!e.serverConfig.baseUrl)throw new Error("Server configuration has not been set");return e},t.isValid=function(t){return t&&t.serverConfig},t.setTimeout=function(t){t&&!t.timeout&&(t.timeout=o.DEFAULT_TIMEOUT)},t}();e.default=i},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.LoginFailure="LoginFailure",t.LoginSuccess="LoginSuccess",t.Step="Step"}(r||(r={})),e.StepType=r},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(10),u=n(4),s=i(n(1)),c=i(n(6)),l=n(44),f=i(n(7)),p=n(5),h=n(45);e.ResponseType=h.ResponseType;var d=function(){function t(){}return t.getAuthorizeUrl=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i,a,u,c,l,p=this;return o(this,(function(o){switch(o.label){case 0:return e=s.default.get(t),n=e.serverConfig,r=e.clientId,i=e.redirectUri,a=e.scope,u={client_id:r,redirect_uri:i,response_type:t.responseType,scope:a,state:t.state},t.verifier?[4,f.default.createChallenge(t.verifier)]:[3,2];case 1:c=o.sent(),u.code_challenge=c,u.code_challenge_method="S256",o.label=2;case 2:return l=this.getUrl("authorize",u,t),[2,new Promise((function(t,e){var r=document.createElement("iframe"),o=function(){if(r.contentWindow){var e=r.contentWindow.location.href;p.containsAuthCode(e)&&(i(),t(e))}},i=function(){clearTimeout(a),r.removeEventListener("load",o),r.remove()},a=setTimeout((function(){i(),e("Timeout")}),n.timeout);r.style.display="none",r.addEventListener("load",o),document.body.appendChild(r),r.src=l}))]}}))}))},t.getOAuth2Tokens=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i,u,c,l,f,p;return o(this,(function(o){switch(o.label){case 0:return e=s.default.get(t),n=e.clientId,r=e.redirectUri,i={client_id:n,code:t.authorizationCode,grant_type:"authorization_code",redirect_uri:r},t.verifier&&(i.code_verifier=t.verifier),u=a.stringify(i),c={body:u,headers:{"content-length":u.length.toString(),"content-type":"application/x-www-form-urlencoded"},method:"POST"},[4,this.request("access_token",void 0,!1,c,t)];case 1:return l=o.sent(),[4,this.getBody(l)];case 2:if(f=o.sent(),200!==l.status)throw p=this.parseError(f)||"Expected 200, received "+l.status,new Error(p);if(!f.access_token)throw new Error("Access token not found in response");return[2,{accessToken:f.access_token,idToken:f.id_token,refreshToken:f.refresh_token}]}}))}))},t.getUserInfo=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.request("userinfo",void 0,!0,void 0,t)];case 1:if(200!==(e=n.sent()).status)throw new Error("Failed to get user info; received "+e.status);return[4,e.json()];case 2:return[2,n.sent()]}}))}))},t.endSession=function(t){return r(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(o){switch(o.label){case 0:return[4,c.default.get()];case 1:return e=o.sent().idToken,n={},e&&(n.id_token_hint=e),[4,this.request("connect/endSession",n,!0,void 0,t)];case 2:if(r=o.sent(),!l.isOkOr4xx(r))throw new Error("Failed to end session; received "+r.status);return[2]}}))}))},t.revokeToken=function(t){return r(this,void 0,void 0,(function(){var e,n,r,i;return o(this,(function(o){switch(o.label){case 0:return e=s.default.get(t).clientId,[4,c.default.get()];case 1:return n=o.sent().accessToken,r={body:a.stringify({client_id:e,token:n}),credentials:"include",headers:{"content-type":"application/x-www-form-urlencoded"},method:"POST"},[4,this.request("token/revoke",void 0,!1,r,t)];case 2:if(i=o.sent(),!l.isOkOr4xx(i))throw new Error("Failed to revoke token; received "+i.status);return[2]}}))}))},t.request=function(t,e,n,i,a){return r(this,void 0,void 0,(function(){var r,u,l;return o(this,(function(o){switch(o.label){case 0:return r=s.default.get(a).serverConfig,u=this.getUrl(t,e,a),i=i||{},n?[4,c.default.get()]:[3,2];case 1:l=o.sent().accessToken,i.credentials="include",i.headers=i.headers||new Headers,i.headers.set("authorization","Bearer "+l),o.label=2;case 2:return[4,p.withTimeout(fetch(u,i),r.timeout)];case 3:return[2,o.sent()]}}))}))},t.containsAuthCode=function(t){return t&&/code=([^&]+)/.test(t)},t.getBody=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return(e=t.headers.get("content-type"))&&e.indexOf("application/json")>-1?[4,t.json()]:[3,2];case 1:return[2,n.sent()];case 2:return[4,t.text()];case 3:return[2,n.sent()]}}))}))},t.parseError=function(t){if(t){if(t.error&&t.error_description)return t.error+": "+t.error_description;if(t.code&&t.message)return t.code+": "+t.message}},t.getUrl=function(t,e,n){var r=s.default.get(n).serverConfig,o=u.resolve(r.baseUrl,"oauth2/"+t);return e&&(o+="?"+a.stringify(e)),o},t}();e.default=d},function(t,e,n){"use strict";var r=n(32),o=n(35);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=g,e.resolve=function(t,e){return g(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?g(t,!1,!0).resolveObject(e):e},e.format=function(t){o.isString(t)&&(t=g(t));return t instanceof i?t.format():i.prototype.format.call(t)},e.Url=i;var a=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),f=["%","/","?",";","#"].concat(l),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=n(10);function g(t,e,n){if(t&&o.isObject(t)&&t instanceof i)return t;var r=new i;return r.parse(t,e,n),r}i.prototype.parse=function(t,e,n){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),u=-1!==i&&i<t.indexOf("#")?"?":"#",c=t.split(u);c[0]=c[0].replace(/\\/g,"/");var g=t=c.join(u);if(g=g.trim(),!n&&1===t.split("#").length){var w=s.exec(g);if(w)return this.path=g,this.href=g,this.pathname=w[1],w[2]?(this.search=w[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var m=a.exec(g);if(m){var O=(m=m[0]).toLowerCase();this.protocol=O,g=g.substr(m.length)}if(n||m||g.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===g.substr(0,2);!k||m&&v[m]||(g=g.substr(2),this.slashes=!0)}if(!v[m]&&(k||m&&!b[m])){for(var C,j,P=-1,T=0;T<p.length;T++){-1!==(x=g.indexOf(p[T]))&&(-1===P||x<P)&&(P=x)}-1!==(j=-1===P?g.lastIndexOf("@"):g.lastIndexOf("@",P))&&(C=g.slice(0,j),g=g.slice(j+1),this.auth=decodeURIComponent(C)),P=-1;for(T=0;T<f.length;T++){var x;-1!==(x=g.indexOf(f[T]))&&(-1===P||x<P)&&(P=x)}-1===P&&(P=g.length),this.host=g.slice(0,P),g=g.slice(P),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var E=this.hostname.split(/\./),A=(T=0,E.length);T<A;T++){var S=E[T];if(S&&!S.match(h)){for(var V="",I=0,U=S.length;I<U;I++)S.charCodeAt(I)>127?V+="x":V+=S[I];if(!V.match(h)){var D=E.slice(0,T),R=E.slice(T+1),q=S.match(d);q&&(D.push(q[1]),R.unshift(q[2])),R.length&&(g="/"+R.join(".")+g),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=r.toASCII(this.hostname));var N=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+N,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==g[0]&&(g="/"+g))}if(!y[O])for(T=0,A=l.length;T<A;T++){var K=l[T];if(-1!==g.indexOf(K)){var L=encodeURIComponent(K);L===K&&(L=escape(K)),g=g.split(K).join(L)}}var B=g.indexOf("#");-1!==B&&(this.hash=g.substr(B),g=g.slice(0,B));var z=g.indexOf("?");if(-1!==z?(this.search=g.substr(z),this.query=g.substr(z+1),e&&(this.query=_.parse(this.query)),g=g.slice(0,z)):e&&(this.search="",this.query={}),g&&(this.pathname=g),b[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var H=this.search||"";this.path=N+H}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=_.stringify(this.query));var u=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||b[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),u&&"?"!==u.charAt(0)&&(u="?"+u),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(u=u.replace("#","%23"))+r},i.prototype.resolve=function(t){return this.resolveObject(g(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if(o.isString(t)){var e=new i;e.parse(t,!1,!0),t=e}for(var n=new i,r=Object.keys(this),a=0;a<r.length;a++){var u=r[a];n[u]=this[u]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),c=0;c<s.length;c++){var l=s[c];"protocol"!==l&&(n[l]=t[l])}return b[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!b[t.protocol]){for(var f=Object.keys(t),p=0;p<f.length;p++){var h=f[p];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||v[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",_=n.search||"";n.path=y+_}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),w=t.host||t.pathname&&"/"===t.pathname.charAt(0),m=w||g||n.host&&t.pathname,O=m,k=n.pathname&&n.pathname.split("/")||[],C=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!b[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===k[0]?k[0]=n.host:k.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),m=m&&(""===d[0]||""===k[0])),w)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,k=d;else if(d.length)k||(k=[]),k.pop(),k=k.concat(d),n.search=t.search,n.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(C)n.hostname=n.host=k.shift(),(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift());return n.search=t.search,n.query=t.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!k.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var j=k.slice(-1)[0],P=(n.host||t.host||k.length>1)&&("."===j||".."===j)||""===j,T=0,x=k.length;x>=0;x--)"."===(j=k[x])?k.splice(x,1):".."===j?(k.splice(x,1),T++):T&&(k.splice(x,1),T--);if(!m&&!O)for(;T--;T)k.unshift("..");!m||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),P&&"/"!==k.join("/").substr(-1)&&k.push("");var M,E=""===k[0]||k[0]&&"/"===k[0].charAt(0);C&&(n.hostname=n.host=E?"":k.length?k.shift():"",(M=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=M.shift(),n.host=n.hostname=M.shift()));return(m=m||n.host&&k.length)&&!E&&k.unshift(""),k.length?n.pathname=k.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var t=this.host,e=u.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.withTimeout=function(t,e){void 0===e&&(e=r.DEFAULT_TIMEOUT);var n=e||r.DEFAULT_TIMEOUT;return Promise.race([t,new Promise((function(t,e){return setTimeout((function(){return e(new Error("Timeout"))}),n)}))])}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(1)),u=n(43),s=function(){function t(){}return t.get=function(){return r(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){return t=this.getClientId(),[2,new Promise((function(n,r){var o=function(t){e.logError("get",t),r()},i=window.indexedDB.open(u.DB_NAME);i.onsuccess=function(){if(!i.result.objectStoreNames.contains(t))return n(void 0);var r=i.result.transaction(t,"readonly").objectStore(t).get(u.TOKEN_KEY);r.onsuccess=function(t){var r=e.getResult(t);n(r)},r.onerror=o},i.onupgradeneeded=function(){n(void 0)},i.onerror=o}))]}))}))},t.set=function(t){return r(this,void 0,void 0,(function(){var e,n=this;return o(this,(function(r){return e=this.getClientId(),[2,new Promise((function(r,o){var i=function(){r()},a=function(t){n.logError("set",t),o()},s=function(){l.result.createObjectStore(e)},c=function(){if(!l.result.objectStoreNames.contains(e)){var n=l.result.version+1;return l.result.close(),(l=window.indexedDB.open(u.DB_NAME,n)).onupgradeneeded=s,l.onsuccess=c,void(l.onerror=a)}var r=l.result.transaction(e,"readwrite");r.onerror=a;var o=r.objectStore(e),f=o.add(t,u.TOKEN_KEY);f.onsuccess=i,f.onerror=function(){var e=o.put(t,u.TOKEN_KEY);e.onsuccess=i,e.onerror=a}},l=window.indexedDB.open(u.DB_NAME);l.onupgradeneeded=s,l.onsuccess=c,l.onerror=a}))]}))}))},t.remove=function(){return r(this,void 0,void 0,(function(){var t,e=this;return o(this,(function(n){return t=this.getClientId(),[2,new Promise((function(n,r){var o=function(t){e.logError("remove",t),r()},i=window.indexedDB.open(u.DB_NAME);i.onsuccess=function(){if(!i.result.objectStoreNames.contains(t))return n();var e=i.result.transaction(t,"readwrite").objectStore(t).delete(u.TOKEN_KEY);e.onsuccess=function(){n()},e.onerror=o},i.onerror=o}))]}))}))},t.getClientId=function(){var t=a.default.get().clientId;if(!t)throw new Error("clientId is required to manage token storage");return t},t.getResult=function(t){return t.target.result},t.logError=function(t,e){var n=e.target&&e.target.error?e.target.error.message:event;console.error("TokenStorage:"+t,n)},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.createVerifier=function(t){void 0===t&&(t=32);var e=new Uint8Array(t);return window.crypto.getRandomValues(e),this.base64UrlEncode(e)},t.createChallenge=function(t){return r(this,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.sha256(t)];case 1:return e=n.sent(),[2,this.base64UrlEncode(e)]}}))}))},t.base64UrlEncode=function(t){var e=Array.prototype.slice.call(t);return window.btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},t.sha256=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return e=(new TextEncoder).encode(t),[4,window.crypto.subtle.digest("SHA-256",e)];case 1:return n=r.sent(),[2,new Uint8Array(n)]}}))}))},t}();e.default=i},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),c=a(n(3)),l=u(n(6)),f=u(n(46)),p=u(n(7)),h=function(){function t(){}return t.getTokens=function(t){return o(this,void 0,void 0,(function(){var e,n,o,a,u,h,d,y,v,b;return i(this,(function(i){switch(i.label){case 0:if(t&&t.forceRenew)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,l.default.get()];case 2:return(e=i.sent())?[2,e]:[3,4];case 3:return n=i.sent(),console.error("Failed to retrieve stored tokens",n),[3,4];case 4:return o=p.default.createVerifier(),a=f.default()().toString(),u=r(r({},t),{responseType:c.ResponseType.Code,state:a,verifier:o}),[4,c.default.getAuthorizeUrl(u)];case 5:if(h=i.sent(),(d=s.parse(h,!0)).query.state!==a)throw new Error("State mismatch");if(!d.query.code||Array.isArray(d.query.code))throw new Error("Failed to acquire authorization code");return y=d.query.code,v=r(r({},t),{authorizationCode:y,verifier:o}),[4,c.default.getOAuth2Tokens(v)];case 6:e=i.sent(),i.label=7;case 7:return i.trys.push([7,9,,10]),[4,l.default.set(e)];case 8:return i.sent(),[3,10];case 9:return b=i.sent(),console.error("Failed to store tokens",b),[3,10];case 10:return[2,e]}}))}))},t.deleteTokens=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,l.default.remove()];case 1:return t.sent(),[2]}}))}))},t}();e.default=h},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(4),u=i(n(1)),s=n(39),c=n(5),l=function(){function t(){}return t.next=function(t,e){return r(this,void 0,void 0,(function(){var n,r,i,a,s,l,f;return o(this,(function(o){switch(o.label){case 0:return n=u.default.get(e),r=n.realmPath,i=n.serverConfig,a=n.tree,s=this.constructUrl(i,r,a),l=this.configureRequest(t),[4,c.withTimeout(fetch(s,l),i.timeout)];case 1:return f=o.sent(),[4,this.getResponseJson(f)];case 2:return[2,o.sent()]}}))}))},t.constructUrl=function(t,e,n){var r="json/"+s.getRealmUrlPath(e)+"/authenticate"+(n?"?authIndexType=service&authIndexValue="+n:"");return a.resolve(t.baseUrl,r)},t.configureRequest=function(t){return{body:t?JSON.stringify(t):void 0,credentials:"include",headers:{accept:"application/json","accept-api-version":"protocol=1.0,resource=2.1","content-type":"application/json"},method:"POST"}},t.getResponseJson=function(t){return r(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return e=t.headers.get("content-type"),e&&e.indexOf("application/json")>-1?[4,t.json()]:[3,2];case 1:return n=r.sent(),[3,3];case 2:n=void 0,r.label=3;case 3:return[2,n]}}))}))},t}();e.default=l},function(t,e,n){"use strict";e.decode=e.parse=n(36),e.encode=e.stringify=n(37)},function(t,e,n){"use strict";var r,o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.BadRequest="BAD_REQUEST",t.Timeout="TIMEOUT",t.Unauthorized="UNAUTHORIZED",t.Unknown="UNKNOWN"}(r||(r={})),e.ErrorCode=r,function(t){t.BooleanAttributeInputCallback="BooleanAttributeInputCallback",t.ChoiceCallback="ChoiceCallback",t.ConfirmationCallback="ConfirmationCallback",t.HiddenValueCallback="HiddenValueCallback",t.KbaCreateCallback="KbaCreateCallback",t.MetadataCallback="MetadataCallback",t.NameCallback="NameCallback",t.PasswordCallback="PasswordCallback",t.PollingWaitCallback="PollingWaitCallback",t.ReCaptchaCallback="ReCaptchaCallback",t.StringAttributeInputCallback="StringAttributeInputCallback",t.TermsAndConditionsCallback="TermsAndConditionsCallback",t.TextOutputCallback="TextOutputCallback",t.ValidatedCreatePasswordCallback="ValidatedCreatePasswordCallback",t.ValidatedCreateUsernameCallback="ValidatedCreateUsernameCallback"}(o||(o={})),e.CallbackType=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.callbacks={}}return t.prototype.addEventListener=function(t,e){!function(t,e,n){t[e]=t[e]||[],t[e].indexOf(n)<0&&t[e].push(n)}(this.callbacks,t,e)},t.prototype.removeEventListener=function(t,e){!function(t,e,n){if(!t[e])return;var r=t[e].indexOf(n);r>=0&&t[e].splice(r,1)}(this.callbacks,t,e)},t.prototype.clearEventListeners=function(t){!function(t,e){Object.keys(t).forEach((function(n){e&&n!==e||delete t[n]}))}(this.callbacks,t)},t.prototype.dispatchEvent=function(t){if(this.callbacks[t.type])for(var e=0,n=this.callbacks[t.type];e<n.length;e++){(0,n[e])(t)}},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=function(){function t(t){this.payload=t,this.type=r.StepType.LoginFailure}return t.prototype.getCode=function(){return Number(this.payload.code)},t.prototype.getDetail=function(){return this.payload.detail},t.prototype.getMessage=function(){return this.payload.message},t.prototype.getReason=function(){return this.payload.reason},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),o=function(){function t(t){this.payload=t,this.type=r.StepType.LoginSuccess}return t.prototype.getRealm=function(){return this.payload.realm},t.prototype.getSessionToken=function(){return this.payload.tokenId},t.prototype.getSuccessUrl=function(){return this.payload.successUrl},t}();e.default=o},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(41)),i=n(2),a=function(){function t(t,e){this.payload=t,this.type=i.StepType.Step,this.callbacks=[],t.callbacks&&(this.callbacks=this.convertCallbacks(t.callbacks,e))}return t.prototype.getCallbackOfType=function(t){var e=this.getCallbacksOfType(t);if(1!==e.length)throw new Error('Expected 1 callback of type "'+t+'", but found '+e.length);return e[0]},t.prototype.getCallbacksOfType=function(t){return this.callbacks.filter((function(e){return e.getType()===t}))},t.prototype.setCallbackValue=function(t,e){var n=this.getCallbacksOfType(t);if(1!==n.length)throw new Error('Expected 1 callback of type "'+t+'", but found '+n.length);n[0].setInputValue(e)},t.prototype.getDescription=function(){return this.payload.description},t.prototype.getHeader=function(){return this.payload.header},t.prototype.getStage=function(){return this.payload.stage},t.prototype.convertCallbacks=function(t,e){return t.map((function(t){return(e||o.default)(t)||o.default(t)}))},t}();e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getName=function(){return this.getOutputValue("name")},e.prototype.getPrompt=function(){return this.getOutputValue("prompt")},e.prototype.isRequired=function(){return this.getOutputValue("required")},e.prototype.getPolicyKeys=function(){return this.getOutputValue("policies")},e.prototype.getFailedPolicyKeys=function(){return this.getOutputValue("failedPolicies")},e.prototype.setValue=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputValue("prompt")},e.prototype.getDefaultChoice=function(){return this.getOutputValue("defaultChoice")},e.prototype.getChoices=function(){return this.getOutputValue("choices")},e.prototype.setChoiceIndex=function(t){var e=this.getChoices().length;if(t<0||t>e-1)throw new Error(t+" is out of bounds");this.setInputValue(t)},e.prototype.setChoiceValue=function(t){var e=this.getChoices().indexOf(t);if(-1===e)throw new Error('"'+t+'" is not a valid choice');this.setInputValue(e)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getDefaultOption=function(){return Number(this.getOutputValue("defaultOption"))},e.prototype.getMessageType=function(){return Number(this.getOutputValue("messageType"))},e.prototype.getOptions=function(){return this.getOutputValue("options")},e.prototype.getOptionType=function(){return Number(this.getOutputValue("optionType"))},e.prototype.getPrompt=function(){return this.getOutputValue("prompt")},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputValue("prompt")},e.prototype.getPredefinedQuestions=function(){return this.getOutputValue("predefinedQuestions")},e.prototype.setQuestion=function(t){this.setValue("question",t)},e.prototype.setAnswer=function(t){this.setValue("answer",t)},e.prototype.setValue=function(t,e){var n=this.payload.input.find((function(e){return e.name.endsWith(t)}));if(!n)throw new Error('No input has name ending in "'+t+'"');n.value=e},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getData=function(){return this.getOutputValue("data")},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputValue("prompt")},e.prototype.setName=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputValue("prompt")},e.prototype.setPassword=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getMessage=function(){return this.getOutputValue("message")},e.prototype.getWaitTime=function(){return Number(this.getOutputValue("waitTime"))},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getSiteKey=function(){return this.getOutputValue("recaptchaSiteKey")},e.prototype.setResult=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getTerms=function(){return this.getOutputValue("terms")},e.prototype.getVersion=function(){return this.getOutputValue("version")},e.prototype.getCreateDate=function(){return new Date(this.getOutputValue("createDate"))},e.prototype.setAccepted=function(){this.setInputValue(!0)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getMessage=function(){return this.getOutputValue("message")},e.prototype.getMessageType=function(){return this.getOutputValue("messageType")},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputValue("prompt")},e.prototype.isRequired=function(){return this.getOutputValue("required")},e.prototype.getPolicyKeys=function(){return this.getOutputValue("policies")},e.prototype.getFailedPolicyKeys=function(){return this.getOutputValue("failedPolicies")},e.prototype.setPassword=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.payload=e,n}return o(e,t),e.prototype.getPrompt=function(){return this.getOutputValue("prompt")},e.prototype.isRequired=function(){return this.getOutputValue("required")},e.prototype.getPolicyKeys=function(){return this.getOutputValue("policies")},e.prototype.getFailedPolicyKeys=function(){return this.getOutputValue("failedPolicies")},e.prototype.setName=function(t){this.setInputValue(t)},e}(i(n(0)).default);e.default=a},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(3)),i=function(){function t(){}return t.getCurrentUser=function(){return o.default.getUserInfo()},t}();e.default=i},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(9));e.Auth=i.default;var a=n(11);e.CallbackType=a.CallbackType,e.ErrorCode=a.ErrorCode;var u=r(n(1));e.Config=u.default;var s=r(n(12));e.Dispatcher=s.default;var c=r(n(40));e.FRAuth=c.default;var l=r(n(16));e.AttributeInputCallback=l.default;var f=r(n(17));e.ChoiceCallback=f.default;var p=r(n(18));e.ConfirmationCallback=p.default;var h=r(n(19));e.HiddenValueCallback=h.default;var d=r(n(20));e.KbaCreateCallback=d.default;var y=r(n(21));e.MetadataCallback=y.default;var v=r(n(22));e.NameCallback=v.default;var b=r(n(23));e.PasswordCallback=b.default;var _=r(n(24));e.PollingWaitCallback=_.default;var g=r(n(25));e.ReCaptchaCallback=g.default;var w=r(n(26));e.TermsAndConditionsCallback=w.default;var m=r(n(27));e.TextOutputCallback=m.default;var O=r(n(28));e.ValidatedCreatePasswordCallback=O.default;var k=r(n(29));e.ValidatedCreateUsernameCallback=k.default;var C=n(2);e.StepType=C.StepType;var j=r(n(13));e.FRLoginFailure=j.default;var P=r(n(14));e.FRLoginSuccess=P.default;var T=r(n(15));e.FRStep=T.default;var x=r(n(42));e.FRUser=x.default;var M=r(n(47));e.HttpClient=M.default;var E=o(n(3));e.OAuth2Client=E.default,e.ResponseType=E.ResponseType;var A=r(n(8));e.TokenManager=A.default;var S=r(n(6));e.TokenStorage=S.default;var V=r(n(30));e.UserManager=V.default;var I=r(n(7));e.PKCE=I.default;var U=r(n(48));e.LocalStorage=U.default},function(t,e,n){(function(t,r){var o;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var u,s=2147483647,c=36,l=1,f=26,p=38,h=700,d=72,y=128,v="-",b=/^xn--/,_=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=c-l,O=Math.floor,k=String.fromCharCode;function C(t){throw new RangeError(w[t])}function j(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function P(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+j((t=t.replace(g,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(n=t.charCodeAt(o++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--):r.push(e);return r}function x(t){return j(t,(function(t){var e="";return t>65535&&(e+=k((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=k(t)})).join("")}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,n){var r=0;for(t=n?O(t/h):t>>1,t+=O(t/e);t>m*f>>1;r+=c)t=O(t/m);return O(r+(m+1)*t/(t+p))}function A(t){var e,n,r,o,i,a,u,p,h,b,_,g=[],w=t.length,m=0,k=y,j=d;for((n=t.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&C("not-basic"),g.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<w;){for(i=m,a=1,u=c;o>=w&&C("invalid-input"),((p=(_=t.charCodeAt(o++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:c)>=c||p>O((s-m)/a))&&C("overflow"),m+=p*a,!(p<(h=u<=j?l:u>=j+f?f:u-j));u+=c)a>O(s/(b=c-h))&&C("overflow"),a*=b;j=E(m-i,e=g.length+1,0==i),O(m/e)>s-k&&C("overflow"),k+=O(m/e),m%=e,g.splice(m++,0,k)}return x(g)}function S(t){var e,n,r,o,i,a,u,p,h,b,_,g,w,m,j,P=[];for(g=(t=T(t)).length,e=y,n=0,i=d,a=0;a<g;++a)(_=t[a])<128&&P.push(k(_));for(r=o=P.length,o&&P.push(v);r<g;){for(u=s,a=0;a<g;++a)(_=t[a])>=e&&_<u&&(u=_);for(u-e>O((s-n)/(w=r+1))&&C("overflow"),n+=(u-e)*w,e=u,a=0;a<g;++a)if((_=t[a])<e&&++n>s&&C("overflow"),_==e){for(p=n,h=c;!(p<(b=h<=i?l:h>=i+f?f:h-i));h+=c)j=p-b,m=c-b,P.push(k(M(b+j%m,0))),p=O(j/m);P.push(k(M(p,0))),i=E(n,w,r==o),n=0,++r}++n,++e}return P.join("")}u={version:"1.4.1",ucs2:{decode:T,encode:x},decode:A,encode:S,toASCII:function(t){return P(t,(function(t){return _.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return P(t,(function(t){return b.test(t)?A(t.slice(4).toLowerCase()):t}))}},void 0===(o=function(){return u}.call(e,n,e,t))||(t.exports=o)}()}).call(this,n(33)(t),n(34))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var u=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var c=t.length;s>0&&c>s&&(c=s);for(var l=0;l<c;++l){var f,p,h,d,y=t[l].replace(u,"%20"),v=y.indexOf(n);v>=0?(f=y.substr(0,v),p=y.substr(v+1)):(f=y,p=""),h=decodeURIComponent(f),d=decodeURIComponent(p),r(a,h)?o(a[h])?a[h].push(d):a[h]=[a[h],d]:a[h]=d}return a};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,u){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?i(a(t),(function(a){var u=encodeURIComponent(r(a))+n;return o(t[a])?i(t[a],(function(t){return u+encodeURIComponent(r(t))})).join(e):u+encodeURIComponent(r(t[a]))})).join(e):u?encodeURIComponent(r(u))+n+encodeURIComponent(r(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DEFAULT_TIMEOUT=5e3},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRealmUrlPath=function(t){var e=(t||"").split("/").map((function(t){return t.trim()})).filter((function(t){return""!==t}));return"root"!==e[0]&&e.unshift("root"),e.map((function(t){return"realms/"+t})).join("/")}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(9)),u=i(n(13)),s=i(n(14)),c=i(n(15)),l=function(){function t(){}return t.next=function(t,e){return r(this,void 0,void 0,(function(){var n,r;return o(this,(function(o){switch(o.label){case 0:return[4,a.default.next(t?t.payload:void 0,e)];case 1:return(n=o.sent()).tokenId?[2,new s.default(n)]:n.authId?(r=e?e.callbackFactory:void 0,[2,new c.default(n,r)]):[2,new u.default(n)]}}))}))},t}();e.default=l},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(0)),i=n(11),a=r(n(16)),u=r(n(17)),s=r(n(18)),c=r(n(19)),l=r(n(20)),f=r(n(21)),p=r(n(22)),h=r(n(23)),d=r(n(24)),y=r(n(25)),v=r(n(26)),b=r(n(27)),_=r(n(28)),g=r(n(29));e.default=function(t){switch(t.type){case i.CallbackType.BooleanAttributeInputCallback:return new a.default(t);case i.CallbackType.ChoiceCallback:return new u.default(t);case i.CallbackType.ConfirmationCallback:return new s.default(t);case i.CallbackType.HiddenValueCallback:return new c.default(t);case i.CallbackType.KbaCreateCallback:return new l.default(t);case i.CallbackType.MetadataCallback:return new f.default(t);case i.CallbackType.NameCallback:return new p.default(t);case i.CallbackType.PasswordCallback:return new h.default(t);case i.CallbackType.PollingWaitCallback:return new d.default(t);case i.CallbackType.ReCaptchaCallback:return new y.default(t);case i.CallbackType.StringAttributeInputCallback:return new a.default(t);case i.CallbackType.TermsAndConditionsCallback:return new v.default(t);case i.CallbackType.TextOutputCallback:return new b.default(t);case i.CallbackType.ValidatedCreatePasswordCallback:return new _.default(t);case i.CallbackType.ValidatedCreateUsernameCallback:return new g.default(t);default:return new o.default(t)}}},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(3)),u=i(n(8)),s=i(n(30)),c=function(){function t(){}return t.login=function(t,e){return r(this,void 0,void 0,(function(){return o(this,(function(n){throw console.info(t,e),new Error("FRUser.login() not implemented")}))}))},t.loginWithUI=function(t,e){return r(this,void 0,void 0,(function(){return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,t.getSession(e)];case 1:return n.sent(),[4,u.default.getTokens({forceRenew:!0})];case 2:return n.sent(),[4,s.default.getCurrentUser()];case 3:return[2,n.sent()];case 4:throw n.sent(),new Error("Login failed");case 5:return[2]}}))}))},t.logout=function(t){return r(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,a.default.endSession(t)];case 1:return e.sent(),[4,a.default.revokeToken(t)];case 2:return e.sent(),[4,u.default.deleteTokens()];case 3:return e.sent(),[3,5];case 4:throw e.sent(),new Error("Logout failed");case 5:return[2]}}))}))},t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DB_NAME="forgerock-sdk";e.TOKEN_KEY="tokens"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isOkOr4xx=function(t){return t.ok||4===Math.floor(t.status/100)}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Code="code",t.Token="token"}(r||(r={})),e.ResponseType=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){void 0===t&&(t=15);var e=-1,n=0;if(t<4||t>15)throw new Error("Invalid nonce length");return function(){var r=Math.pow(10,2)*+new Date;r===e?n++:(n=0,e=r);var o=(r+n).toString();return+o.substr(o.length-t)}}},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=u(n(12)),c=u(n(8)),l=n(5),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.request=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this._request(t,!1)];case 1:return e=n.sent(),this.newTokenRequired(e,t.requiresNewToken)?[4,this._request(t,!0)]:[3,3];case 2:e=n.sent(),n.label=3;case 3:return[2,e]}}))}))},e._request=function(t,e){return i(this,void 0,void 0,(function(){var n,r,o,i,u;return a(this,(function(a){switch(a.label){case 0:return n=t.url,r=t.init,o=t.timeout,i=new Headers(r.headers),t.bypassAuthentication?[3,2]:[4,c.default.getTokens({forceRenew:e})];case 1:u=a.sent(),i.set("authorization","Bearer "+u.accessToken),a.label=2;case 2:return r.headers=i,[4,l.withTimeout(fetch(n,r),o)];case 3:return[2,a.sent()]}}))}))},e.newTokenRequired=function(t,e){return"function"==typeof e?e(t):401===t.status},e}(s.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){void 0===t&&(t=!1),this.storage=t?window.localStorage:window.sessionStorage}return t.prototype.get=function(t){var e=this.storage.getItem(t);if(e)return JSON.parse(e)},t.prototype.set=function(t,e){this.storage.setItem(t,JSON.stringify(e))},t.prototype.remove=function(t){this.storage.removeItem(t)},t}();e.default=r}])}));
//# sourceMappingURL=index.js.map