{"version":3,"file":"widget.js","sources":["../../../packages/javascript-sdk/lib-esm/config/constants.js","../../../packages/javascript-sdk/lib-esm/config/index.js","../../../packages/javascript-sdk/lib-esm/config/enums.js","../../../packages/javascript-sdk/lib-esm/util/timeout.js","../../../packages/javascript-sdk/lib-esm/util/url.js","../../../packages/javascript-sdk/lib-esm/util/realm.js","../../../packages/javascript-sdk/lib-esm/util/middleware.js","../../../packages/javascript-sdk/lib-esm/auth/index.js","../../../packages/javascript-sdk/lib-esm/auth/enums.js","../../../packages/javascript-sdk/lib-esm/shared/constants.js","../../../packages/javascript-sdk/lib-esm/event/index.js","../../../packages/javascript-sdk/lib-esm/fr-policy/enums.js","../../../packages/javascript-sdk/lib-esm/fr-policy/message-creator.js","../../../packages/javascript-sdk/lib-esm/event/helpers.js","../../../packages/javascript-sdk/lib-esm/util/strings.js","../../../packages/javascript-sdk/lib-esm/fr-policy/helpers.js","../../../packages/javascript-sdk/lib-esm/fr-auth/enums.js","../../../packages/javascript-sdk/lib-esm/fr-policy/index.js","../../../packages/javascript-sdk/lib-esm/fr-auth/fr-login-failure.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/attribute-input-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/fr-login-success.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/index.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/choice-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/confirmation-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/device-profile-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/hidden-value-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/kba-create-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/metadata-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/name-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/password-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/polling-wait-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/recaptcha-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/redirect-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/select-idp-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/text-output-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/suspended-text-output-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/terms-and-conditions-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/validated-create-password-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/validated-create-username-callback.js","../../../packages/javascript-sdk/lib-esm/fr-auth/callbacks/factory.js","../../../packages/javascript-sdk/lib-esm/fr-auth/fr-step.js","../../../packages/javascript-sdk/lib-esm/fr-auth/index.js","../../../packages/javascript-sdk/lib-esm/fr-device/defaults.js","../../../packages/javascript-sdk/lib-esm/fr-device/collector.js","../../../packages/javascript-sdk/lib-esm/fr-device/index.js","../../../packages/javascript-sdk/lib-esm/token-storage/constants.js","../../../packages/javascript-sdk/lib-esm/token-storage/indexed-db.js","../../../packages/javascript-sdk/lib-esm/token-storage/local-storage.js","../../../packages/javascript-sdk/lib-esm/token-storage/session-storage.js","../../../packages/javascript-sdk/lib-esm/token-storage/index.js","../../../packages/javascript-sdk/lib-esm/util/http.js","../../../packages/javascript-sdk/lib-esm/util/pkce.js","../../../packages/javascript-sdk/lib-esm/oauth2-client/enums.js","../../../packages/javascript-sdk/lib-esm/oauth2-client/index.js","../../../packages/javascript-sdk/lib-esm/session-manager/index.js","../../../packages/javascript-sdk/lib-esm/token-manager/index.js","../../../packages/javascript-sdk/lib-esm/fr-webauthn/enums.js","../../../packages/javascript-sdk/lib-esm/token-manager/helpers.js","../../../packages/javascript-sdk/lib-esm/user-manager/index.js","../../../packages/javascript-sdk/lib-esm/fr-user/index.js","../../../packages/javascript-sdk/lib-esm/fr-webauthn/script-parser.js","../../../packages/javascript-sdk/lib-esm/http-client/helpers.js","../../../packages/javascript-sdk/lib-esm/http-client/index.js","../../../node_modules/svelte/internal/index.mjs","../src/lib/components/journey/password.svelte","../src/lib/components/journey/text.svelte","../src/lib/components/journey/form.svelte","../src/lib/components/icons/key-icon.svelte","../../../node_modules/svelte/store/index.mjs","../src/lib/widget.store.js","../src/lib/widget.svelte","../src/lib/main.ts"],"sourcesContent":["/*\n * @forgerock/javascript-sdk\n *\n * constants.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/** @hidden */\nvar DEFAULT_TIMEOUT = 60 * 1000;\nvar DEFAULT_OAUTH_THRESHOLD = 30 * 1000;\nexport { DEFAULT_TIMEOUT, DEFAULT_OAUTH_THRESHOLD };\n//# sourceMappingURL=constants.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { DEFAULT_TIMEOUT, DEFAULT_OAUTH_THRESHOLD } from './constants';\n/**\n * Sets defaults for options that are required but have no supplied value\n * @param options The options to set defaults for\n * @returns options The options with defaults\n */\nfunction setDefaults(options) {\n    return __assign(__assign({}, options), { oauthThreshold: options.oauthThreshold || DEFAULT_OAUTH_THRESHOLD });\n}\n/**\n * Utility for merging configuration defaults with one-off options.\n *\n * Example:\n *\n * ```js\n * // Establish configuration defaults\n * Config.set({\n *   clientId: 'myApp',\n *   serverConfig: { baseUrl: 'https://openam-domain.com/am' },\n *   tree: 'UsernamePassword'\n * });\n *\n * // Specify overrides as needed\n * const configOverrides = { tree: 'PasswordlessWebAuthn' };\n * const step = await FRAuth.next(undefined, configOverrides);\n */\nvar Config = /** @class */ (function () {\n    function Config() {\n    }\n    /**\n     * Sets the default options.\n     *\n     * @param options The options to use as defaults\n     */\n    Config.set = function (options) {\n        if (!this.isValid(options)) {\n            throw new Error('Configuration is invalid');\n        }\n        if (options.serverConfig) {\n            this.validateServerConfig(options.serverConfig);\n        }\n        this.options = __assign({}, setDefaults(options));\n    };\n    /**\n     * Merges the provided options with the default options.  Ensures a server configuration exists.\n     *\n     * @param options The options to merge with defaults\n     */\n    Config.get = function (options) {\n        if (!this.options && !options) {\n            throw new Error('Configuration has not been set');\n        }\n        var merged = __assign(__assign({}, this.options), options);\n        if (!merged.serverConfig || !merged.serverConfig.baseUrl) {\n            throw new Error('Server configuration has not been set');\n        }\n        return merged;\n    };\n    Config.isValid = function (options) {\n        return !!(options && options.serverConfig);\n    };\n    Config.validateServerConfig = function (serverConfig) {\n        if (!serverConfig.timeout) {\n            serverConfig.timeout = DEFAULT_TIMEOUT;\n        }\n        var url = serverConfig.baseUrl;\n        if (url && url.charAt(url.length - 1) !== '/') {\n            serverConfig.baseUrl = url + '/';\n        }\n    };\n    return Config;\n}());\nexport default Config;\nexport { DEFAULT_TIMEOUT };\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * enums.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nexport var ActionTypes;\n(function (ActionTypes) {\n    ActionTypes[\"Authenticate\"] = \"AUTHENTICATE\";\n    ActionTypes[\"Authorize\"] = \"AUTHORIZE\";\n    ActionTypes[\"EndSession\"] = \"END_SESSION\";\n    ActionTypes[\"Logout\"] = \"LOGOUT\";\n    ActionTypes[\"ExchangeToken\"] = \"EXCHANGE_TOKEN\";\n    ActionTypes[\"RefreshToken\"] = \"REFRESH_TOKEN\";\n    ActionTypes[\"ResumeAuthenticate\"] = \"RESUME_AUTHENTICATE\";\n    ActionTypes[\"RevokeToken\"] = \"REVOKE_TOKEN\";\n    ActionTypes[\"StartAuthenticate\"] = \"START_AUTHENTICATE\";\n    ActionTypes[\"UserInfo\"] = \"USER_INFO\";\n})(ActionTypes || (ActionTypes = {}));\n//# sourceMappingURL=enums.js.map","/*\n * @forgerock/javascript-sdk\n *\n * timeout.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nimport { DEFAULT_TIMEOUT } from '../config';\n/**\n * @module\n * @ignore\n * These are private utility functions\n */\nfunction withTimeout(promise, timeout) {\n    if (timeout === void 0) { timeout = DEFAULT_TIMEOUT; }\n    var effectiveTimeout = timeout || DEFAULT_TIMEOUT;\n    var timeoutP = new Promise(function (_, reject) {\n        return window.setTimeout(function () { return reject(new Error('Timeout')); }, effectiveTimeout);\n    });\n    return Promise.race([promise, timeoutP]);\n}\nexport { withTimeout };\n//# sourceMappingURL=timeout.js.map","/*\n * @forgerock/javascript-sdk\n *\n * url.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { getRealmUrlPath } from '../util/realm';\n/**\n * Returns the base URL including protocol, hostname and any non-standard port.\n * The returned URL does not include a trailing slash.\n */\nfunction getBaseUrl(url) {\n    var isNonStandardPort = (url.protocol === 'http:' && ['', '80'].indexOf(url.port) === -1) ||\n        (url.protocol === 'https:' && ['', '443'].indexOf(url.port) === -1);\n    var port = isNonStandardPort ? \":\".concat(url.port) : '';\n    var baseUrl = \"\".concat(url.protocol, \"//\").concat(url.hostname).concat(port);\n    return baseUrl;\n}\nfunction getEndpointPath(endpoint, realmPath, customPaths) {\n    var realmUrlPath = getRealmUrlPath(realmPath);\n    var defaultPaths = {\n        authenticate: \"json/\".concat(realmUrlPath, \"/authenticate\"),\n        authorize: \"oauth2/\".concat(realmUrlPath, \"/authorize\"),\n        accessToken: \"oauth2/\".concat(realmUrlPath, \"/access_token\"),\n        endSession: \"oauth2/\".concat(realmUrlPath, \"/connect/endSession\"),\n        userInfo: \"oauth2/\".concat(realmUrlPath, \"/userinfo\"),\n        revoke: \"oauth2/\".concat(realmUrlPath, \"/token/revoke\"),\n        sessions: \"json/\".concat(realmUrlPath, \"/sessions/\"),\n    };\n    if (customPaths && customPaths[endpoint]) {\n        // TypeScript is not correctly reading the condition above\n        // It's thinking that customPaths[endpoint] may result in undefined\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        return customPaths[endpoint];\n    }\n    else {\n        return defaultPaths[endpoint];\n    }\n}\nfunction resolve(baseUrl, path) {\n    var url = new URL(baseUrl);\n    if (path.startsWith('/')) {\n        return \"\".concat(getBaseUrl(url)).concat(path);\n    }\n    var basePath = url.pathname.split('/');\n    var destPath = path.split('/').filter(function (x) { return !!x; });\n    var newPath = __spreadArray(__spreadArray([], basePath.slice(0, -1), true), destPath, true).join('/');\n    return \"\".concat(getBaseUrl(url)).concat(newPath);\n}\nfunction parseQuery(fullUrl) {\n    var url = new URL(fullUrl);\n    var query = {};\n    url.searchParams.forEach(function (v, k) { return (query[k] = v); });\n    return query;\n}\nfunction stringify(data) {\n    var pairs = [];\n    for (var k in data) {\n        if (data[k]) {\n            pairs.push(k + '=' + encodeURIComponent(data[k]));\n        }\n    }\n    return pairs.join('&');\n}\nexport { getBaseUrl, getEndpointPath, parseQuery, resolve, stringify };\n//# sourceMappingURL=url.js.map","/*\n * @forgerock/javascript-sdk\n *\n * realm.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/** @hidden */\nfunction getRealmUrlPath(realmPath) {\n    // Split the path and scrub segments\n    var names = (realmPath || '')\n        .split('/')\n        .map(function (x) { return x.trim(); })\n        .filter(function (x) { return x !== ''; });\n    // Ensure 'root' is the first realm\n    if (names[0] !== 'root') {\n        names.unshift('root');\n    }\n    // Concatenate into a URL path\n    var urlPath = names.map(function (x) { return \"realms/\".concat(x); }).join('/');\n    return urlPath;\n}\nexport { getRealmUrlPath };\n//# sourceMappingURL=realm.js.map","/*\n * @forgerock/javascript-sdk\n *\n * middleware.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * @function middlewareWrapper - A \"Node\" and \"Redux\" style middleware that is called just before\n * the request is made from the SDK. This allows you access to the request for modification.\n * @param request - A request object container of the URL and the Request Init object\n * @param action - The action object that is passed into the middleware communicating intent\n * @param action.type - A \"Redux\" style type that contains the serialized action\n * @param action.payload - The payload of the action that can contain metadata\n * @returns {function} - Function that takes middleware parameter & runs middleware against request\n */\nfunction middlewareWrapper(request, \n// eslint-disable-next-line\n_a) {\n    var type = _a.type, payload = _a.payload;\n    // no mutation and no reassignment\n    var actionCopy = Object.freeze({ type: type, payload: payload });\n    return function (middleware) {\n        if (!Array.isArray(middleware)) {\n            return request;\n        }\n        // Copy middleware so the `shift` below doesn't mutate source\n        var mwareCopy = middleware.map(function (fn) { return fn; });\n        function iterator() {\n            var nextMiddlewareToBeCalled = mwareCopy.shift();\n            nextMiddlewareToBeCalled && nextMiddlewareToBeCalled(request, actionCopy, iterator);\n            return request;\n        }\n        return iterator();\n    };\n}\nexport default middlewareWrapper;\n//# sourceMappingURL=middleware.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport Config from '../config';\nimport { ActionTypes } from '../config/enums';\nimport { REQUESTED_WITH } from '../shared/constants';\nimport { withTimeout } from '../util/timeout';\nimport { getEndpointPath, resolve, stringify } from '../util/url';\nimport middlewareWrapper from '../util/middleware';\n/**\n * Provides direct access to the OpenAM authentication tree API.\n */\nvar Auth = /** @class */ (function () {\n    function Auth() {\n    }\n    /**\n     * Gets the next step in the authentication tree.\n     *\n     * @param {Step} previousStep The previous step, including any required input.\n     * @param {StepOptions} options Configuration default overrides.\n     * @return {Step} The next step in the authentication tree.\n     */\n    Auth.next = function (previousStep, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, middleware, realmPath, serverConfig, tree, type, query, url, runMiddleware, req, res, json;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = Config.get(options), middleware = _a.middleware, realmPath = _a.realmPath, serverConfig = _a.serverConfig, tree = _a.tree, type = _a.type;\n                        query = options ? options.query : {};\n                        url = this.constructUrl(serverConfig, realmPath, tree, query);\n                        runMiddleware = middlewareWrapper({\n                            url: new URL(url),\n                            init: this.configureRequest(previousStep),\n                        }, {\n                            type: previousStep ? ActionTypes.Authenticate : ActionTypes.StartAuthenticate,\n                            payload: {\n                                tree: tree,\n                                type: type ? type : 'service',\n                            },\n                        });\n                        req = runMiddleware(middleware);\n                        return [4 /*yield*/, withTimeout(fetch(req.url.toString(), req.init), serverConfig.timeout)];\n                    case 1:\n                        res = _b.sent();\n                        return [4 /*yield*/, this.getResponseJson(res)];\n                    case 2:\n                        json = _b.sent();\n                        return [2 /*return*/, json];\n                }\n            });\n        });\n    };\n    Auth.constructUrl = function (serverConfig, realmPath, tree, query) {\n        var treeParams = tree ? { authIndexType: 'service', authIndexValue: tree } : undefined;\n        var params = __assign(__assign({}, query), treeParams);\n        var queryString = Object.keys(params).length > 0 ? \"?\".concat(stringify(params)) : '';\n        var path = getEndpointPath('authenticate', realmPath, serverConfig.paths);\n        var url = resolve(serverConfig.baseUrl, \"\".concat(path).concat(queryString));\n        return url;\n    };\n    Auth.configureRequest = function (step) {\n        var init = {\n            body: step ? JSON.stringify(step) : undefined,\n            credentials: 'include',\n            headers: new Headers({\n                accept: 'application/json',\n                'accept-api-version': 'protocol=1.0,resource=2.1',\n                'content-type': 'application/json',\n                'x-requested-with': REQUESTED_WITH,\n            }),\n            method: 'POST',\n        };\n        return init;\n    };\n    Auth.getResponseJson = function (res) {\n        return __awaiter(this, void 0, void 0, function () {\n            var contentType, isJson, json, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        contentType = res.headers.get('content-type');\n                        isJson = contentType && contentType.indexOf('application/json') > -1;\n                        if (!isJson) return [3 /*break*/, 2];\n                        return [4 /*yield*/, res.json()];\n                    case 1:\n                        _a = _b.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        _a = {};\n                        _b.label = 3;\n                    case 3:\n                        json = _a;\n                        json.status = res.status;\n                        json.ok = res.ok;\n                        return [2 /*return*/, json];\n                }\n            });\n        });\n    };\n    return Auth;\n}());\nexport default Auth;\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * enums.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * Known errors that can occur during authentication.\n */\nvar ErrorCode;\n(function (ErrorCode) {\n    ErrorCode[\"BadRequest\"] = \"BAD_REQUEST\";\n    ErrorCode[\"Timeout\"] = \"TIMEOUT\";\n    ErrorCode[\"Unauthorized\"] = \"UNAUTHORIZED\";\n    ErrorCode[\"Unknown\"] = \"UNKNOWN\";\n})(ErrorCode || (ErrorCode = {}));\n/**\n * Types of callbacks directly supported by the SDK.\n */\nvar CallbackType;\n(function (CallbackType) {\n    CallbackType[\"BooleanAttributeInputCallback\"] = \"BooleanAttributeInputCallback\";\n    CallbackType[\"ChoiceCallback\"] = \"ChoiceCallback\";\n    CallbackType[\"ConfirmationCallback\"] = \"ConfirmationCallback\";\n    CallbackType[\"DeviceProfileCallback\"] = \"DeviceProfileCallback\";\n    CallbackType[\"HiddenValueCallback\"] = \"HiddenValueCallback\";\n    CallbackType[\"KbaCreateCallback\"] = \"KbaCreateCallback\";\n    CallbackType[\"MetadataCallback\"] = \"MetadataCallback\";\n    CallbackType[\"NameCallback\"] = \"NameCallback\";\n    CallbackType[\"NumberAttributeInputCallback\"] = \"NumberAttributeInputCallback\";\n    CallbackType[\"PasswordCallback\"] = \"PasswordCallback\";\n    CallbackType[\"PollingWaitCallback\"] = \"PollingWaitCallback\";\n    CallbackType[\"ReCaptchaCallback\"] = \"ReCaptchaCallback\";\n    CallbackType[\"RedirectCallback\"] = \"RedirectCallback\";\n    CallbackType[\"SelectIdPCallback\"] = \"SelectIdPCallback\";\n    CallbackType[\"StringAttributeInputCallback\"] = \"StringAttributeInputCallback\";\n    CallbackType[\"SuspendedTextOutputCallback\"] = \"SuspendedTextOutputCallback\";\n    CallbackType[\"TermsAndConditionsCallback\"] = \"TermsAndConditionsCallback\";\n    CallbackType[\"TextOutputCallback\"] = \"TextOutputCallback\";\n    CallbackType[\"ValidatedCreatePasswordCallback\"] = \"ValidatedCreatePasswordCallback\";\n    CallbackType[\"ValidatedCreateUsernameCallback\"] = \"ValidatedCreateUsernameCallback\";\n})(CallbackType || (CallbackType = {}));\nexport { CallbackType, ErrorCode };\n//# sourceMappingURL=enums.js.map","/*\n * @forgerock/javascript-sdk\n *\n * constants.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * @module\n * @ignore\n * These are private constants\n */\nvar REQUESTED_WITH = 'forgerock-sdk';\nexport { REQUESTED_WITH };\n//# sourceMappingURL=constants.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nimport { add, clear, remove } from './helpers';\n/**\n * Event dispatcher for subscribing and publishing categorized events.\n */\nvar Dispatcher = /** @class */ (function () {\n    function Dispatcher() {\n        this.callbacks = {};\n    }\n    /**\n     * Subscribes to an event type.\n     *\n     * @param type The event type\n     * @param listener The function to subscribe to events of this type\n     */\n    Dispatcher.prototype.addEventListener = function (type, listener) {\n        add(this.callbacks, type, listener);\n    };\n    /**\n     * Unsubscribes from an event type.\n     *\n     * @param type The event type\n     * @param listener The function to unsubscribe from events of this type\n     */\n    Dispatcher.prototype.removeEventListener = function (type, listener) {\n        remove(this.callbacks, type, listener);\n    };\n    /**\n     * Unsubscribes all listener functions to a single event type or all event types.\n     *\n     * @param type The event type, or all event types if not specified\n     */\n    Dispatcher.prototype.clearEventListeners = function (type) {\n        clear(this.callbacks, type);\n    };\n    /**\n     * Publishes an event.\n     *\n     * @param event The event object to publish\n     */\n    Dispatcher.prototype.dispatchEvent = function (event) {\n        if (!this.callbacks[event.type]) {\n            return;\n        }\n        for (var _i = 0, _a = this.callbacks[event.type]; _i < _a.length; _i++) {\n            var listener = _a[_i];\n            listener(event);\n        }\n    };\n    return Dispatcher;\n}());\nexport default Dispatcher;\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * enums.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar PolicyKey;\n(function (PolicyKey) {\n    PolicyKey[\"CannotContainCharacters\"] = \"CANNOT_CONTAIN_CHARACTERS\";\n    PolicyKey[\"CannotContainDuplicates\"] = \"CANNOT_CONTAIN_DUPLICATES\";\n    PolicyKey[\"CannotContainOthers\"] = \"CANNOT_CONTAIN_OTHERS\";\n    PolicyKey[\"LeastCapitalLetters\"] = \"AT_LEAST_X_CAPITAL_LETTERS\";\n    PolicyKey[\"LeastNumbers\"] = \"AT_LEAST_X_NUMBERS\";\n    PolicyKey[\"MatchRegexp\"] = \"MATCH_REGEXP\";\n    PolicyKey[\"MaximumLength\"] = \"MAX_LENGTH\";\n    PolicyKey[\"MaximumNumber\"] = \"MAXIMUM_NUMBER_VALUE\";\n    PolicyKey[\"MinimumLength\"] = \"MIN_LENGTH\";\n    PolicyKey[\"MinimumNumber\"] = \"MINIMUM_NUMBER_VALUE\";\n    PolicyKey[\"Required\"] = \"REQUIRED\";\n    PolicyKey[\"Unique\"] = \"UNIQUE\";\n    PolicyKey[\"UnknownPolicy\"] = \"UNKNOWN_POLICY\";\n    PolicyKey[\"ValidArrayItems\"] = \"VALID_ARRAY_ITEMS\";\n    PolicyKey[\"ValidDate\"] = \"VALID_DATE\";\n    PolicyKey[\"ValidEmailAddress\"] = \"VALID_EMAIL_ADDRESS_FORMAT\";\n    PolicyKey[\"ValidNameFormat\"] = \"VALID_NAME_FORMAT\";\n    PolicyKey[\"ValidNumber\"] = \"VALID_NUMBER\";\n    PolicyKey[\"ValidPhoneFormat\"] = \"VALID_PHONE_FORMAT\";\n    PolicyKey[\"ValidQueryFilter\"] = \"VALID_QUERY_FILTER\";\n    PolicyKey[\"ValidType\"] = \"VALID_TYPE\";\n})(PolicyKey || (PolicyKey = {}));\nexport { PolicyKey };\n//# sourceMappingURL=enums.js.map","/*\n * @forgerock/javascript-sdk\n *\n * message-creator.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar _a;\nimport { plural } from '../util/strings';\nimport { PolicyKey } from './enums';\nimport { getProp } from './helpers';\nvar defaultMessageCreator = (_a = {},\n    _a[PolicyKey.CannotContainCharacters] = function (property, params) {\n        var forbiddenChars = getProp(params, 'forbiddenChars', '');\n        return \"\".concat(property, \" must not contain following characters: \\\"\").concat(forbiddenChars, \"\\\"\");\n    },\n    _a[PolicyKey.CannotContainDuplicates] = function (property, params) {\n        var duplicateValue = getProp(params, 'duplicateValue', '');\n        return \"\".concat(property, \"  must not contain duplicates: \\\"\").concat(duplicateValue, \"\\\"\");\n    },\n    _a[PolicyKey.CannotContainOthers] = function (property, params) {\n        var disallowedFields = getProp(params, 'disallowedFields', '');\n        return \"\".concat(property, \" must not contain: \\\"\").concat(disallowedFields, \"\\\"\");\n    },\n    _a[PolicyKey.LeastCapitalLetters] = function (property, params) {\n        var numCaps = getProp(params, 'numCaps', 0);\n        return \"\".concat(property, \" must contain at least \").concat(numCaps, \" capital \").concat(plural(numCaps, 'letter'));\n    },\n    _a[PolicyKey.LeastNumbers] = function (property, params) {\n        var numNums = getProp(params, 'numNums', 0);\n        return \"\".concat(property, \" must contain at least \").concat(numNums, \" numeric \").concat(plural(numNums, 'value'));\n    },\n    _a[PolicyKey.MatchRegexp] = function (property) { return \"\".concat(property, \" has failed the \\\"MATCH_REGEXP\\\" policy\"); },\n    _a[PolicyKey.MaximumLength] = function (property, params) {\n        var maxLength = getProp(params, 'maxLength', 0);\n        return \"\".concat(property, \" must be at most \").concat(maxLength, \" \").concat(plural(maxLength, 'character'));\n    },\n    _a[PolicyKey.MaximumNumber] = function (property) {\n        return \"\".concat(property, \" has failed the \\\"MAXIMUM_NUMBER_VALUE\\\" policy\");\n    },\n    _a[PolicyKey.MinimumLength] = function (property, params) {\n        var minLength = getProp(params, 'minLength', 0);\n        return \"\".concat(property, \" must be at least \").concat(minLength, \" \").concat(plural(minLength, 'character'));\n    },\n    _a[PolicyKey.MinimumNumber] = function (property) {\n        return \"\".concat(property, \" has failed the \\\"MINIMUM_NUMBER_VALUE\\\" policy\");\n    },\n    _a[PolicyKey.Required] = function (property) { return \"\".concat(property, \" is required\"); },\n    _a[PolicyKey.Unique] = function (property) { return \"\".concat(property, \" must be unique\"); },\n    _a[PolicyKey.UnknownPolicy] = function (property, params) {\n        var policyRequirement = getProp(params, 'policyRequirement', 'Unknown');\n        return \"\".concat(property, \": Unknown policy requirement \\\"\").concat(policyRequirement, \"\\\"\");\n    },\n    _a[PolicyKey.ValidArrayItems] = function (property) {\n        return \"\".concat(property, \" has failed the \\\"VALID_ARRAY_ITEMS\\\" policy\");\n    },\n    _a[PolicyKey.ValidDate] = function (property) { return \"\".concat(property, \" has an invalid date\"); },\n    _a[PolicyKey.ValidEmailAddress] = function (property) { return \"\".concat(property, \" has an invalid email address\"); },\n    _a[PolicyKey.ValidNameFormat] = function (property) { return \"\".concat(property, \" has an invalid name format\"); },\n    _a[PolicyKey.ValidNumber] = function (property) { return \"\".concat(property, \" has an invalid number\"); },\n    _a[PolicyKey.ValidPhoneFormat] = function (property) { return \"\".concat(property, \" has an invalid phone number\"); },\n    _a[PolicyKey.ValidQueryFilter] = function (property) {\n        return \"\".concat(property, \" has failed the \\\"VALID_QUERY_FILTER\\\" policy\");\n    },\n    _a[PolicyKey.ValidType] = function (property) { return \"\".concat(property, \" has failed the \\\"VALID_TYPE\\\" policy\"); },\n    _a);\nexport default defaultMessageCreator;\n//# sourceMappingURL=message-creator.js.map","/*\n * @forgerock/javascript-sdk\n *\n * helpers.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/** @hidden */\nfunction add(container, type, listener) {\n    container[type] = container[type] || [];\n    if (container[type].indexOf(listener) < 0) {\n        container[type].push(listener);\n    }\n}\n/** @hidden */\nfunction remove(container, type, listener) {\n    if (!container[type]) {\n        return;\n    }\n    var index = container[type].indexOf(listener);\n    if (index >= 0) {\n        container[type].splice(index, 1);\n    }\n}\n/** @hidden */\nfunction clear(container, type) {\n    Object.keys(container).forEach(function (k) {\n        if (!type || k === type) {\n            delete container[k];\n        }\n    });\n}\nexport { add, clear, remove };\n//# sourceMappingURL=helpers.js.map","/*\n * @forgerock/javascript-sdk\n *\n * strings.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * @module\n * @ignore\n * These are private utility functions\n */\nexport function plural(n, singularText, pluralText) {\n    if (n === 1) {\n        return singularText;\n    }\n    return pluralText !== undefined ? pluralText : singularText + 's';\n}\n//# sourceMappingURL=strings.js.map","/*\n * @forgerock/javascript-sdk\n *\n * helpers.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nfunction getProp(obj, prop, defaultValue) {\n    if (!obj || obj[prop] === undefined) {\n        return defaultValue;\n    }\n    return obj[prop];\n}\nexport { getProp };\n//# sourceMappingURL=helpers.js.map","/*\n * @forgerock/javascript-sdk\n *\n * enums.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * Types of steps returned by the authentication tree.\n */\nvar StepType;\n(function (StepType) {\n    StepType[\"LoginFailure\"] = \"LoginFailure\";\n    StepType[\"LoginSuccess\"] = \"LoginSuccess\";\n    StepType[\"Step\"] = \"Step\";\n})(StepType || (StepType = {}));\nexport { StepType };\n//# sourceMappingURL=enums.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { PolicyKey } from './enums';\nimport defaultMessageCreator from './message-creator';\n/**\n * Utility for processing policy failures into human readable messages.\n *\n * Example:\n *\n * ```js\n * // Create message overrides and extensions as needed\n * const messageCreator = {\n *   [PolicyKey.unique]: (property: string) => (\n *     `this is a custom message for \"UNIQUE\" policy of ${property}`\n *   ),\n *   CUSTOM_POLICY: (property: string, params: any) => (\n *     `this is a custom message for \"${params.policyRequirement}\" policy of ${property}`\n *   ),\n * };\n *\n * const thisStep = await FRAuth.next(previousStep);\n *\n * if (thisStep.type === StepType.LoginFailure) {\n *   const messagesStepMethod = thisStep.getProcessedMessage(messageCreator);\n *   const messagesClassMethod = FRPolicy.parseErrors(thisStep, messageCreator)\n * }\n */\nvar FRPolicy = /** @class */ (function () {\n    function FRPolicy() {\n    }\n    /**\n     * Parses policy errors and generates human readable error messages.\n     *\n     * @param {Step} err The step containing the error.\n     * @param {MessageCreator} messageCreator\n     * Extensible and overridable custom error messages for policy failures.\n     * @return {ProcessedPropertyError[]} Array of objects containing all processed policy errors.\n     */\n    FRPolicy.parseErrors = function (err, messageCreator) {\n        var _this = this;\n        var errors = [];\n        if (err.detail && err.detail.failedPolicyRequirements) {\n            err.detail.failedPolicyRequirements.map(function (x) {\n                errors.push.apply(errors, [\n                    {\n                        detail: x,\n                        messages: _this.parseFailedPolicyRequirement(x, messageCreator),\n                    },\n                ]);\n            });\n        }\n        return errors;\n    };\n    /**\n     * Parses a failed policy and returns a string array of error messages.\n     *\n     * @param {FailedPolicyRequirement} failedPolicy The detail data of the failed policy.\n     * @param {MessageCreator} customMessage\n     * Extensible and overridable custom error messages for policy failures.\n     * @return {string[]} Array of strings with all processed policy errors.\n     */\n    FRPolicy.parseFailedPolicyRequirement = function (failedPolicy, messageCreator) {\n        var _this = this;\n        var errors = [];\n        failedPolicy.policyRequirements.map(function (policyRequirement) {\n            errors.push(_this.parsePolicyRequirement(failedPolicy.property, policyRequirement, messageCreator));\n        });\n        return errors;\n    };\n    /**\n     * Parses a policy error into a human readable error message.\n     *\n     * @param {string} property The property with the policy failure.\n     * @param {PolicyRequirement} policy The policy failure data.\n     * @param {MessageCreator} customMessage\n     * Extensible and overridable custom error messages for policy failures.\n     * @return {string} Human readable error message.\n     */\n    FRPolicy.parsePolicyRequirement = function (property, policy, messageCreator) {\n        if (messageCreator === void 0) { messageCreator = {}; }\n        // AM is returning policy requirement failures as JSON strings\n        var policyObject = typeof policy === 'string' ? JSON.parse(policy) : __assign({}, policy);\n        var policyRequirement = policyObject.policyRequirement;\n        // Determine which message creator function to use\n        var effectiveMessageCreator = messageCreator[policyRequirement] ||\n            defaultMessageCreator[policyRequirement] ||\n            defaultMessageCreator[PolicyKey.UnknownPolicy];\n        // Flatten the parameters and create the message\n        var params = policyObject.params\n            ? __assign(__assign({}, policyObject.params), { policyRequirement: policyRequirement }) : { policyRequirement: policyRequirement };\n        var message = effectiveMessageCreator(property, params);\n        return message;\n    };\n    return FRPolicy;\n}());\nexport default FRPolicy;\nexport { PolicyKey };\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * fr-login-failure.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nimport FRPolicy from '../fr-policy';\nimport { StepType } from './enums';\nvar FRLoginFailure = /** @class */ (function () {\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function FRLoginFailure(payload) {\n        this.payload = payload;\n        /**\n         * The type of step.\n         */\n        this.type = StepType.LoginFailure;\n    }\n    /**\n     * Gets the error code.\n     */\n    FRLoginFailure.prototype.getCode = function () {\n        return Number(this.payload.code);\n    };\n    /**\n     * Gets the failure details.\n     */\n    FRLoginFailure.prototype.getDetail = function () {\n        return this.payload.detail;\n    };\n    /**\n     * Gets the failure message.\n     */\n    FRLoginFailure.prototype.getMessage = function () {\n        return this.payload.message;\n    };\n    /**\n     * Gets processed failure message.\n     */\n    FRLoginFailure.prototype.getProcessedMessage = function (messageCreator) {\n        return FRPolicy.parseErrors(this.payload, messageCreator);\n    };\n    /**\n     * Gets the failure reason.\n     */\n    FRLoginFailure.prototype.getReason = function () {\n        return this.payload.reason;\n    };\n    return FRLoginFailure;\n}());\nexport default FRLoginFailure;\n//# sourceMappingURL=fr-login-failure.js.map","/*\n * @forgerock/javascript-sdk\n *\n * attribute-input-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect attributes.\n *\n * @typeparam T Maps to StringAttributeInputCallback, NumberAttributeInputCallback and\n *     BooleanAttributeInputCallback, respectively\n */\nvar AttributeInputCallback = /** @class */ (function (_super) {\n    __extends(AttributeInputCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function AttributeInputCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the attribute name.\n     */\n    AttributeInputCallback.prototype.getName = function () {\n        return this.getOutputByName('name', '');\n    };\n    /**\n     * Gets the attribute prompt.\n     */\n    AttributeInputCallback.prototype.getPrompt = function () {\n        return this.getOutputByName('prompt', '');\n    };\n    /**\n     * Gets whether the attribute is required.\n     */\n    AttributeInputCallback.prototype.isRequired = function () {\n        return this.getOutputByName('required', false);\n    };\n    /**\n     * Gets the callback's failed policies.\n     */\n    AttributeInputCallback.prototype.getFailedPolicies = function () {\n        return this.getOutputByName('failedPolicies', []);\n    };\n    /**\n     * Gets the callback's applicable policies.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    AttributeInputCallback.prototype.getPolicies = function () {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return this.getOutputByName('policies', {});\n    };\n    /**\n     * Set if validating value only.\n     */\n    AttributeInputCallback.prototype.setValidateOnly = function (value) {\n        this.setInputValue(value, /validateOnly/);\n    };\n    /**\n     * Sets the attribute's value.\n     */\n    AttributeInputCallback.prototype.setValue = function (value) {\n        this.setInputValue(value);\n    };\n    return AttributeInputCallback;\n}(FRCallback));\nexport default AttributeInputCallback;\n//# sourceMappingURL=attribute-input-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * fr-login-success.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nimport { StepType } from './enums';\nvar FRLoginSuccess = /** @class */ (function () {\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function FRLoginSuccess(payload) {\n        this.payload = payload;\n        /**\n         * The type of step.\n         */\n        this.type = StepType.LoginSuccess;\n    }\n    /**\n     * Gets the step's realm.\n     */\n    FRLoginSuccess.prototype.getRealm = function () {\n        return this.payload.realm;\n    };\n    /**\n     * Gets the step's session token.\n     */\n    FRLoginSuccess.prototype.getSessionToken = function () {\n        return this.payload.tokenId;\n    };\n    /**\n     * Gets the step's success URL.\n     */\n    FRLoginSuccess.prototype.getSuccessUrl = function () {\n        return this.payload.successUrl;\n    };\n    return FRLoginSuccess;\n}());\nexport default FRLoginSuccess;\n//# sourceMappingURL=fr-login-success.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * Base class for authentication tree callback wrappers.\n */\nvar FRCallback = /** @class */ (function () {\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function FRCallback(payload) {\n        this.payload = payload;\n    }\n    /**\n     * Gets the name of this callback type.\n     */\n    FRCallback.prototype.getType = function () {\n        return this.payload.type;\n    };\n    /**\n     * Gets the value of the specified input element, or the first element if `selector` is not\n     * provided.\n     *\n     * @param selector The index position or name of the desired element\n     */\n    FRCallback.prototype.getInputValue = function (selector) {\n        if (selector === void 0) { selector = 0; }\n        return this.getArrayElement(this.payload.input, selector).value;\n    };\n    /**\n     * Sets the value of the specified input element, or the first element if `selector` is not\n     * provided.\n     *\n     * @param selector The index position or name of the desired element\n     */\n    FRCallback.prototype.setInputValue = function (value, selector) {\n        if (selector === void 0) { selector = 0; }\n        this.getArrayElement(this.payload.input, selector).value = value;\n    };\n    /**\n     * Gets the value of the specified output element, or the first element if `selector`\n     * is not provided.\n     *\n     * @param selector The index position or name of the desired element\n     */\n    FRCallback.prototype.getOutputValue = function (selector) {\n        if (selector === void 0) { selector = 0; }\n        return this.getArrayElement(this.payload.output, selector).value;\n    };\n    /**\n     * Gets the value of the first output element with the specified name or the\n     * specified default value.\n     *\n     * @param name The name of the desired element\n     */\n    FRCallback.prototype.getOutputByName = function (name, defaultValue) {\n        var output = this.payload.output.find(function (x) { return x.name === name; });\n        return output ? output.value : defaultValue;\n    };\n    FRCallback.prototype.getArrayElement = function (array, selector) {\n        if (selector === void 0) { selector = 0; }\n        if (array === undefined) {\n            throw new Error(\"No NameValue array was provided to search (selector \".concat(selector, \")\"));\n        }\n        if (typeof selector === 'number') {\n            if (selector < 0 || selector > array.length - 1) {\n                throw new Error(\"Selector index \".concat(selector, \" is out of range\"));\n            }\n            return array[selector];\n        }\n        if (typeof selector === 'string') {\n            var input = array.find(function (x) { return x.name === selector; });\n            if (!input) {\n                throw new Error(\"Missing callback input entry \\\"\".concat(selector, \"\\\"\"));\n            }\n            return input;\n        }\n        // Duck typing for RegEx\n        if (typeof selector === 'object' && selector.test && selector.exec) {\n            var input = array.find(function (x) { return selector.test(x.name); });\n            if (!input) {\n                throw new Error(\"Missing callback input entry \\\"\".concat(selector, \"\\\"\"));\n            }\n            return input;\n        }\n        throw new Error('Invalid selector value type');\n    };\n    return FRCallback;\n}());\nexport default FRCallback;\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * choice-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect an answer to a choice.\n */\nvar ChoiceCallback = /** @class */ (function (_super) {\n    __extends(ChoiceCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function ChoiceCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the choice's prompt.\n     */\n    ChoiceCallback.prototype.getPrompt = function () {\n        return this.getOutputByName('prompt', '');\n    };\n    /**\n     * Gets the choice's default answer.\n     */\n    ChoiceCallback.prototype.getDefaultChoice = function () {\n        return this.getOutputByName('defaultChoice', 0);\n    };\n    /**\n     * Gets the choice's possible answers.\n     */\n    ChoiceCallback.prototype.getChoices = function () {\n        return this.getOutputByName('choices', []);\n    };\n    /**\n     * Sets the choice's answer by index position.\n     */\n    ChoiceCallback.prototype.setChoiceIndex = function (index) {\n        var length = this.getChoices().length;\n        if (index < 0 || index > length - 1) {\n            throw new Error(\"\".concat(index, \" is out of bounds\"));\n        }\n        this.setInputValue(index);\n    };\n    /**\n     * Sets the choice's answer by value.\n     */\n    ChoiceCallback.prototype.setChoiceValue = function (value) {\n        var index = this.getChoices().indexOf(value);\n        if (index === -1) {\n            throw new Error(\"\\\"\".concat(value, \"\\\" is not a valid choice\"));\n        }\n        this.setInputValue(index);\n    };\n    return ChoiceCallback;\n}(FRCallback));\nexport default ChoiceCallback;\n//# sourceMappingURL=choice-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * confirmation-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect a confirmation to a message.\n */\nvar ConfirmationCallback = /** @class */ (function (_super) {\n    __extends(ConfirmationCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function ConfirmationCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the index position of the confirmation's default answer.\n     */\n    ConfirmationCallback.prototype.getDefaultOption = function () {\n        return Number(this.getOutputByName('defaultOption', 0));\n    };\n    /**\n     * Gets the confirmation's message type.\n     */\n    ConfirmationCallback.prototype.getMessageType = function () {\n        return Number(this.getOutputByName('messageType', 0));\n    };\n    /**\n     * Gets the confirmation's possible answers.\n     */\n    ConfirmationCallback.prototype.getOptions = function () {\n        return this.getOutputByName('options', []);\n    };\n    /**\n     * Gets the confirmation's option type.\n     */\n    ConfirmationCallback.prototype.getOptionType = function () {\n        return Number(this.getOutputByName('optionType', 0));\n    };\n    /**\n     * Gets the confirmation's prompt.\n     */\n    ConfirmationCallback.prototype.getPrompt = function () {\n        return this.getOutputByName('prompt', '');\n    };\n    /**\n     * Set option index.\n     */\n    ConfirmationCallback.prototype.setOptionIndex = function (index) {\n        if (index !== 0 && index !== 1) {\n            throw new Error(\"\\\"\".concat(index, \"\\\" is not a valid choice\"));\n        }\n        this.setInputValue(index);\n    };\n    /**\n     * Set option value.\n     */\n    ConfirmationCallback.prototype.setOptionValue = function (value) {\n        var index = this.getOptions().indexOf(value);\n        if (index === -1) {\n            throw new Error(\"\\\"\".concat(value, \"\\\" is not a valid choice\"));\n        }\n        this.setInputValue(index);\n    };\n    return ConfirmationCallback;\n}(FRCallback));\nexport default ConfirmationCallback;\n//# sourceMappingURL=confirmation-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * device-profile-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect device profile data.\n */\nvar DeviceProfileCallback = /** @class */ (function (_super) {\n    __extends(DeviceProfileCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function DeviceProfileCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the callback's data.\n     */\n    DeviceProfileCallback.prototype.getMessage = function () {\n        return this.getOutputByName('message', '');\n    };\n    /**\n     * Does callback require metadata?\n     */\n    DeviceProfileCallback.prototype.isMetadataRequired = function () {\n        return this.getOutputByName('metadata', false);\n    };\n    /**\n     * Does callback require location data?\n     */\n    DeviceProfileCallback.prototype.isLocationRequired = function () {\n        return this.getOutputByName('location', false);\n    };\n    /**\n     * Sets the profile.\n     */\n    DeviceProfileCallback.prototype.setProfile = function (profile) {\n        this.setInputValue(JSON.stringify(profile));\n    };\n    return DeviceProfileCallback;\n}(FRCallback));\nexport default DeviceProfileCallback;\n//# sourceMappingURL=device-profile-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * hidden-value-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect information indirectly from the user.\n */\nvar HiddenValueCallback = /** @class */ (function (_super) {\n    __extends(HiddenValueCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function HiddenValueCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    return HiddenValueCallback;\n}(FRCallback));\nexport default HiddenValueCallback;\n//# sourceMappingURL=hidden-value-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * kba-create-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect KBA-style security questions and answers.\n */\nvar KbaCreateCallback = /** @class */ (function (_super) {\n    __extends(KbaCreateCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function KbaCreateCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the callback prompt.\n     */\n    KbaCreateCallback.prototype.getPrompt = function () {\n        return this.getOutputByName('prompt', '');\n    };\n    /**\n     * Gets the callback's list of pre-defined security questions.\n     */\n    KbaCreateCallback.prototype.getPredefinedQuestions = function () {\n        return this.getOutputByName('predefinedQuestions', []);\n    };\n    /**\n     * Sets the callback's security question.\n     */\n    KbaCreateCallback.prototype.setQuestion = function (question) {\n        this.setValue('question', question);\n    };\n    /**\n     * Sets the callback's security question answer.\n     */\n    KbaCreateCallback.prototype.setAnswer = function (answer) {\n        this.setValue('answer', answer);\n    };\n    KbaCreateCallback.prototype.setValue = function (type, value) {\n        if (!this.payload.input) {\n            throw new Error('KBA payload is missing input');\n        }\n        var input = this.payload.input.find(function (x) { return x.name.endsWith(type); });\n        if (!input) {\n            throw new Error(\"No input has name ending in \\\"\".concat(type, \"\\\"\"));\n        }\n        input.value = value;\n    };\n    return KbaCreateCallback;\n}(FRCallback));\nexport default KbaCreateCallback;\n//# sourceMappingURL=kba-create-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * metadata-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to deliver and collect miscellaneous data.\n */\nvar MetadataCallback = /** @class */ (function (_super) {\n    __extends(MetadataCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function MetadataCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the callback's data.\n     */\n    MetadataCallback.prototype.getData = function () {\n        return this.getOutputByName('data', {});\n    };\n    return MetadataCallback;\n}(FRCallback));\nexport default MetadataCallback;\n//# sourceMappingURL=metadata-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * name-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect a username.\n */\nvar NameCallback = /** @class */ (function (_super) {\n    __extends(NameCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function NameCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the callback's prompt.\n     */\n    NameCallback.prototype.getPrompt = function () {\n        return this.getOutputByName('prompt', '');\n    };\n    /**\n     * Sets the username.\n     */\n    NameCallback.prototype.setName = function (name) {\n        this.setInputValue(name);\n    };\n    return NameCallback;\n}(FRCallback));\nexport default NameCallback;\n//# sourceMappingURL=name-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * password-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect a password.\n */\nvar PasswordCallback = /** @class */ (function (_super) {\n    __extends(PasswordCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function PasswordCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the callback's failed policies.\n     */\n    PasswordCallback.prototype.getFailedPolicies = function () {\n        return this.getOutputByName('failedPolicies', []);\n    };\n    /**\n     * Gets the callback's applicable policies.\n     */\n    PasswordCallback.prototype.getPolicies = function () {\n        return this.getOutputByName('policies', []);\n    };\n    /**\n     * Gets the callback's prompt.\n     */\n    PasswordCallback.prototype.getPrompt = function () {\n        return this.getOutputByName('prompt', '');\n    };\n    /**\n     * Sets the password.\n     */\n    PasswordCallback.prototype.setPassword = function (password) {\n        this.setInputValue(password);\n    };\n    return PasswordCallback;\n}(FRCallback));\nexport default PasswordCallback;\n//# sourceMappingURL=password-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * polling-wait-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to instruct the system to poll while a backend process completes.\n */\nvar PollingWaitCallback = /** @class */ (function (_super) {\n    __extends(PollingWaitCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function PollingWaitCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the message to display while polling.\n     */\n    PollingWaitCallback.prototype.getMessage = function () {\n        return this.getOutputByName('message', '');\n    };\n    /**\n     * Gets the polling interval in seconds.\n     */\n    PollingWaitCallback.prototype.getWaitTime = function () {\n        return Number(this.getOutputByName('waitTime', 0));\n    };\n    return PollingWaitCallback;\n}(FRCallback));\nexport default PollingWaitCallback;\n//# sourceMappingURL=polling-wait-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * recaptcha-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to integrate reCAPTCHA.\n */\nvar ReCaptchaCallback = /** @class */ (function (_super) {\n    __extends(ReCaptchaCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function ReCaptchaCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the reCAPTCHA site key.\n     */\n    ReCaptchaCallback.prototype.getSiteKey = function () {\n        return this.getOutputByName('recaptchaSiteKey', '');\n    };\n    /**\n     * Sets the reCAPTCHA result.\n     */\n    ReCaptchaCallback.prototype.setResult = function (result) {\n        this.setInputValue(result);\n    };\n    return ReCaptchaCallback;\n}(FRCallback));\nexport default ReCaptchaCallback;\n//# sourceMappingURL=recaptcha-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * redirect-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect an answer to a choice.\n */\nvar RedirectCallback = /** @class */ (function (_super) {\n    __extends(RedirectCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function RedirectCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the redirect URL.\n     */\n    RedirectCallback.prototype.getRedirectUrl = function () {\n        return this.getOutputByName('redirectUrl', '');\n    };\n    return RedirectCallback;\n}(FRCallback));\nexport default RedirectCallback;\n//# sourceMappingURL=redirect-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * select-idp-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect an answer to a choice.\n */\nvar SelectIdPCallback = /** @class */ (function (_super) {\n    __extends(SelectIdPCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function SelectIdPCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the available providers.\n     */\n    SelectIdPCallback.prototype.getProviders = function () {\n        return this.getOutputByName('providers', []);\n    };\n    /**\n     * Sets the provider by name.\n     */\n    SelectIdPCallback.prototype.setProvider = function (value) {\n        var item = this.getProviders().find(function (item) { return item.provider === value; });\n        if (!item) {\n            throw new Error(\"\\\"\".concat(value, \"\\\" is not a valid choice\"));\n        }\n        this.setInputValue(item.provider);\n    };\n    return SelectIdPCallback;\n}(FRCallback));\nexport default SelectIdPCallback;\n//# sourceMappingURL=select-idp-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * text-output-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to display a message.\n */\nvar TextOutputCallback = /** @class */ (function (_super) {\n    __extends(TextOutputCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function TextOutputCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the message content.\n     */\n    TextOutputCallback.prototype.getMessage = function () {\n        return this.getOutputByName('message', '');\n    };\n    /**\n     * Gets the message type.\n     */\n    TextOutputCallback.prototype.getMessageType = function () {\n        return this.getOutputByName('messageType', '');\n    };\n    return TextOutputCallback;\n}(FRCallback));\nexport default TextOutputCallback;\n//# sourceMappingURL=text-output-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * suspended-text-output-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport TextOutputCallback from './text-output-callback';\n/**\n * Represents a callback used to display a message.\n */\nvar SuspendedTextOutputCallback = /** @class */ (function (_super) {\n    __extends(SuspendedTextOutputCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function SuspendedTextOutputCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    return SuspendedTextOutputCallback;\n}(TextOutputCallback));\nexport default SuspendedTextOutputCallback;\n//# sourceMappingURL=suspended-text-output-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * terms-and-conditions-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect acceptance of terms and conditions.\n */\nvar TermsAndConditionsCallback = /** @class */ (function (_super) {\n    __extends(TermsAndConditionsCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function TermsAndConditionsCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the terms and conditions content.\n     */\n    TermsAndConditionsCallback.prototype.getTerms = function () {\n        return this.getOutputByName('terms', '');\n    };\n    /**\n     * Gets the version of the terms and conditions.\n     */\n    TermsAndConditionsCallback.prototype.getVersion = function () {\n        return this.getOutputByName('version', '');\n    };\n    /**\n     * Gets the date of the terms and conditions.\n     */\n    TermsAndConditionsCallback.prototype.getCreateDate = function () {\n        var date = this.getOutputByName('createDate', '');\n        return new Date(date);\n    };\n    /**\n     * Sets the callback's acceptance.\n     */\n    TermsAndConditionsCallback.prototype.setAccepted = function (accepted) {\n        if (accepted === void 0) { accepted = true; }\n        this.setInputValue(accepted);\n    };\n    return TermsAndConditionsCallback;\n}(FRCallback));\nexport default TermsAndConditionsCallback;\n//# sourceMappingURL=terms-and-conditions-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * validated-create-password-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect a valid platform password.\n */\nvar ValidatedCreatePasswordCallback = /** @class */ (function (_super) {\n    __extends(ValidatedCreatePasswordCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function ValidatedCreatePasswordCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the callback's failed policies.\n     */\n    ValidatedCreatePasswordCallback.prototype.getFailedPolicies = function () {\n        return this.getOutputByName('failedPolicies', []);\n    };\n    /**\n     * Gets the callback's applicable policies.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ValidatedCreatePasswordCallback.prototype.getPolicies = function () {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return this.getOutputByName('policies', {});\n    };\n    /**\n     * Gets the callback's prompt.\n     */\n    ValidatedCreatePasswordCallback.prototype.getPrompt = function () {\n        return this.getOutputByName('prompt', '');\n    };\n    /**\n     * Gets whether the password is required.\n     */\n    ValidatedCreatePasswordCallback.prototype.isRequired = function () {\n        return this.getOutputByName('required', false);\n    };\n    /**\n     * Sets the callback's password.\n     */\n    ValidatedCreatePasswordCallback.prototype.setPassword = function (password) {\n        this.setInputValue(password);\n    };\n    /**\n     * Set if validating value only.\n     */\n    ValidatedCreatePasswordCallback.prototype.setValidateOnly = function (value) {\n        this.setInputValue(value, /validateOnly/);\n    };\n    return ValidatedCreatePasswordCallback;\n}(FRCallback));\nexport default ValidatedCreatePasswordCallback;\n//# sourceMappingURL=validated-create-password-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * validated-create-username-callback.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport FRCallback from '.';\n/**\n * Represents a callback used to collect a valid platform username.\n */\nvar ValidatedCreateUsernameCallback = /** @class */ (function (_super) {\n    __extends(ValidatedCreateUsernameCallback, _super);\n    /**\n     * @param payload The raw payload returned by OpenAM\n     */\n    function ValidatedCreateUsernameCallback(payload) {\n        var _this = _super.call(this, payload) || this;\n        _this.payload = payload;\n        return _this;\n    }\n    /**\n     * Gets the callback's prompt.\n     */\n    ValidatedCreateUsernameCallback.prototype.getPrompt = function () {\n        return this.getOutputByName('prompt', '');\n    };\n    /**\n     * Gets the callback's failed policies.\n     */\n    ValidatedCreateUsernameCallback.prototype.getFailedPolicies = function () {\n        return this.getOutputByName('failedPolicies', []);\n    };\n    /**\n     * Gets the callback's applicable policies.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ValidatedCreateUsernameCallback.prototype.getPolicies = function () {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return this.getOutputByName('policies', {});\n    };\n    /**\n     * Gets whether the username is required.\n     */\n    ValidatedCreateUsernameCallback.prototype.isRequired = function () {\n        return this.getOutputByName('required', false);\n    };\n    /**\n     * Sets the callback's username.\n     */\n    ValidatedCreateUsernameCallback.prototype.setName = function (name) {\n        this.setInputValue(name);\n    };\n    /**\n     * Set if validating value only.\n     */\n    ValidatedCreateUsernameCallback.prototype.setValidateOnly = function (value) {\n        this.setInputValue(value, /validateOnly/);\n    };\n    return ValidatedCreateUsernameCallback;\n}(FRCallback));\nexport default ValidatedCreateUsernameCallback;\n//# sourceMappingURL=validated-create-username-callback.js.map","/*\n * @forgerock/javascript-sdk\n *\n * factory.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nimport FRCallback from '.';\nimport { CallbackType } from '../../auth/enums';\nimport AttributeInputCallback from './attribute-input-callback';\nimport ChoiceCallback from './choice-callback';\nimport ConfirmationCallback from './confirmation-callback';\nimport DeviceProfileCallback from './device-profile-callback';\nimport HiddenValueCallback from './hidden-value-callback';\nimport KbaCreateCallback from './kba-create-callback';\nimport MetadataCallback from './metadata-callback';\nimport NameCallback from './name-callback';\nimport PasswordCallback from './password-callback';\nimport PollingWaitCallback from './polling-wait-callback';\nimport ReCaptchaCallback from './recaptcha-callback';\nimport RedirectCallback from './redirect-callback';\nimport SelectIdPCallback from './select-idp-callback';\nimport SuspendedTextOutputCallback from './suspended-text-output-callback';\nimport TermsAndConditionsCallback from './terms-and-conditions-callback';\nimport TextOutputCallback from './text-output-callback';\nimport ValidatedCreatePasswordCallback from './validated-create-password-callback';\nimport ValidatedCreateUsernameCallback from './validated-create-username-callback';\n/**\n * @hidden\n */\nfunction createCallback(callback) {\n    switch (callback.type) {\n        case CallbackType.BooleanAttributeInputCallback:\n            return new AttributeInputCallback(callback);\n        case CallbackType.ChoiceCallback:\n            return new ChoiceCallback(callback);\n        case CallbackType.ConfirmationCallback:\n            return new ConfirmationCallback(callback);\n        case CallbackType.DeviceProfileCallback:\n            return new DeviceProfileCallback(callback);\n        case CallbackType.HiddenValueCallback:\n            return new HiddenValueCallback(callback);\n        case CallbackType.KbaCreateCallback:\n            return new KbaCreateCallback(callback);\n        case CallbackType.MetadataCallback:\n            return new MetadataCallback(callback);\n        case CallbackType.NameCallback:\n            return new NameCallback(callback);\n        case CallbackType.NumberAttributeInputCallback:\n            return new AttributeInputCallback(callback);\n        case CallbackType.PasswordCallback:\n            return new PasswordCallback(callback);\n        case CallbackType.PollingWaitCallback:\n            return new PollingWaitCallback(callback);\n        case CallbackType.ReCaptchaCallback:\n            return new ReCaptchaCallback(callback);\n        case CallbackType.RedirectCallback:\n            return new RedirectCallback(callback);\n        case CallbackType.SelectIdPCallback:\n            return new SelectIdPCallback(callback);\n        case CallbackType.StringAttributeInputCallback:\n            return new AttributeInputCallback(callback);\n        case CallbackType.SuspendedTextOutputCallback:\n            return new SuspendedTextOutputCallback(callback);\n        case CallbackType.TermsAndConditionsCallback:\n            return new TermsAndConditionsCallback(callback);\n        case CallbackType.TextOutputCallback:\n            return new TextOutputCallback(callback);\n        case CallbackType.ValidatedCreatePasswordCallback:\n            return new ValidatedCreatePasswordCallback(callback);\n        case CallbackType.ValidatedCreateUsernameCallback:\n            return new ValidatedCreateUsernameCallback(callback);\n        default:\n            return new FRCallback(callback);\n    }\n}\nexport default createCallback;\n//# sourceMappingURL=factory.js.map","/*\n * @forgerock/javascript-sdk\n *\n * fr-step.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nimport createCallback from './callbacks/factory';\nimport { StepType } from './enums';\n/**\n * Represents a single step of an authentication tree.\n */\nvar FRStep = /** @class */ (function () {\n    /**\n     * @param payload The raw payload returned by OpenAM\n     * @param callbackFactory A function that returns am implementation of FRCallback\n     */\n    function FRStep(payload, callbackFactory) {\n        this.payload = payload;\n        /**\n         * The type of step.\n         */\n        this.type = StepType.Step;\n        /**\n         * The callbacks contained in this step.\n         */\n        this.callbacks = [];\n        if (payload.callbacks) {\n            this.callbacks = this.convertCallbacks(payload.callbacks, callbackFactory);\n        }\n    }\n    /**\n     * Gets the first callback of the specified type in this step.\n     *\n     * @param type The type of callback to find.\n     */\n    FRStep.prototype.getCallbackOfType = function (type) {\n        var callbacks = this.getCallbacksOfType(type);\n        if (callbacks.length !== 1) {\n            throw new Error(\"Expected 1 callback of type \\\"\".concat(type, \"\\\", but found \").concat(callbacks.length));\n        }\n        return callbacks[0];\n    };\n    /**\n     * Gets all callbacks of the specified type in this step.\n     *\n     * @param type The type of callback to find.\n     */\n    FRStep.prototype.getCallbacksOfType = function (type) {\n        return this.callbacks.filter(function (x) { return x.getType() === type; });\n    };\n    /**\n     * Sets the value of the first callback of the specified type in this step.\n     *\n     * @param type The type of callback to find.\n     * @param value The value to set for the callback.\n     */\n    FRStep.prototype.setCallbackValue = function (type, value) {\n        var callbacks = this.getCallbacksOfType(type);\n        if (callbacks.length !== 1) {\n            throw new Error(\"Expected 1 callback of type \\\"\".concat(type, \"\\\", but found \").concat(callbacks.length));\n        }\n        callbacks[0].setInputValue(value);\n    };\n    /**\n     * Gets the step's description.\n     */\n    FRStep.prototype.getDescription = function () {\n        return this.payload.description;\n    };\n    /**\n     * Gets the step's header.\n     */\n    FRStep.prototype.getHeader = function () {\n        return this.payload.header;\n    };\n    /**\n     * Gets the step's stage.\n     */\n    FRStep.prototype.getStage = function () {\n        return this.payload.stage;\n    };\n    FRStep.prototype.convertCallbacks = function (callbacks, callbackFactory) {\n        var converted = callbacks.map(function (x) {\n            // This gives preference to the provided factory and falls back to our default implementation\n            return (callbackFactory || createCallback)(x) || createCallback(x);\n        });\n        return converted;\n    };\n    return FRStep;\n}());\nexport default FRStep;\n//# sourceMappingURL=fr-step.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport Auth from '../auth/index';\nimport { CallbackType } from '../auth/enums';\nimport FRLoginFailure from './fr-login-failure';\nimport FRLoginSuccess from './fr-login-success';\nimport FRStep from './fr-step';\n/**\n * Provides access to the OpenAM authentication tree API.\n */\nvar FRAuth = /** @class */ (function () {\n    function FRAuth() {\n    }\n    /**\n     * Requests the next step in the authentication tree.\n     *\n     * Call `FRAuth.next()` recursively.  At each step, check for session token or error, otherwise\n     * populate the step's callbacks and call `next()` again.\n     *\n     * Example:\n     *\n     * ```js\n     * async function nextStep(previousStep) {\n     *   const thisStep = await FRAuth.next(previousStep);\n     *\n     *   switch (thisStep.type) {\n     *     case StepType.LoginSuccess:\n     *       const token = thisStep.getSessionToken();\n     *       break;\n     *     case StepType.LoginFailure:\n     *       const detail = thisStep.getDetail();\n     *       break;\n     *     case StepType.Step:\n     *       // Populate `thisStep` callbacks here, and then continue\n     *       thisStep.setInputValue('foo');\n     *       nextStep(thisStep);\n     *       break;\n     *   }\n     * }\n     * ```\n     *\n     * @param previousStep The previous step with its callback values populated\n     * @param options Configuration overrides\n     * @return The next step in the authentication tree\n     */\n    FRAuth.next = function (previousStep, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var nextPayload, callbackFactory;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, Auth.next(previousStep ? previousStep.payload : undefined, options)];\n                    case 1:\n                        nextPayload = _a.sent();\n                        if (nextPayload.authId) {\n                            callbackFactory = options ? options.callbackFactory : undefined;\n                            return [2 /*return*/, new FRStep(nextPayload, callbackFactory)];\n                        }\n                        if (!nextPayload.authId && nextPayload.ok) {\n                            // If there's no authId, and the response is OK, tree is complete\n                            return [2 /*return*/, new FRLoginSuccess(nextPayload)];\n                        }\n                        // If there's no authId, and the response is not OK, tree has failure\n                        return [2 /*return*/, new FRLoginFailure(nextPayload)];\n                }\n            });\n        });\n    };\n    /**\n     * Redirects to the URL identified in the RedirectCallback and saves the full\n     * step information to localStorage for retrieval when user returns from login.\n     *\n     * Example:\n     * ```js\n     * forgerock.FRAuth.redirect(step);\n     * ```\n     */\n    FRAuth.redirect = function (step) {\n        var cb = step.getCallbackOfType(CallbackType.RedirectCallback);\n        var redirectUrl = cb.getRedirectUrl();\n        window.localStorage.setItem(this.previousStepKey, JSON.stringify(step));\n        window.location.assign(redirectUrl);\n    };\n    /**\n     * Resumes a tree after returning from an external client or provider.\n     * Requires the full URL of the current window. It will parse URL for\n     * key-value pairs as well as, if required, retrieves previous step.\n     *\n     * Example;\n     * ```js\n     * forgerock.FRAuth.resume(window.location.href)\n     * ```\n     */\n    FRAuth.resume = function (url, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            function requiresPreviousStep() {\n                return (code && state) || form_post_entry;\n            }\n            var parsedUrl, code, form_post_entry, nonce, scope, state, suspendedId, previousStep, redirectStepString, nextOptions;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        parsedUrl = new URL(url);\n                        code = parsedUrl.searchParams.get('code');\n                        form_post_entry = parsedUrl.searchParams.get('form_post_entry');\n                        nonce = parsedUrl.searchParams.get('nonce');\n                        scope = parsedUrl.searchParams.get('scope');\n                        state = parsedUrl.searchParams.get('state');\n                        suspendedId = parsedUrl.searchParams.get('suspendedId');\n                        /**\n                         * If we are returning back from a provider, the previous redirect step data is required.\n                         * Retrieve the previous step from localStorage, and then delete it to remove stale data.\n                         * If suspendedId is present, no previous step data is needed, so skip below conditional.\n                         */\n                        if (requiresPreviousStep()) {\n                            redirectStepString = window.localStorage.getItem(this.previousStepKey);\n                            if (!redirectStepString) {\n                                throw new Error('Error: could not retrieve original redirect information.');\n                            }\n                            try {\n                                previousStep = JSON.parse(redirectStepString);\n                            }\n                            catch (err) {\n                                throw new Error('Error: could not parse redirect params or step information');\n                            }\n                            window.localStorage.removeItem(this.previousStepKey);\n                        }\n                        nextOptions = __assign(__assign({}, options), { query: __assign(__assign(__assign(__assign(__assign(__assign(__assign({}, (options && options.query)), (code && { code: code })), (form_post_entry && { form_post_entry: form_post_entry })), (nonce && { nonce: nonce })), (scope && { scope: scope })), (state && { state: state })), (suspendedId && { suspendedId: suspendedId })) });\n                        return [4 /*yield*/, this.next(previousStep, nextOptions)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    /**\n     * Requests the first step in the authentication tree.\n     * This is essentially an alias to calling FRAuth.next without a previous step.\n     *\n     * @param options Configuration overrides\n     * @return The next step in the authentication tree\n     */\n    FRAuth.start = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, FRAuth.next(undefined, options)];\n                    case 1: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    FRAuth.previousStepKey = 'FRAuth_PreviousStep';\n    return FRAuth;\n}());\nexport default FRAuth;\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * defaults.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar browserProps = [\n    'userAgent',\n    'appName',\n    'appCodeName',\n    'appVersion',\n    'appMinorVersion',\n    'buildID',\n    'product',\n    'productSub',\n    'vendor',\n    'vendorSub',\n    'browserLanguage',\n];\nvar configurableCategories = [\n    'fontNames',\n    'displayProps',\n    'browserProps',\n    'hardwareProps',\n    'platformProps',\n];\nvar delay = 30 * 1000;\nvar devicePlatforms = {\n    mac: ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'],\n    windows: ['Win32', 'Win64', 'Windows', 'WinCE'],\n    ios: ['iPhone', 'iPad', 'iPod'],\n};\nvar displayProps = ['width', 'height', 'pixelDepth', 'orientation.angle'];\nvar fontNames = [\n    'cursive',\n    'monospace',\n    'serif',\n    'sans-serif',\n    'fantasy',\n    'Arial',\n    'Arial Black',\n    'Arial Narrow',\n    'Arial Rounded MT Bold',\n    'Bookman Old Style',\n    'Bradley Hand ITC',\n    'Century',\n    'Century Gothic',\n    'Comic Sans MS',\n    'Courier',\n    'Courier New',\n    'Georgia',\n    'Gentium',\n    'Impact',\n    'King',\n    'Lucida Console',\n    'Lalit',\n    'Modena',\n    'Monotype Corsiva',\n    'Papyrus',\n    'Tahoma',\n    'TeX',\n    'Times',\n    'Times New Roman',\n    'Trebuchet MS',\n    'Verdana',\n    'Verona',\n];\nvar hardwareProps = [\n    'cpuClass',\n    'deviceMemory',\n    'hardwareConcurrency',\n    'maxTouchPoints',\n    'oscpu',\n];\nvar platformProps = ['language', 'platform', 'userLanguage', 'systemLanguage'];\nexport { browserProps, configurableCategories, delay, devicePlatforms, displayProps, fontNames, hardwareProps, platformProps, };\n//# sourceMappingURL=defaults.js.map","/*\n * @forgerock/javascript-sdk\n *\n * collector.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * @class Collector - base class for FRDevice\n * Generic collector functions for collecting a device profile attributes\n */\nvar Collector = /** @class */ (function () {\n    function Collector() {\n    }\n    /**\n     * @method reduceToObject - goes one to two levels into source to collect attribute\n     * @param props - array of strings; can use dot notation for two level lookup\n     * @param src - source of attributes to check\n     */\n    // eslint-disable-next-line\n    Collector.prototype.reduceToObject = function (props, src) {\n        return props.reduce(function (prev, curr) {\n            if (curr.includes('.')) {\n                var propArr = curr.split('.');\n                var prop1 = propArr[0];\n                var prop2 = propArr[1];\n                var prop = src[prop1] && src[prop1][prop2];\n                prev[prop2] = prop != undefined ? prop : '';\n            }\n            else {\n                prev[curr] = src[curr] != undefined ? src[curr] : null;\n            }\n            return prev;\n        }, {});\n    };\n    /**\n     * @method reduceToString - goes one level into source to collect attribute\n     * @param props - array of strings\n     * @param src - source of attributes to check\n     */\n    // eslint-disable-next-line\n    Collector.prototype.reduceToString = function (props, src) {\n        return props.reduce(function (prev, curr) {\n            prev = \"\".concat(prev).concat(src[curr].filename, \";\");\n            return prev;\n        }, '');\n    };\n    return Collector;\n}());\nexport default Collector;\n//# sourceMappingURL=collector.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { browserProps, configurableCategories, delay, devicePlatforms, displayProps, fontNames, hardwareProps, platformProps, } from './defaults';\nimport Collector from './collector';\n/**\n * @class FRDevice - Collects user device metadata\n *\n * Example:\n *\n * ```js\n * // Instantiate new device object (w/optional config, if needed)\n * const device = new forgerock.FRDevice(\n *   // optional configuration\n * );\n * // override any instance methods, if needed\n * // e.g.: device.getDisplayMeta = () => {};\n *\n * // Call getProfile with required argument obj of boolean properties\n * // of location and metadata\n * const profile = await device.getProfile({\n *   location: isLocationRequired,\n *   metadata: isMetadataRequired,\n * });\n * ```\n */\nvar FRDevice = /** @class */ (function (_super) {\n    __extends(FRDevice, _super);\n    function FRDevice(config) {\n        var _this = _super.call(this) || this;\n        _this.config = {\n            fontNames: fontNames,\n            devicePlatforms: devicePlatforms,\n            displayProps: displayProps,\n            browserProps: browserProps,\n            hardwareProps: hardwareProps,\n            platformProps: platformProps,\n        };\n        if (config) {\n            Object.keys(config).forEach(function (key) {\n                if (!configurableCategories.includes(key)) {\n                    throw new Error('Device profile configuration category does not exist.');\n                }\n                _this.config[key] = config[key];\n            });\n        }\n        return _this;\n    }\n    FRDevice.prototype.getBrowserMeta = function () {\n        if (!navigator) {\n            console.warn('Cannot collect browser metadata. navigator is not defined.');\n            return {};\n        }\n        return this.reduceToObject(this.config.browserProps, navigator);\n    };\n    FRDevice.prototype.getBrowserPluginsNames = function () {\n        if (!(navigator && navigator.plugins)) {\n            console.warn('Cannot collect browser plugin information. navigator.plugins is not defined.');\n            return '';\n        }\n        return this.reduceToString(Object.keys(navigator.plugins), navigator.plugins);\n    };\n    FRDevice.prototype.getDeviceName = function () {\n        if (!navigator) {\n            console.warn('Cannot collect device name. navigator is not defined.');\n            return '';\n        }\n        var userAgent = navigator.userAgent;\n        var platform = navigator.platform;\n        switch (true) {\n            case this.config.devicePlatforms.mac.includes(platform):\n                return 'Mac (Browser)';\n            case this.config.devicePlatforms.ios.includes(platform):\n                return \"\".concat(platform, \" (Browser)\");\n            case this.config.devicePlatforms.windows.includes(platform):\n                return 'Windows (Browser)';\n            case /Android/.test(platform) || /Android/.test(userAgent):\n                return 'Android (Browser)';\n            case /CrOS/.test(userAgent) || /Chromebook/.test(userAgent):\n                return 'Chrome OS (Browser)';\n            case /Linux/.test(platform):\n                return 'Linux (Browser)';\n            default:\n                return \"\".concat(platform || 'Unknown', \" (Browser)\");\n        }\n    };\n    FRDevice.prototype.getDisplayMeta = function () {\n        if (!screen) {\n            console.warn('Cannot collect screen information. screen is not defined.');\n        }\n        return this.reduceToObject(this.config.displayProps, screen);\n    };\n    FRDevice.prototype.getHardwareMeta = function () {\n        if (!navigator) {\n            console.warn('Cannot collect OS metadata. Navigator is not defined.');\n            return {};\n        }\n        return this.reduceToObject(this.config.hardwareProps, navigator);\n    };\n    FRDevice.prototype.getIdentifier = function () {\n        if (!(window.crypto && window.crypto.getRandomValues)) {\n            console.warn('Cannot generate profile ID. Crypto and/or getRandomValues is not supported.');\n            return '';\n        }\n        if (!localStorage) {\n            console.warn('Cannot store profile ID. localStorage is not supported.');\n            return '';\n        }\n        var id = localStorage.getItem('profile-id');\n        if (!id) {\n            // generate ID, 3 sections of random numbers: \"714524572-2799534390-3707617532\"\n            id = window.crypto.getRandomValues(new Uint32Array(3)).join('-');\n            localStorage.setItem('profile-id', id);\n        }\n        return id;\n    };\n    FRDevice.prototype.getInstalledFonts = function () {\n        var canvas = document.createElement('canvas');\n        if (!canvas) {\n            console.warn('Cannot collect font data. Browser does not support canvas element');\n            return '';\n        }\n        var context = canvas.getContext && canvas.getContext('2d');\n        if (!context) {\n            console.warn('Cannot collect font data. Browser does not support 2d canvas context');\n            return '';\n        }\n        var text = 'abcdefghi0123456789';\n        context.font = '72px Comic Sans';\n        var baseWidth = context.measureText(text).width;\n        var installedFonts = this.config.fontNames.reduce(function (prev, curr) {\n            context.font = \"72px \".concat(curr, \", Comic Sans\");\n            var newWidth = context.measureText(text).width;\n            if (newWidth !== baseWidth) {\n                prev = \"\".concat(prev).concat(curr, \";\");\n            }\n            return prev;\n        }, '');\n        return installedFonts;\n    };\n    FRDevice.prototype.getLocationCoordinates = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (!(navigator && navigator.geolocation)) {\n                    console.warn('Cannot collect geolocation information. navigator.geolocation is not defined.');\n                    return [2 /*return*/, Promise.resolve({})];\n                }\n                // eslint-disable-next-line no-async-promise-executor\n                return [2 /*return*/, new Promise(function (resolve) { return __awaiter(_this, void 0, void 0, function () {\n                        return __generator(this, function (_a) {\n                            navigator.geolocation.getCurrentPosition(function (position) {\n                                return resolve({\n                                    latitude: position.coords.latitude,\n                                    longitude: position.coords.longitude,\n                                });\n                            }, function (error) {\n                                console.warn('Cannot collect geolocation information. ' + error.code + ': ' + error.message);\n                                resolve({});\n                            }, {\n                                enableHighAccuracy: true,\n                                timeout: delay,\n                                maximumAge: 0,\n                            });\n                            return [2 /*return*/];\n                        });\n                    }); })];\n            });\n        });\n    };\n    FRDevice.prototype.getOSMeta = function () {\n        if (!navigator) {\n            console.warn('Cannot collect OS metadata. navigator is not defined.');\n            return {};\n        }\n        return this.reduceToObject(this.config.platformProps, navigator);\n    };\n    FRDevice.prototype.getProfile = function (_a) {\n        var location = _a.location, metadata = _a.metadata;\n        return __awaiter(this, void 0, void 0, function () {\n            var profile, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        profile = {\n                            identifier: this.getIdentifier(),\n                        };\n                        if (metadata) {\n                            profile.metadata = {\n                                hardware: __assign(__assign({}, this.getHardwareMeta()), { display: this.getDisplayMeta() }),\n                                browser: __assign(__assign({}, this.getBrowserMeta()), { plugins: this.getBrowserPluginsNames() }),\n                                platform: __assign(__assign({}, this.getOSMeta()), { deviceName: this.getDeviceName(), fonts: this.getInstalledFonts(), timezone: this.getTimezoneOffset() }),\n                            };\n                        }\n                        if (!location) return [3 /*break*/, 2];\n                        _b = profile;\n                        return [4 /*yield*/, this.getLocationCoordinates()];\n                    case 1:\n                        _b.location = _c.sent();\n                        _c.label = 2;\n                    case 2: return [2 /*return*/, profile];\n                }\n            });\n        });\n    };\n    FRDevice.prototype.getTimezoneOffset = function () {\n        try {\n            return new Date().getTimezoneOffset();\n        }\n        catch (err) {\n            console.warn('Cannot collect timezone information. getTimezoneOffset is not defined.');\n            return null;\n        }\n    };\n    return FRDevice;\n}(Collector));\nexport default FRDevice;\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * constants.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * @module\n * @ignore\n * These are private constants for TokenStorage\n */\nvar DB_NAME = 'forgerock-sdk';\n/** @hidden */\nvar TOKEN_KEY = 'tokens';\nexport { DB_NAME, TOKEN_KEY };\n//# sourceMappingURL=constants.js.map","/*\n * @forgerock/javascript-sdk\n *\n * indexed-db.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { DB_NAME, TOKEN_KEY } from './constants';\n/**\n * Provides wrapper for tokens with IndexedDB.\n */\nvar IndexedDBWrapper = /** @class */ (function () {\n    function IndexedDBWrapper() {\n    }\n    /**\n     * Retrieve tokens.\n     */\n    IndexedDBWrapper.get = function (clientId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var onError = function () { return reject(); };\n                        var openReq = window.indexedDB.open(DB_NAME);\n                        openReq.onsuccess = function () {\n                            if (!openReq.result.objectStoreNames.contains(clientId)) {\n                                openReq.result.close();\n                                return reject('Client ID not found');\n                            }\n                            var getReq = openReq.result\n                                .transaction(clientId, 'readonly')\n                                .objectStore(clientId)\n                                .get(TOKEN_KEY);\n                            getReq.onsuccess = function (event) {\n                                if (!event || !event.target) {\n                                    throw new Error('Missing storage event target');\n                                }\n                                openReq.result.close();\n                                resolve(event.target.result);\n                            };\n                            getReq.onerror = onError;\n                        };\n                        openReq.onupgradeneeded = function () {\n                            openReq.result.close();\n                            reject('IndexedDB upgrade needed');\n                        };\n                        openReq.onerror = onError;\n                    })];\n            });\n        });\n    };\n    /**\n     * Saves tokens.\n     */\n    IndexedDBWrapper.set = function (clientId, tokens) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var openReq = window.indexedDB.open(DB_NAME);\n                        var onSetSuccess = function () {\n                            openReq.result.close();\n                            resolve();\n                        };\n                        var onError = function () { return reject(); };\n                        var onUpgradeNeeded = function () {\n                            openReq.result.createObjectStore(clientId);\n                        };\n                        var onOpenSuccess = function () {\n                            if (!openReq.result.objectStoreNames.contains(clientId)) {\n                                var version = openReq.result.version + 1;\n                                openReq.result.close();\n                                openReq = window.indexedDB.open(DB_NAME, version);\n                                openReq.onupgradeneeded = onUpgradeNeeded;\n                                openReq.onsuccess = onOpenSuccess;\n                                openReq.onerror = onError;\n                                return;\n                            }\n                            var txnReq = openReq.result.transaction(clientId, 'readwrite');\n                            txnReq.onerror = onError;\n                            var objectStore = txnReq.objectStore(clientId);\n                            var putReq = objectStore.put(tokens, TOKEN_KEY);\n                            putReq.onsuccess = onSetSuccess;\n                            putReq.onerror = onError;\n                        };\n                        openReq.onupgradeneeded = onUpgradeNeeded;\n                        openReq.onsuccess = onOpenSuccess;\n                        openReq.onerror = onError;\n                    })];\n            });\n        });\n    };\n    /**\n     * Removes stored tokens.\n     */\n    IndexedDBWrapper.remove = function (clientId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        var onError = function () { return reject(); };\n                        var openReq = window.indexedDB.open(DB_NAME);\n                        openReq.onsuccess = function () {\n                            if (!openReq.result.objectStoreNames.contains(clientId)) {\n                                return resolve();\n                            }\n                            var removeReq = openReq.result\n                                .transaction(clientId, 'readwrite')\n                                .objectStore(clientId)\n                                .delete(TOKEN_KEY);\n                            removeReq.onsuccess = function () {\n                                resolve();\n                            };\n                            removeReq.onerror = onError;\n                        };\n                        openReq.onerror = onError;\n                    })];\n            });\n        });\n    };\n    return IndexedDBWrapper;\n}());\nexport default IndexedDBWrapper;\n//# sourceMappingURL=indexed-db.js.map","/*\n * @forgerock/javascript-sdk\n *\n * local-storage.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { DB_NAME } from './constants';\n/**\n * Provides wrapper for tokens with localStorage.\n */\nvar LocalStorageWrapper = /** @class */ (function () {\n    function LocalStorageWrapper() {\n    }\n    /**\n     * Retrieve tokens.\n     */\n    LocalStorageWrapper.get = function (clientId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenString;\n            return __generator(this, function (_a) {\n                tokenString = localStorage.getItem(\"\".concat(DB_NAME, \"-\").concat(clientId));\n                try {\n                    return [2 /*return*/, Promise.resolve(JSON.parse(tokenString || ''))];\n                }\n                catch (err) {\n                    console.warn('Could not parse token from localStorage. This could be due to accessing a removed token');\n                    // Original behavior had an untyped return of undefined for no token\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore\n                    return [2 /*return*/, undefined];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n     * Saves tokens.\n     */\n    LocalStorageWrapper.set = function (clientId, tokens) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenString;\n            return __generator(this, function (_a) {\n                tokenString = JSON.stringify(tokens);\n                localStorage.setItem(\"\".concat(DB_NAME, \"-\").concat(clientId), tokenString);\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n     * Removes stored tokens.\n     */\n    LocalStorageWrapper.remove = function (clientId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                localStorage.removeItem(\"\".concat(DB_NAME, \"-\").concat(clientId));\n                return [2 /*return*/];\n            });\n        });\n    };\n    return LocalStorageWrapper;\n}());\nexport default LocalStorageWrapper;\n//# sourceMappingURL=local-storage.js.map","/*\n * @forgerock/javascript-sdk\n *\n * session-storage.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { DB_NAME } from './constants';\n/**\n * Provides wrapper for tokens with sessionStorage.\n */\nvar SessionStorageWrapper = /** @class */ (function () {\n    function SessionStorageWrapper() {\n    }\n    /**\n     * Retrieve tokens.\n     */\n    SessionStorageWrapper.get = function (clientId) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenString;\n            return __generator(this, function (_a) {\n                tokenString = sessionStorage.getItem(\"\".concat(DB_NAME, \"-\").concat(clientId));\n                try {\n                    return [2 /*return*/, Promise.resolve(JSON.parse(tokenString || ''))];\n                }\n                catch (err) {\n                    console.warn('Could not parse token from sessionStorage. This could be due to accessing a removed token');\n                    // Original behavior had an untyped return of undefined for no token\n                    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                    // @ts-ignore\n                    return [2 /*return*/, undefined];\n                }\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n     * Saves tokens.\n     */\n    SessionStorageWrapper.set = function (clientId, tokens) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenString;\n            return __generator(this, function (_a) {\n                tokenString = JSON.stringify(tokens);\n                sessionStorage.setItem(\"\".concat(DB_NAME, \"-\").concat(clientId), tokenString);\n                return [2 /*return*/];\n            });\n        });\n    };\n    /**\n     * Removes stored tokens.\n     */\n    SessionStorageWrapper.remove = function (clientId) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                sessionStorage.removeItem(\"\".concat(DB_NAME, \"-\").concat(clientId));\n                return [2 /*return*/];\n            });\n        });\n    };\n    return SessionStorageWrapper;\n}());\nexport default SessionStorageWrapper;\n//# sourceMappingURL=session-storage.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020-2021 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport Config from '../config/index';\nimport IndexedDBWrapper from './indexed-db';\nimport LocalStorageWrapper from './local-storage';\nimport SessionStorageWrapper from './session-storage';\n/**\n * Provides access to the token storage API.\n * The type of storage (localStorage, sessionStorage, etc) can be configured\n * through `tokenStore` object on the SDK configuration.\n */\nvar TokenStorage = /** @class */ (function () {\n    function TokenStorage() {\n    }\n    /**\n     * Gets stored tokens.\n     */\n    TokenStorage.get = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, clientId, tokenStore;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.getClientConfig(), clientId = _a.clientId, tokenStore = _a.tokenStore;\n                        if (!(tokenStore === 'sessionStorage')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, SessionStorageWrapper.get(clientId)];\n                    case 1: return [2 /*return*/, _b.sent()];\n                    case 2:\n                        if (!(tokenStore === 'localStorage')) return [3 /*break*/, 4];\n                        return [4 /*yield*/, LocalStorageWrapper.get(clientId)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                    case 4:\n                        if (!(tokenStore === 'indexedDB')) return [3 /*break*/, 6];\n                        return [4 /*yield*/, IndexedDBWrapper.get(clientId)];\n                    case 5: return [2 /*return*/, _b.sent()];\n                    case 6:\n                        if (!(tokenStore && tokenStore.get)) return [3 /*break*/, 8];\n                        return [4 /*yield*/, tokenStore.get(clientId)];\n                    case 7: \n                    // User supplied token store\n                    return [2 /*return*/, _b.sent()];\n                    case 8: return [4 /*yield*/, LocalStorageWrapper.get(clientId)];\n                    case 9: \n                    // if tokenStore is undefined, default to localStorage\n                    return [2 /*return*/, _b.sent()];\n                }\n            });\n        });\n    };\n    /**\n     * Saves tokens.\n     */\n    TokenStorage.set = function (tokens) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, clientId, tokenStore;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.getClientConfig(), clientId = _a.clientId, tokenStore = _a.tokenStore;\n                        if (!(tokenStore === 'sessionStorage')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, SessionStorageWrapper.set(clientId, tokens)];\n                    case 1: return [2 /*return*/, _b.sent()];\n                    case 2:\n                        if (!(tokenStore === 'localStorage')) return [3 /*break*/, 4];\n                        return [4 /*yield*/, LocalStorageWrapper.set(clientId, tokens)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                    case 4:\n                        if (!(tokenStore === 'indexedDB')) return [3 /*break*/, 6];\n                        return [4 /*yield*/, IndexedDBWrapper.set(clientId, tokens)];\n                    case 5: return [2 /*return*/, _b.sent()];\n                    case 6:\n                        if (!(tokenStore && tokenStore.set)) return [3 /*break*/, 8];\n                        return [4 /*yield*/, tokenStore.set(clientId, tokens)];\n                    case 7: \n                    // User supplied token store\n                    return [2 /*return*/, _b.sent()];\n                    case 8: return [4 /*yield*/, LocalStorageWrapper.set(clientId, tokens)];\n                    case 9: \n                    // if tokenStore is undefined, default to localStorage\n                    return [2 /*return*/, _b.sent()];\n                }\n            });\n        });\n    };\n    /**\n     * Removes stored tokens.\n     */\n    TokenStorage.remove = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, clientId, tokenStore;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = this.getClientConfig(), clientId = _a.clientId, tokenStore = _a.tokenStore;\n                        if (!(tokenStore === 'sessionStorage')) return [3 /*break*/, 2];\n                        return [4 /*yield*/, SessionStorageWrapper.remove(clientId)];\n                    case 1: return [2 /*return*/, _b.sent()];\n                    case 2:\n                        if (!(tokenStore === 'localStorage')) return [3 /*break*/, 4];\n                        return [4 /*yield*/, LocalStorageWrapper.remove(clientId)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                    case 4:\n                        if (!(tokenStore === 'indexedDB')) return [3 /*break*/, 6];\n                        return [4 /*yield*/, IndexedDBWrapper.remove(clientId)];\n                    case 5: return [2 /*return*/, _b.sent()];\n                    case 6:\n                        if (!(tokenStore && tokenStore.remove)) return [3 /*break*/, 8];\n                        return [4 /*yield*/, tokenStore.remove(clientId)];\n                    case 7: \n                    // User supplied token store\n                    return [2 /*return*/, _b.sent()];\n                    case 8: return [4 /*yield*/, LocalStorageWrapper.remove(clientId)];\n                    case 9: \n                    // if tokenStore is undefined, default to localStorage\n                    return [2 /*return*/, _b.sent()];\n                }\n            });\n        });\n    };\n    TokenStorage.getClientConfig = function () {\n        var _a = Config.get(), clientId = _a.clientId, tokenStore = _a.tokenStore;\n        if (!clientId) {\n            throw new Error('clientId is required to manage token storage');\n        }\n        return { clientId: clientId, tokenStore: tokenStore };\n    };\n    return TokenStorage;\n}());\nexport default TokenStorage;\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * http.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * @module\n * @ignore\n * These are private utility functions\n */\nfunction isOkOr4xx(response) {\n    return response.ok || Math.floor(response.status / 100) === 4;\n}\nexport { isOkOr4xx };\n//# sourceMappingURL=http.js.map","/*\n * @forgerock/javascript-sdk\n *\n * pkce.ts\n *\n * Copyright (c) 2020-2021 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\n/**\n * Helper class for generating verifier, challenge and state strings used for\n * Proof Key for Code Exchange (PKCE).\n */\nvar PKCE = /** @class */ (function () {\n    function PKCE() {\n    }\n    /**\n     * Creates a random state.\n     */\n    PKCE.createState = function () {\n        return this.createRandomString(16);\n    };\n    /**\n     * Creates a random verifier.\n     */\n    PKCE.createVerifier = function () {\n        return this.createRandomString(32);\n    };\n    /**\n     * Creates a SHA-256 hash of the verifier.\n     *\n     * @param verifier The verifier to hash\n     */\n    PKCE.createChallenge = function (verifier) {\n        return __awaiter(this, void 0, void 0, function () {\n            var sha256, challenge;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.sha256(verifier)];\n                    case 1:\n                        sha256 = _a.sent();\n                        challenge = this.base64UrlEncode(sha256);\n                        return [2 /*return*/, challenge];\n                }\n            });\n        });\n    };\n    /**\n     * Creates a base64 encoded, URL-friendly version of the specified array.\n     *\n     * @param array The array of numbers to encode\n     */\n    PKCE.base64UrlEncode = function (array) {\n        var numbers = Array.prototype.slice.call(array);\n        var ascii = window.btoa(String.fromCharCode.apply(null, numbers));\n        var urlEncoded = ascii.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n        return urlEncoded;\n    };\n    /**\n     * Creates a SHA-256 hash of the specified string.\n     *\n     * @param value The string to hash\n     */\n    PKCE.sha256 = function (value) {\n        return __awaiter(this, void 0, void 0, function () {\n            var uint8Array, hashBuffer, hashArray;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        uint8Array = new TextEncoder().encode(value);\n                        return [4 /*yield*/, window.crypto.subtle.digest('SHA-256', uint8Array)];\n                    case 1:\n                        hashBuffer = _a.sent();\n                        hashArray = new Uint8Array(hashBuffer);\n                        return [2 /*return*/, hashArray];\n                }\n            });\n        });\n    };\n    /**\n     * Creates a random string.\n     *\n     * @param size The number for entropy (default: 32)\n     */\n    PKCE.createRandomString = function (num) {\n        if (num === void 0) { num = 32; }\n        var random = new Uint8Array(num);\n        window.crypto.getRandomValues(random);\n        return btoa(random.join('')).replace(/[^a-zA-Z0-9]+/, '');\n    };\n    return PKCE;\n}());\nexport default PKCE;\n//# sourceMappingURL=pkce.js.map","/*\n * @forgerock/javascript-sdk\n *\n * enums.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * Specifies the type of OAuth flow to invoke.\n */\nvar ResponseType;\n(function (ResponseType) {\n    ResponseType[\"Code\"] = \"code\";\n    ResponseType[\"Token\"] = \"token\";\n})(ResponseType || (ResponseType = {}));\nexport { ResponseType };\n//# sourceMappingURL=enums.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020-2021 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { ActionTypes } from '../config/enums';\nimport Config from '../config/index';\nimport TokenStorage from '../token-storage';\nimport { isOkOr4xx } from '../util/http';\nimport PKCE from '../util/pkce';\nimport { withTimeout } from '../util/timeout';\nimport { getEndpointPath, resolve, stringify } from '../util/url';\nimport { ResponseType } from './enums';\nimport middlewareWrapper from '../util/middleware';\nvar allowedErrors = {\n    // AM error for consent requirement\n    AuthenticationConsentRequired: 'Authentication or consent required',\n    // Manual iframe error\n    AuthorizationTimeout: 'Authorization timed out',\n    // Chromium browser error\n    FailedToFetch: 'Failed to fetch',\n    // Mozilla browser error\n    NetworkError: 'NetworkError when attempting to fetch resource.',\n    // Webkit browser error\n    CORSError: 'Cross-origin redirection',\n};\n/**\n * OAuth 2.0 client.\n */\nvar OAuth2Client = /** @class */ (function () {\n    function OAuth2Client() {\n    }\n    OAuth2Client.createAuthorizeUrl = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, clientId, middleware, redirectUri, scope, requestParams, challenge, runMiddleware, url;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = Config.get(options), clientId = _a.clientId, middleware = _a.middleware, redirectUri = _a.redirectUri, scope = _a.scope;\n                        requestParams = __assign(__assign({}, options.query), { client_id: clientId, redirect_uri: redirectUri, response_type: options.responseType, scope: scope, state: options.state });\n                        if (!options.verifier) return [3 /*break*/, 2];\n                        return [4 /*yield*/, PKCE.createChallenge(options.verifier)];\n                    case 1:\n                        challenge = _b.sent();\n                        requestParams.code_challenge = challenge;\n                        requestParams.code_challenge_method = 'S256';\n                        _b.label = 2;\n                    case 2:\n                        runMiddleware = middlewareWrapper({\n                            url: new URL(this.getUrl('authorize', requestParams, options)),\n                            init: {},\n                        }, { type: ActionTypes.Authorize });\n                        url = runMiddleware(middleware).url;\n                        return [2 /*return*/, url.toString()];\n                }\n            });\n        });\n    };\n    /**\n     * Calls the authorize URL with an iframe. If successful,\n     * it returns the callback URL with authentication code,\n     * optionally using PKCE.\n     * Method renamed in v3.\n     * Original Name: getAuthorizeUrl\n     * New Name: getAuthCodeByIframe\n     */\n    OAuth2Client.getAuthCodeByIframe = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var url, serverConfig;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.createAuthorizeUrl(options)];\n                    case 1:\n                        url = _a.sent();\n                        serverConfig = Config.get(options).serverConfig;\n                        return [2 /*return*/, new Promise(function (resolve, reject) {\n                                var iframe = document.createElement('iframe');\n                                // Define these here to avoid linter warnings\n                                var noop = function () {\n                                    return;\n                                };\n                                var onLoad = noop;\n                                var cleanUp = noop;\n                                var timeout = 0;\n                                cleanUp = function () {\n                                    window.clearTimeout(timeout);\n                                    iframe.removeEventListener('load', onLoad);\n                                    iframe.remove();\n                                };\n                                onLoad = function () {\n                                    if (iframe.contentWindow) {\n                                        var newHref = iframe.contentWindow.location.href;\n                                        if (_this.containsAuthCode(newHref)) {\n                                            cleanUp();\n                                            resolve(newHref);\n                                        }\n                                        else if (_this.containsAuthError(newHref)) {\n                                            cleanUp();\n                                            resolve(newHref);\n                                        }\n                                    }\n                                };\n                                timeout = window.setTimeout(function () {\n                                    cleanUp();\n                                    reject(new Error(allowedErrors.AuthorizationTimeout));\n                                }, serverConfig.timeout);\n                                iframe.style.display = 'none';\n                                iframe.addEventListener('load', onLoad);\n                                document.body.appendChild(iframe);\n                                iframe.src = url;\n                            })];\n                }\n            });\n        });\n    };\n    /**\n     * Exchanges an authorization code for OAuth tokens.\n     */\n    OAuth2Client.getOAuth2Tokens = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, clientId, redirectUri, requestParams, body, init, response, responseBody, message, responseObject, tokenExpiry;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = Config.get(options), clientId = _a.clientId, redirectUri = _a.redirectUri;\n                        requestParams = {\n                            client_id: clientId,\n                            code: options.authorizationCode,\n                            grant_type: 'authorization_code',\n                            redirect_uri: redirectUri,\n                        };\n                        if (options.verifier) {\n                            requestParams.code_verifier = options.verifier;\n                        }\n                        body = stringify(requestParams);\n                        init = {\n                            body: body,\n                            headers: new Headers({\n                                'content-length': body.length.toString(),\n                                'content-type': 'application/x-www-form-urlencoded',\n                            }),\n                            method: 'POST',\n                        };\n                        return [4 /*yield*/, this.request('accessToken', undefined, false, init, options)];\n                    case 1:\n                        response = _b.sent();\n                        return [4 /*yield*/, this.getBody(response)];\n                    case 2:\n                        responseBody = _b.sent();\n                        if (response.status !== 200) {\n                            message = typeof responseBody === 'string'\n                                ? \"Expected 200, received \".concat(response.status)\n                                : this.parseError(responseBody);\n                            throw new Error(message);\n                        }\n                        responseObject = responseBody;\n                        if (!responseObject.access_token) {\n                            throw new Error('Access token not found in response');\n                        }\n                        tokenExpiry = undefined;\n                        if (responseObject.expires_in) {\n                            tokenExpiry = Date.now() + responseObject.expires_in * 1000;\n                        }\n                        return [2 /*return*/, {\n                                accessToken: responseObject.access_token,\n                                idToken: responseObject.id_token,\n                                refreshToken: responseObject.refresh_token,\n                                tokenExpiry: tokenExpiry,\n                            }];\n                }\n            });\n        });\n    };\n    /**\n     * Gets OIDC user information.\n     */\n    OAuth2Client.getUserInfo = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, json;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.request('userInfo', undefined, true, undefined, options)];\n                    case 1:\n                        response = _a.sent();\n                        if (response.status !== 200) {\n                            throw new Error(\"Failed to get user info; received \".concat(response.status));\n                        }\n                        return [4 /*yield*/, response.json()];\n                    case 2:\n                        json = _a.sent();\n                        return [2 /*return*/, json];\n                }\n            });\n        });\n    };\n    /**\n     * Invokes the OIDC end session endpoint.\n     */\n    OAuth2Client.endSession = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var idToken, query, response;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, TokenStorage.get()];\n                    case 1:\n                        idToken = (_a.sent()).idToken;\n                        query = {};\n                        if (idToken) {\n                            query.id_token_hint = idToken;\n                        }\n                        return [4 /*yield*/, this.request('endSession', query, true, undefined, options)];\n                    case 2:\n                        response = _a.sent();\n                        if (!isOkOr4xx(response)) {\n                            throw new Error(\"Failed to end session; received \".concat(response.status));\n                        }\n                        return [2 /*return*/, response];\n                }\n            });\n        });\n    };\n    /**\n     * Immediately revokes the stored access token.\n     */\n    OAuth2Client.revokeToken = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var clientId, accessToken, init, response;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        clientId = Config.get(options).clientId;\n                        return [4 /*yield*/, TokenStorage.get()];\n                    case 1:\n                        accessToken = (_a.sent()).accessToken;\n                        init = {\n                            body: stringify({ client_id: clientId, token: accessToken }),\n                            credentials: 'include',\n                            headers: new Headers({ 'content-type': 'application/x-www-form-urlencoded' }),\n                            method: 'POST',\n                        };\n                        return [4 /*yield*/, this.request('revoke', undefined, false, init, options)];\n                    case 2:\n                        response = _a.sent();\n                        if (!isOkOr4xx(response)) {\n                            throw new Error(\"Failed to revoke token; received \".concat(response.status));\n                        }\n                        return [2 /*return*/, response];\n                }\n            });\n        });\n    };\n    OAuth2Client.request = function (endpoint, query, includeToken, init, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, middleware, serverConfig, url, getActionType, accessToken, runMiddleware, req;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = Config.get(options), middleware = _a.middleware, serverConfig = _a.serverConfig;\n                        url = this.getUrl(endpoint, query, options);\n                        getActionType = function (endpoint) {\n                            switch (endpoint) {\n                                case 'accessToken':\n                                    return ActionTypes.ExchangeToken;\n                                case 'endSession':\n                                    return ActionTypes.EndSession;\n                                case 'revoke':\n                                    return ActionTypes.RevokeToken;\n                                default:\n                                    return ActionTypes.UserInfo;\n                            }\n                        };\n                        init = init || {};\n                        if (!includeToken) return [3 /*break*/, 2];\n                        return [4 /*yield*/, TokenStorage.get()];\n                    case 1:\n                        accessToken = (_b.sent()).accessToken;\n                        init.credentials = 'include';\n                        init.headers = (init.headers || new Headers());\n                        init.headers.set('authorization', \"Bearer \".concat(accessToken));\n                        _b.label = 2;\n                    case 2:\n                        runMiddleware = middlewareWrapper({ url: new URL(url), init: init }, { type: getActionType(endpoint) });\n                        req = runMiddleware(middleware);\n                        return [4 /*yield*/, withTimeout(fetch(req.url.toString(), req.init), serverConfig.timeout)];\n                    case 3: return [2 /*return*/, _b.sent()];\n                }\n            });\n        });\n    };\n    OAuth2Client.containsAuthCode = function (url) {\n        return !!url && /code=([^&]+)/.test(url);\n    };\n    OAuth2Client.containsAuthError = function (url) {\n        return !!url && /error=([^&]+)/.test(url);\n    };\n    OAuth2Client.getBody = function (response) {\n        return __awaiter(this, void 0, void 0, function () {\n            var contentType;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        contentType = response.headers.get('content-type');\n                        if (!(contentType && contentType.indexOf('application/json') > -1)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, response.json()];\n                    case 1: return [2 /*return*/, _a.sent()];\n                    case 2: return [4 /*yield*/, response.text()];\n                    case 3: return [2 /*return*/, _a.sent()];\n                }\n            });\n        });\n    };\n    OAuth2Client.parseError = function (json) {\n        if (json) {\n            if (json.error && json.error_description) {\n                return \"\".concat(json.error, \": \").concat(json.error_description);\n            }\n            if (json.code && json.message) {\n                return \"\".concat(json.code, \": \").concat(json.message);\n            }\n        }\n        return undefined;\n    };\n    OAuth2Client.getUrl = function (endpoint, query, options) {\n        var _a = Config.get(options), realmPath = _a.realmPath, serverConfig = _a.serverConfig;\n        var path = getEndpointPath(endpoint, realmPath, serverConfig.paths);\n        var url = resolve(serverConfig.baseUrl, path);\n        if (query) {\n            url += \"?\".concat(stringify(query));\n        }\n        return url;\n    };\n    return OAuth2Client;\n}());\nexport default OAuth2Client;\nexport { allowedErrors, ResponseType, };\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport Config from '../config/index';\nimport { REQUESTED_WITH } from '../shared/constants';\nimport { isOkOr4xx } from '../util/http';\nimport { withTimeout } from '../util/timeout';\nimport { ActionTypes } from '../config/enums';\nimport middlewareWrapper from '../util/middleware';\nimport { getEndpointPath, resolve } from '../util/url';\n/**\n * Provides access to the session management API.\n */\nvar SessionManager = /** @class */ (function () {\n    function SessionManager() {\n    }\n    /**\n     * Ends the current session.\n     */\n    SessionManager.logout = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, middleware, realmPath, serverConfig, init, path, url, runMiddleware, req, response;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        _a = Config.get(options), middleware = _a.middleware, realmPath = _a.realmPath, serverConfig = _a.serverConfig;\n                        init = {\n                            credentials: 'include',\n                            headers: new Headers({\n                                'accept-api-version': 'protocol=1.0,resource=2.0',\n                                'x-requested-with': REQUESTED_WITH,\n                            }),\n                            method: 'POST',\n                        };\n                        path = \"\".concat(getEndpointPath('sessions', realmPath, serverConfig.paths), \"?_action=logout\");\n                        url = resolve(serverConfig.baseUrl, path);\n                        runMiddleware = middlewareWrapper({ url: new URL(url), init: init }, { type: ActionTypes.Logout });\n                        req = runMiddleware(middleware);\n                        return [4 /*yield*/, withTimeout(fetch(req.url.toString(), req.init), serverConfig.timeout)];\n                    case 1:\n                        response = _b.sent();\n                        if (!isOkOr4xx(response)) {\n                            throw new Error(\"Failed to log out; received \".concat(response.status));\n                        }\n                        return [2 /*return*/, response];\n                }\n            });\n        });\n    };\n    return SessionManager;\n}());\nexport default SessionManager;\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020-2021 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport Config from '../config';\nimport middlewareWrapper from '../util/middleware';\nimport OAuth2Client, { allowedErrors, ResponseType } from '../oauth2-client';\nimport TokenStorage from '../token-storage';\nimport PKCE from '../util/pkce';\nimport { withTimeout } from '../util/timeout';\nimport { parseQuery } from '../util/url';\nimport { ActionTypes } from '../config/enums';\nimport { tokensWillExpireWithinThreshold } from './helpers';\nvar TokenManager = /** @class */ (function () {\n    function TokenManager() {\n    }\n    /**\n     * Token Manager class that provides high-level abstraction for Authorization Code flow,\n     * PKCE value generation, token exchange and token storage.\n     *\n     * Supports both embedded authentication as well as external authentication via redirects\n     *\n     Example 1:\n  \n     ```js\n     const tokens = forgerock.TokenManager.getTokens({\n       forceRenew: true, // If you want to get new tokens, despite existing ones\n       login: 'embedded', // If user authentication is handled in-app\n       support: 'legacy', // Set globally or locally; `\"legacy\"` or `undefined` will use iframe\n       serverConfig: {\n         timeout: 5000, // If using \"legacy\", use a short timeout to catch error\n       },\n     });\n     ```\n  \n     Example 2:\n  \n     ```js\n     const tokens = forgerock.TokenManager.getTokens({\n       forceRenew: false, // Will immediately return stored tokens, if they exist\n       login: 'redirect', // If user authentication is handled in external Web app\n       support: 'modern', // Set globally or locally; `\"modern\"` will use native fetch\n     });\n     ```\n  \n     Example 3:\n  \n     ```js\n     const tokens = forgerock.TokenManager.getTokens({\n       query: {\n         code: 'lFJQYdoQG1u7nUm8 ... ', // Authorization code from redirect URL\n         state: 'MTY2NDkxNTQ2Nde3D ... ', // State from redirect URL\n       },\n     });\n     ```\n     */\n    TokenManager.getTokens = function (options) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            var tokens, _d, clientId, middleware, serverConfig, support, oauthThreshold, error_1, error_2, storedString, storedValues, verifier, state, authorizeUrlOptions, authorizeUrl, parsedUrl, _e, runMiddleware, init, response, parsedQuery, err_1;\n            return __generator(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        tokens = null;\n                        _d = Config.get(options), clientId = _d.clientId, middleware = _d.middleware, serverConfig = _d.serverConfig, support = _d.support, oauthThreshold = _d.oauthThreshold;\n                        _f.label = 1;\n                    case 1:\n                        _f.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, TokenStorage.get()];\n                    case 2:\n                        tokens = _f.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        error_1 = _f.sent();\n                        console.info('No stored tokens available', error_1);\n                        return [3 /*break*/, 4];\n                    case 4:\n                        /**\n                         * If tokens are stored, no option for `forceRenew` or `query` object with `code`, and do not expire within the configured threshold,\n                         * immediately return the stored tokens\n                         */\n                        if (tokens &&\n                            !(options === null || options === void 0 ? void 0 : options.forceRenew) &&\n                            !((_a = options === null || options === void 0 ? void 0 : options.query) === null || _a === void 0 ? void 0 : _a.code) &&\n                            !tokensWillExpireWithinThreshold(oauthThreshold, tokens.tokenExpiry)) {\n                            return [2 /*return*/, tokens];\n                        }\n                        if (!tokens) return [3 /*break*/, 9];\n                        _f.label = 5;\n                    case 5:\n                        _f.trys.push([5, 8, , 9]);\n                        return [4 /*yield*/, OAuth2Client.revokeToken(options)];\n                    case 6:\n                        _f.sent();\n                        return [4 /*yield*/, TokenManager.deleteTokens()];\n                    case 7:\n                        _f.sent();\n                        return [3 /*break*/, 9];\n                    case 8:\n                        error_2 = _f.sent();\n                        console.warn('Existing tokens could not be revoked or deleted', error_2);\n                        return [3 /*break*/, 9];\n                    case 9:\n                        if (!(((_b = options === null || options === void 0 ? void 0 : options.query) === null || _b === void 0 ? void 0 : _b.code) && ((_c = options === null || options === void 0 ? void 0 : options.query) === null || _c === void 0 ? void 0 : _c.state))) return [3 /*break*/, 11];\n                        storedString = window.sessionStorage.getItem(clientId);\n                        window.sessionStorage.removeItem(clientId);\n                        storedValues = JSON.parse(storedString);\n                        return [4 /*yield*/, this.tokenExchange(options, storedValues)];\n                    case 10: return [2 /*return*/, _f.sent()];\n                    case 11:\n                        verifier = PKCE.createVerifier();\n                        state = PKCE.createState();\n                        authorizeUrlOptions = __assign(__assign({}, options), { responseType: ResponseType.Code, state: state, verifier: verifier });\n                        return [4 /*yield*/, OAuth2Client.createAuthorizeUrl(authorizeUrlOptions)];\n                    case 12:\n                        authorizeUrl = _f.sent();\n                        _f.label = 13;\n                    case 13:\n                        _f.trys.push([13, 18, , 19]);\n                        parsedUrl = void 0;\n                        if (!(support === 'legacy' || support === undefined)) return [3 /*break*/, 15];\n                        _e = URL.bind;\n                        return [4 /*yield*/, OAuth2Client.getAuthCodeByIframe(authorizeUrlOptions)];\n                    case 14:\n                        // To support legacy browsers, iframe works best with short timeout\n                        parsedUrl = new (_e.apply(URL, [void 0, _f.sent()]))();\n                        return [3 /*break*/, 17];\n                    case 15:\n                        runMiddleware = middlewareWrapper({\n                            url: new URL(authorizeUrl),\n                            init: {\n                                credentials: 'include',\n                                mode: 'cors',\n                            },\n                        }, {\n                            type: ActionTypes.Authorize,\n                        });\n                        init = runMiddleware(middleware).init;\n                        return [4 /*yield*/, withTimeout(fetch(authorizeUrl, init), serverConfig.timeout)];\n                    case 16:\n                        response = _f.sent();\n                        parsedUrl = new URL(response.url);\n                        _f.label = 17;\n                    case 17:\n                        // Throw if we have an error param or have no authorization code\n                        if (parsedUrl.searchParams.get('error')) {\n                            throw Error(\"\".concat(parsedUrl.searchParams.get('error_description')));\n                        }\n                        else if (!parsedUrl.searchParams.get('code')) {\n                            throw Error(allowedErrors.AuthenticationConsentRequired);\n                        }\n                        parsedQuery = parseQuery(parsedUrl.toString());\n                        if (!options) {\n                            options = {};\n                        }\n                        options.query = parsedQuery;\n                        return [3 /*break*/, 19];\n                    case 18:\n                        err_1 = _f.sent();\n                        // If authorize request fails, handle according to `login` type\n                        if (!(err_1 instanceof Error) || (options === null || options === void 0 ? void 0 : options.login) !== 'redirect') {\n                            // Throw for any error if login is NOT of type \"redirect\"\n                            throw err_1;\n                        }\n                        // Check if error is not one of our allowed errors\n                        if (allowedErrors.AuthenticationConsentRequired !== err_1.message &&\n                            allowedErrors.AuthorizationTimeout !== err_1.message &&\n                            allowedErrors.FailedToFetch !== err_1.message &&\n                            allowedErrors.NetworkError !== err_1.message &&\n                            // Safari has a very long error message, so we check for a substring\n                            !err_1.message.includes(allowedErrors.CORSError)) {\n                            // Throw if the error is NOT an explicitly allowed error along with redirect of true\n                            // as that is a normal response and just requires a redirect\n                            throw err_1;\n                        }\n                        // Since `login` is configured for \"redirect\", store authorize values and redirect\n                        window.sessionStorage.setItem(clientId, JSON.stringify(authorizeUrlOptions));\n                        return [2 /*return*/, window.location.assign(authorizeUrl)];\n                    case 19: return [4 /*yield*/, this.tokenExchange(options, { state: state, verifier: verifier })];\n                    case 20: \n                    /**\n                     * Exchange authorization code for tokens\n                     */\n                    return [2 /*return*/, _f.sent()];\n                }\n            });\n        });\n    };\n    TokenManager.deleteTokens = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, TokenStorage.remove()];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    TokenManager.tokenExchange = function (options, stored) {\n        var _a, _b, _c, _d;\n        return __awaiter(this, void 0, void 0, function () {\n            var authorizationCode, verifier, getTokensOptions, tokens, error_3;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        /**\n                         * Ensure incoming state and stored state are equal and authorization code exists\n                         */\n                        if (((_a = options.query) === null || _a === void 0 ? void 0 : _a.state) !== stored.state) {\n                            throw new Error('State mismatch');\n                        }\n                        if (!((_b = options.query) === null || _b === void 0 ? void 0 : _b.code) || Array.isArray((_c = options.query) === null || _c === void 0 ? void 0 : _c.code)) {\n                            throw new Error('Failed to acquire authorization code');\n                        }\n                        authorizationCode = (_d = options.query) === null || _d === void 0 ? void 0 : _d.code;\n                        verifier = stored.verifier;\n                        getTokensOptions = __assign(__assign({}, options), { authorizationCode: authorizationCode, verifier: verifier });\n                        return [4 /*yield*/, OAuth2Client.getOAuth2Tokens(getTokensOptions)];\n                    case 1:\n                        tokens = _e.sent();\n                        if (!tokens || !tokens.accessToken) {\n                            throw new Error('Unable to exchange authorization for tokens');\n                        }\n                        _e.label = 2;\n                    case 2:\n                        _e.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, TokenStorage.set(tokens)];\n                    case 3:\n                        _e.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        error_3 = _e.sent();\n                        console.error('Failed to store tokens', error_3);\n                        return [3 /*break*/, 5];\n                    case 5: return [2 /*return*/, tokens];\n                }\n            });\n        });\n    };\n    return TokenManager;\n}());\nexport default TokenManager;\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * enums.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar WebAuthnOutcome;\n(function (WebAuthnOutcome) {\n    WebAuthnOutcome[\"Error\"] = \"ERROR\";\n    WebAuthnOutcome[\"Unsupported\"] = \"unsupported\";\n})(WebAuthnOutcome || (WebAuthnOutcome = {}));\nvar WebAuthnOutcomeType;\n(function (WebAuthnOutcomeType) {\n    WebAuthnOutcomeType[\"AbortError\"] = \"AbortError\";\n    WebAuthnOutcomeType[\"DataError\"] = \"DataError\";\n    WebAuthnOutcomeType[\"ConstraintError\"] = \"ConstraintError\";\n    WebAuthnOutcomeType[\"EncodingError\"] = \"EncodingError\";\n    WebAuthnOutcomeType[\"InvalidError\"] = \"InvalidError\";\n    WebAuthnOutcomeType[\"NetworkError\"] = \"NetworkError\";\n    WebAuthnOutcomeType[\"NotAllowedError\"] = \"NotAllowedError\";\n    WebAuthnOutcomeType[\"NotSupportedError\"] = \"NotSupportedError\";\n    WebAuthnOutcomeType[\"SecurityError\"] = \"SecurityError\";\n    WebAuthnOutcomeType[\"TimeoutError\"] = \"TimeoutError\";\n    WebAuthnOutcomeType[\"UnknownError\"] = \"UnknownError\";\n})(WebAuthnOutcomeType || (WebAuthnOutcomeType = {}));\nvar WebAuthnStepType;\n(function (WebAuthnStepType) {\n    WebAuthnStepType[WebAuthnStepType[\"None\"] = 0] = \"None\";\n    WebAuthnStepType[WebAuthnStepType[\"Authentication\"] = 1] = \"Authentication\";\n    WebAuthnStepType[WebAuthnStepType[\"Registration\"] = 2] = \"Registration\";\n})(WebAuthnStepType || (WebAuthnStepType = {}));\nexport { WebAuthnOutcome, WebAuthnOutcomeType, WebAuthnStepType };\n//# sourceMappingURL=enums.js.map","/*\n * @forgerock/javascript-sdk\n *\n * helpers.ts\n *\n * Copyright (c) 2022 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\n/**\n * @module\n * @ignore\n * These are private utility functions for Token Manager\n */\nexport function tokensWillExpireWithinThreshold(oauthThreshold, tokenExpiry) {\n    if (oauthThreshold && tokenExpiry) {\n        return tokenExpiry - oauthThreshold < Date.now();\n    }\n    return false;\n}\n//# sourceMappingURL=helpers.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nimport OAuth2Client from '../oauth2-client';\n/**\n * Provides access to the current user's profile.\n */\nvar UserManager = /** @class */ (function () {\n    function UserManager() {\n    }\n    /**\n     * Gets the current user's profile.\n     */\n    UserManager.getCurrentUser = function (options) {\n        return OAuth2Client.getUserInfo(options);\n    };\n    return UserManager;\n}());\nexport default UserManager;\n//# sourceMappingURL=index.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport OAuth2Client from '../oauth2-client';\nimport SessionManager from '../session-manager';\nimport TokenManager from '../token-manager';\nimport UserManager from '../user-manager';\n/**\n * High-level API for logging a user in/out and getting profile information.\n */\nvar FRUser = /** @class */ (function () {\n    function FRUser() {\n    }\n    /**\n     * Logs the user in with the specified step handler, acquires OAuth tokens, and retrieves\n     * user profile.  **Currently not implemented.**\n     *\n     * @typeparam T The type of user object expected\n     * @param handler The function to invoke when handling authentication steps\n     * @param options Configuration overrides\n     */\n    FRUser.login = function (handler, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                console.info(handler, options); // Avoid lint errors\n                throw new Error('FRUser.login() not implemented');\n            });\n        });\n    };\n    /**\n     * Logs the user in with the specified UI, acquires OAuth tokens, and retrieves user profile.\n     *\n     * @typeparam T The type of user object expected\n     * @param ui The UI instance to use to acquire a session\n     * @param options Configuration overrides\n     */\n    FRUser.loginWithUI = function (ui, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var currentUser, error_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 4, , 5]);\n                        return [4 /*yield*/, ui.getSession(options)];\n                    case 1:\n                        _a.sent();\n                        return [4 /*yield*/, TokenManager.getTokens({ forceRenew: true })];\n                    case 2:\n                        _a.sent();\n                        return [4 /*yield*/, UserManager.getCurrentUser()];\n                    case 3:\n                        currentUser = _a.sent();\n                        return [2 /*return*/, currentUser];\n                    case 4:\n                        error_1 = _a.sent();\n                        throw new Error('Login failed');\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Ends the user's session and revokes OAuth tokens.\n     *\n     * @param options Configuration overrides\n     */\n    FRUser.logout = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var error_2, error_3, error_4;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        // Both invalidates the session on the server AND removes browser cookie\n                        return [4 /*yield*/, SessionManager.logout(options)];\n                    case 1:\n                        // Both invalidates the session on the server AND removes browser cookie\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        error_2 = _a.sent();\n                        console.warn('Session logout was not successful');\n                        return [3 /*break*/, 3];\n                    case 3:\n                        _a.trys.push([3, 5, , 6]);\n                        // Invalidates session on the server tied to the ID Token\n                        // Needed for Express environment as session logout is unavailable\n                        return [4 /*yield*/, OAuth2Client.endSession(options)];\n                    case 4:\n                        // Invalidates session on the server tied to the ID Token\n                        // Needed for Express environment as session logout is unavailable\n                        _a.sent();\n                        return [3 /*break*/, 6];\n                    case 5:\n                        error_3 = _a.sent();\n                        console.warn('OAuth endSession was not successful');\n                        return [3 /*break*/, 6];\n                    case 6:\n                        _a.trys.push([6, 8, , 9]);\n                        return [4 /*yield*/, OAuth2Client.revokeToken(options)];\n                    case 7:\n                        _a.sent();\n                        return [3 /*break*/, 9];\n                    case 8:\n                        error_4 = _a.sent();\n                        console.warn('OAuth revokeToken was not successful');\n                        return [3 /*break*/, 9];\n                    case 9: return [4 /*yield*/, TokenManager.deleteTokens()];\n                    case 10:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    return FRUser;\n}());\nexport default FRUser;\n//# sourceMappingURL=index.js.map","/* eslint-disable no-useless-escape */\n/*\n * @forgerock/javascript-sdk\n *\n * script-parser.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { WebAuthnOutcomeType } from './enums';\nimport { ensureArray, getIndexOne, parsePubKeyArray, parseCredentials } from './helpers';\nfunction parseWebAuthnRegisterText(text) {\n    var txtEncoder = new TextEncoder();\n    // TODO: Incrementally move to `*` instead of `{0,}`\n    // e.g. `attestation: \"none\"`\n    var attestation = getIndexOne(text.match(/attestation\"{0,}:\\s{0,}\"(\\w+)\"/));\n    // e.g. `timeout: 60000`\n    var timeout = Number(getIndexOne(text.match(/timeout\"{0,}:\\s{0,}(\\d+)/)));\n    // e.g. from 7.0: `\"userVerification\":\"preferred\"`\n    // e.g. from 6.5: `userVerification: \"preferred\"`\n    var userVerification = getIndexOne(text.match(/userVerification\"{0,}:\\s{0,}\"(\\w+)\"/));\n    // e.g. `\"requireResidentKey\":true`\n    var requireResidentKey = getIndexOne(text.match(/requireResidentKey\"{0,}:\\s{0,}(\\w+)/));\n    // e.g. `\"authenticatorAttachment\":\"cross-platform\"`\n    var authenticatorAttachment = getIndexOne(text.match(/authenticatorAttachment\"{0,}:\\s{0,}\"([\\w-]+)/));\n    // e.g. `rp: {\\n id: \\\"https://user.example.com:3002\\\",\\n name: \\\"ForgeRock\\\"\\n }`\n    var rp = getIndexOne(text.match(/rp\"{0,}:\\s{0,}{([^}]+)}/)).trim();\n    // e.g. `id: \\\"example.com\\\"\n    var rpId = getIndexOne(rp.match(/id\"{0,}:\\s{0,}\"([^\"]*)\"/));\n    // e.g. `name: \\\"ForgeRock\\\"`\n    var rpName = getIndexOne(rp.match(/name\"{0,}:\\s{0,}\"([^\"]*)\"/));\n    // e.g. `user: {\\n id: Uint8Array.from(\\\"NTdhN...RiNjI5\\\",\n    // function (c) { return c.charCodeAt(0) }),\\n\n    // name: \\\"57a5b4e4-...-a4f2e5d4b629\\\",\\n\n    // displayName: \\\"57a5b4e4-...-a4f2e5d4b629\\\"\\n }`\n    var user = getIndexOne(text.match(/user\"{0,}:\\s{0,}{([^]{0,})},/)).trim();\n    // e.g `id: Uint8Array.from(\\\"NTdhN...RiNjI5\\\",`\n    var userId = getIndexOne(user.match(/id\"{0,}:\\s{0,}Uint8Array.from\\(\"([^\"]+)\"/));\n    // e.g. `name: \\\"57a5b4e4-...-a4f2e5d4b629\\\",`\n    var userName = getIndexOne(user.match(/name\"{0,}:\\s{0,}\"([\\d\\w._-]+)\"/));\n    // e.g. `displayName: \\\"57a5b4e4-...-a4f2e5d4b629\\\"`\n    var userDisplayName = getIndexOne(user.match(/displayName\"{0,}:\\s{0,}\"([\\d\\w\\s.@_-]+)\"/));\n    // e.g. `pubKeyCredParams: [\n    // { \\\"type\\\": \\\"public-key\\\", \\\"alg\\\": -257 }, { \\\"type\\\": \\\"public-key\\\", \\\"alg\\\": -7 }\n    // ]`\n    var pubKeyCredParamsString = getIndexOne(\n    // Capture the `pubKeyCredParams` without also matching `excludeCredentials` as well.\n    // `excludeCredentials` values are very similar to this property, so we need to make sure\n    // our last value doesn't end with \"buffer\", so we are only capturing objects that\n    // end in a digit and possibly a space.\n    text.match(/pubKeyCredParams\"*:\\s*\\[([^]+\\d\\s*})\\s*]/)).trim();\n    // e.g. `{ \\\"type\\\": \\\"public-key\\\", \\\"alg\\\": -257 }, { \\\"type\\\": \\\"public-key\\\", \\\"alg\\\": -7 }`\n    var pubKeyCredParams = parsePubKeyArray(pubKeyCredParamsString);\n    if (!pubKeyCredParams) {\n        var e = new Error('Missing pubKeyCredParams property from registration options');\n        e.name = WebAuthnOutcomeType.DataError;\n        throw e;\n    }\n    // e.g. `excludeCredentials: [{\n    // \\\"type\\\": \\\"public-key\\\", \\\"id\\\": new Int8Array([-18, 69, -99, 82, 38, -66]).buffer },\n    // { \\\"type\\\": \\\"public-key\\\", \\\"id\\\": new Int8Array([64, 17, -15, 56, -32, 91]).buffer }],\\n`\n    var excludeCredentialsString = getIndexOne(text.match(/excludeCredentials\"{0,}:\\s{0,}\\[([^]+)\\s{0,}]/)).trim();\n    // e.g. `{ \\\"type\\\": \\\"public-key\\\", \\\"id\\\": new Int8Array([-18, 69, -99, 82, 38, -66]).buffer },\n    // { \\\"type\\\": \\\"public-key\\\", \\\"id\\\": new Int8Array([64, 17, -15, 56, -32, 91]).buffer }`\n    var excludeCredentials = parseCredentials(excludeCredentialsString);\n    // e.g. `challenge: new Int8Array([87, -95, 18, ... -3,  49, 12, 81]).buffer,`\n    var challengeArr = ensureArray(text.match(/challenge\"{0,}:\\s{0,}new\\s{0,}(Uint|Int)8Array\\(([^\\)]+)/));\n    // e.g. `[87, -95, 18, ... -3,  49, 12, 81]`\n    var challengeJSON = JSON.parse(challengeArr[2]);\n    // e.g. [87, -95, 18, ... -3,  49, 12, 81]\n    var challenge = new Int8Array(challengeJSON).buffer;\n    return __assign(__assign({ attestation: attestation, authenticatorSelection: __assign(__assign({ userVerification: userVerification }, (authenticatorAttachment && { authenticatorAttachment: authenticatorAttachment })), (requireResidentKey === 'true' && { requireResidentKey: !!requireResidentKey })), challenge: challenge }, (excludeCredentials.length && { excludeCredentials: excludeCredentials })), { pubKeyCredParams: pubKeyCredParams, rp: __assign({ name: rpName }, (rpId && { id: rpId })), timeout: timeout, user: {\n            displayName: userDisplayName,\n            id: txtEncoder.encode(userId),\n            name: userName,\n        } });\n}\nfunction parseWebAuthnAuthenticateText(text) {\n    var allowCredentials;\n    var allowCredentialsText;\n    if (text.includes('acceptableCredentials')) {\n        // e.g. `var acceptableCredentials = [\n        //  { \"type\": \"public-key\", \"id\": new Int8Array([1, 97, 2, 123, ... -17]).buffer }\n        // ];`\n        allowCredentialsText = getIndexOne(text.match(/acceptableCredentials\"*\\s*=\\s*\\[([^]+)\\s*]/)).trim();\n    }\n    else {\n        // e.g. `allowCredentials: [\n        // { \\\"type\\\": \\\"public-key\\\",\n        // \\\"id\\\": new Int8Array([-107, 93, 68, -67, ... -19, 7, 4]).buffer }\n        // ]`\n        allowCredentialsText = getIndexOne(text.match(/allowCredentials\"{0,}:\\s{0,}\\[([^]+)\\s{0,}]/)).trim();\n    }\n    // e.g. `\"userVerification\":\"preferred\"`\n    var userVerification = getIndexOne(text.match(/userVerification\"{0,}:\\s{0,}\"(\\w+)\"/));\n    if (allowCredentialsText) {\n        // Splitting objects in array in case the user has multiple keys\n        var allowCredentialArr = allowCredentialsText.split('},') || [allowCredentialsText];\n        // Iterating over array of substrings\n        allowCredentials = allowCredentialArr.map(function (str) {\n            // e.g. `{ \\\"type\\\": \\\"public-key\\\",\n            var type = getIndexOne(str.match(/type\"{0,}:\\s{0,}\"([\\w-]+)\"/));\n            // e.g. \\\"id\\\": new Int8Array([-107, 93, 68, -67, ... -19, 7, 4]).buffer\n            var idArr = ensureArray(str.match(/id\"{0,}:\\s{0,}new\\s{0,}(Uint|Int)8Array\\(([^\\)]+)/));\n            // e.g. `[-107, 93, 68, -67, ... -19, 7, 4]`\n            var idJSON = JSON.parse(idArr[2]);\n            // e.g. [-107, 93, 68, -67, ... -19, 7, 4]\n            var id = new Int8Array(idJSON).buffer;\n            return {\n                type: type,\n                id: id,\n            };\n        });\n    }\n    // e.g. `timeout: 60000`\n    var timeout = Number(getIndexOne(text.match(/timeout\"{0,}:\\s{0,}(\\d+)/)));\n    // e.g. `challenge: new Int8Array([87, -95, 18, ... -3,  49, 12, 81]).buffer,`\n    var challengeArr = ensureArray(text.match(/challenge\"{0,}:\\s{0,}new\\s{0,}(Uint|Int)8Array\\(([^\\)]+)/));\n    // e.g. `[87, -95, 18, ... -3,  49, 12, 81]`\n    var challengeJSON = JSON.parse(challengeArr[2]);\n    // e.g. [87, -95, 18, ... -3,  49, 12, 81]\n    var challenge = new Int8Array(challengeJSON).buffer;\n    // e.g. `rpId: \\\"example.com\\\"`\n    var rpId = getIndexOne(text.match(/rpId\"{0,}:\\s{0,}\\\\{0,}\"([^\"\\\\]*)/));\n    return __assign(__assign(__assign({ challenge: challenge, timeout: timeout }, (allowCredentials && { allowCredentials: allowCredentials })), (userVerification && { userVerification: userVerification })), (rpId && { rpId: rpId }));\n}\nexport { parseWebAuthnAuthenticateText, parseWebAuthnRegisterText };\n//# sourceMappingURL=script-parser.js.map","/*\n * @forgerock/javascript-sdk\n *\n * helpers.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { getEndpointPath, resolve, stringify } from '../util/url';\nexport function addAuthzInfoToHeaders(init, advices, tokens) {\n    var headers = new Headers(init.headers);\n    if (advices.AuthenticateToServiceConditionAdvice) {\n        headers.set('x-tree', advices.AuthenticateToServiceConditionAdvice[0]);\n    }\n    else if (advices.TransactionConditionAdvice) {\n        headers.set('x-txid', advices.TransactionConditionAdvice[0]);\n    }\n    if (tokens && tokens.idToken) {\n        headers.set('x-idtoken', tokens.idToken);\n    }\n    return headers;\n}\nexport function addAuthzInfoToURL(url, advices, tokens) {\n    var updatedURL = new URL(url);\n    // Only modify URL for Transactional Authorization\n    if (advices.TransactionConditionAdvice) {\n        var txId = advices.TransactionConditionAdvice[0];\n        // Add Txn ID to *original* request options as URL param\n        updatedURL.searchParams.append('_txid', txId);\n    }\n    // If tokens are used, send idToken (OIDC)\n    if (tokens && tokens.idToken) {\n        updatedURL.searchParams.append('_idtoken', tokens.idToken);\n    }\n    // FYI: in certain circumstances, the URL may be returned unchanged\n    return updatedURL.toString();\n}\nexport function buildAuthzOptions(authzObj, baseURL, timeout, realmPath, customPaths) {\n    var treeAuthAdvices = authzObj.advices && authzObj.advices.AuthenticateToServiceConditionAdvice;\n    var txnAuthAdvices = authzObj.advices && authzObj.advices.TransactionConditionAdvice;\n    var attributeValue = '';\n    var attributeName = '';\n    if (treeAuthAdvices) {\n        attributeValue = treeAuthAdvices.reduce(function (prev, curr) {\n            var prevWithSpace = prev ? \" \".concat(prev) : prev;\n            prev = \"\".concat(curr).concat(prevWithSpace);\n            return prev;\n        }, '');\n        attributeName = 'AuthenticateToServiceConditionAdvice';\n    }\n    else if (txnAuthAdvices) {\n        attributeValue = txnAuthAdvices.reduce(function (prev, curr) {\n            var prevWithSpace = prev ? \" \".concat(prev) : prev;\n            prev = \"\".concat(curr).concat(prevWithSpace);\n            return prev;\n        }, '');\n        attributeName = 'TransactionConditionAdvice';\n    }\n    var openTags = \"<Advices><AttributeValuePair>\";\n    var nameTag = \"<Attribute name=\\\"\".concat(attributeName, \"\\\"/>\");\n    var valueTag = \"<Value>\".concat(attributeValue, \"</Value>\");\n    var endTags = \"</AttributeValuePair></Advices>\";\n    var fullXML = \"\".concat(openTags).concat(nameTag).concat(valueTag).concat(endTags);\n    var path = getEndpointPath('authenticate', realmPath, customPaths);\n    var queryParams = {\n        authIndexType: 'composite_advice',\n        authIndexValue: fullXML,\n    };\n    var options = {\n        init: {\n            method: 'POST',\n            credentials: 'include',\n            headers: new Headers({\n                'Accept-API-Version': 'resource=2.0, protocol=1.0',\n            }),\n        },\n        timeout: timeout,\n        url: resolve(baseURL, \"\".concat(path, \"?\").concat(stringify(queryParams))),\n    };\n    return options;\n}\nexport function examineForIGAuthz(res) {\n    var type = res.headers.get('Content-Type') || '';\n    return type.includes('html') && res.url.includes('composite_advice');\n}\nexport function examineForRESTAuthz(res) {\n    return __awaiter(this, void 0, void 0, function () {\n        var clone, json;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    clone = res.clone();\n                    return [4 /*yield*/, clone.json()];\n                case 1:\n                    json = _a.sent();\n                    return [2 /*return*/, !!json.advices];\n            }\n        });\n    });\n}\nfunction getXMLValueFromURL(urlString) {\n    var url = new URL(urlString);\n    var value = url.searchParams.get('authIndexValue') || '';\n    var parser = new DOMParser();\n    var decodedValue = decodeURIComponent(value);\n    var doc = parser.parseFromString(decodedValue, 'application/xml');\n    var el = doc.querySelector('Value');\n    return el ? el.innerHTML : '';\n}\nexport function hasAuthzAdvice(json) {\n    if (json.advices && json.advices.AuthenticateToServiceConditionAdvice) {\n        return (Array.isArray(json.advices.AuthenticateToServiceConditionAdvice) &&\n            json.advices.AuthenticateToServiceConditionAdvice.length > 0);\n    }\n    else if (json.advices && json.advices.TransactionConditionAdvice) {\n        return (Array.isArray(json.advices.TransactionConditionAdvice) &&\n            json.advices.TransactionConditionAdvice.length > 0);\n    }\n    else {\n        return false;\n    }\n}\nexport function isAuthzStep(res) {\n    return __awaiter(this, void 0, void 0, function () {\n        var clone, json;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    clone = res.clone();\n                    return [4 /*yield*/, clone.json()];\n                case 1:\n                    json = _a.sent();\n                    return [2 /*return*/, !!json.callbacks];\n            }\n        });\n    });\n}\nexport function newTokenRequired(res, requiresNewToken) {\n    if (typeof requiresNewToken === 'function') {\n        return requiresNewToken(res);\n    }\n    return res.status === 401;\n}\nexport function normalizeIGJSON(res) {\n    var advices = {};\n    if (res.url.includes('AuthenticateToServiceConditionAdvice')) {\n        advices.AuthenticateToServiceConditionAdvice = [getXMLValueFromURL(res.url)];\n    }\n    else {\n        advices.TransactionConditionAdvice = [getXMLValueFromURL(res.url)];\n    }\n    return {\n        resource: '',\n        actions: {},\n        attributes: {},\n        advices: advices,\n        ttl: 0,\n    };\n}\nexport function normalizeRESTJSON(res) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, res.json()];\n                case 1: return [2 /*return*/, _a.sent()];\n            }\n        });\n    });\n}\n//# sourceMappingURL=helpers.js.map","/*\n * @forgerock/javascript-sdk\n *\n * index.ts\n *\n * Copyright (c) 2020 ForgeRock. All rights reserved.\n * This software may be modified and distributed under the terms\n * of the MIT license. See the LICENSE file for details.\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport Config from '../config';\nimport { ActionTypes } from '../config/enums';\nimport Dispatcher from '../event';\nimport FRAuth from '../fr-auth';\nimport { StepType } from '../fr-auth/enums';\nimport FRStep from '../fr-auth/fr-step';\nimport TokenManager from '../token-manager';\nimport TokenStorage from '../token-storage';\nimport { withTimeout } from '../util/timeout';\nimport { addAuthzInfoToHeaders, addAuthzInfoToURL, buildAuthzOptions, examineForIGAuthz, examineForRESTAuthz, hasAuthzAdvice, isAuthzStep, newTokenRequired, normalizeIGJSON, normalizeRESTJSON, } from './helpers';\nimport middlewareWrapper from '../util/middleware';\n/**\n * HTTP client that includes bearer token injection and refresh.\n * This module also supports authorization for policy protected endpoints.\n *\n * Example:\n *\n * ```js\n * return forgerock.HttpClient.request({\n *   url: `https://example.com/protected/resource`,\n *   init: {\n *     method: 'GET',\n *     credentials: 'include',\n *   },\n *   authorization: {\n *     handleStep: async (step) => {\n *       step.getCallbackOfType('PasswordCallback').setPassword(pw);\n *       return Promise.resolve(step);\n *     },\n *   },\n * });\n * ```\n */\nvar HttpClient = /** @class */ (function (_super) {\n    __extends(HttpClient, _super);\n    function HttpClient() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Makes a request using the specified options.\n     *\n     * @param options The options to use when making the request\n     */\n    HttpClient.request = function (options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var res, authorizationJSON, hasIG, _a, middleware, realmPath, serverConfig, authzOptions, url, type, tree, runMiddleware, _b, authUrl, authInit, initialStep, tokens, err_1;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0: return [4 /*yield*/, this._request(options, false)];\n                    case 1:\n                        res = _c.sent();\n                        hasIG = false;\n                        if (!newTokenRequired(res, options.requiresNewToken)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this._request(options, true)];\n                    case 2:\n                        res = _c.sent();\n                        _c.label = 3;\n                    case 3:\n                        if (!(options.authorization && options.authorization.handleStep)) return [3 /*break*/, 16];\n                        if (!(res.redirected && examineForIGAuthz(res))) return [3 /*break*/, 4];\n                        hasIG = true;\n                        authorizationJSON = normalizeIGJSON(res);\n                        return [3 /*break*/, 7];\n                    case 4: return [4 /*yield*/, examineForRESTAuthz(res)];\n                    case 5:\n                        if (!_c.sent()) return [3 /*break*/, 7];\n                        return [4 /*yield*/, normalizeRESTJSON(res)];\n                    case 6:\n                        authorizationJSON = _c.sent();\n                        _c.label = 7;\n                    case 7:\n                        if (!(authorizationJSON && authorizationJSON.advices)) return [3 /*break*/, 16];\n                        _a = Config.get(options.authorization.config), middleware = _a.middleware, realmPath = _a.realmPath, serverConfig = _a.serverConfig;\n                        authzOptions = buildAuthzOptions(authorizationJSON, serverConfig.baseUrl, options.timeout, realmPath, serverConfig.paths);\n                        url = new URL(authzOptions.url);\n                        type = url.searchParams.get('authIndexType');\n                        tree = url.searchParams.get('authIndexValue');\n                        runMiddleware = middlewareWrapper({\n                            url: new URL(authzOptions.url),\n                            init: authzOptions.init,\n                        }, {\n                            type: ActionTypes.StartAuthenticate,\n                            payload: { type: type, tree: tree },\n                        });\n                        _b = runMiddleware(middleware), authUrl = _b.url, authInit = _b.init;\n                        authzOptions.url = authUrl.toString();\n                        authzOptions.init = authInit;\n                        return [4 /*yield*/, this._request(authzOptions, false)];\n                    case 8:\n                        initialStep = _c.sent();\n                        return [4 /*yield*/, isAuthzStep(initialStep)];\n                    case 9:\n                        if (!(_c.sent())) {\n                            throw new Error('Error: Initial response from auth server not a \"step\".');\n                        }\n                        if (!hasAuthzAdvice(authorizationJSON)) {\n                            throw new Error(\"Error: Transactional or Service Advice is empty.\");\n                        }\n                        // Walk through auth tree\n                        return [4 /*yield*/, this.stepIterator(initialStep, options.authorization.handleStep, type, tree)];\n                    case 10:\n                        // Walk through auth tree\n                        _c.sent();\n                        tokens = void 0;\n                        _c.label = 11;\n                    case 11:\n                        _c.trys.push([11, 13, , 14]);\n                        return [4 /*yield*/, TokenStorage.get()];\n                    case 12:\n                        tokens = _c.sent();\n                        return [3 /*break*/, 14];\n                    case 13:\n                        err_1 = _c.sent();\n                        return [3 /*break*/, 14];\n                    case 14:\n                        if (hasIG) {\n                            // Update URL with IDs and tokens for IG\n                            options.url = addAuthzInfoToURL(options.url, authorizationJSON.advices, tokens);\n                        }\n                        else {\n                            // Update headers with IDs and tokens for REST API\n                            options.init.headers = addAuthzInfoToHeaders(options.init, authorizationJSON.advices, tokens);\n                        }\n                        return [4 /*yield*/, this._request(options, false)];\n                    case 15:\n                        // Retry original resource request\n                        res = _c.sent();\n                        _c.label = 16;\n                    case 16: return [2 /*return*/, res];\n                }\n            });\n        });\n    };\n    HttpClient.setAuthHeaders = function (headers, forceRenew) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokens, err_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, TokenStorage.get()];\n                    case 1:\n                        tokens = _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        err_2 = _a.sent();\n                        return [3 /*break*/, 3];\n                    case 3:\n                        if (!(tokens && tokens.accessToken)) return [3 /*break*/, 5];\n                        return [4 /*yield*/, TokenManager.getTokens({ forceRenew: forceRenew })];\n                    case 4:\n                        // Access tokens are an OAuth artifact\n                        tokens = _a.sent();\n                        // TODO: Temp fix; refactor this in next txn auth story\n                        if (tokens && tokens.accessToken) {\n                            headers.set('Authorization', \"Bearer \".concat(tokens.accessToken));\n                        }\n                        _a.label = 5;\n                    case 5: return [2 /*return*/, headers];\n                }\n            });\n        });\n    };\n    HttpClient.stepIterator = function (res, handleStep, type, tree) {\n        return __awaiter(this, void 0, void 0, function () {\n            var jsonRes, initialStep;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, res.json()];\n                    case 1:\n                        jsonRes = _a.sent();\n                        initialStep = new FRStep(jsonRes);\n                        // eslint-disable-next-line no-async-promise-executor\n                        return [2 /*return*/, new Promise(function (resolve, reject) { return __awaiter(_this, void 0, void 0, function () {\n                                function handleNext(step) {\n                                    return __awaiter(this, void 0, void 0, function () {\n                                        var input, output;\n                                        return __generator(this, function (_a) {\n                                            switch (_a.label) {\n                                                case 0: return [4 /*yield*/, handleStep(step)];\n                                                case 1:\n                                                    input = _a.sent();\n                                                    return [4 /*yield*/, FRAuth.next(input, { type: type, tree: tree })];\n                                                case 2:\n                                                    output = _a.sent();\n                                                    if (output.type === StepType.LoginSuccess) {\n                                                        resolve();\n                                                    }\n                                                    else if (output.type === StepType.LoginFailure) {\n                                                        reject('Authentication tree failure.');\n                                                    }\n                                                    else {\n                                                        handleNext(output);\n                                                    }\n                                                    return [2 /*return*/];\n                                            }\n                                        });\n                                    });\n                                }\n                                return __generator(this, function (_a) {\n                                    handleNext(initialStep);\n                                    return [2 /*return*/];\n                                });\n                            }); })];\n                }\n            });\n        });\n    };\n    HttpClient._request = function (options, forceRenew) {\n        return __awaiter(this, void 0, void 0, function () {\n            var url, init, timeout, headers;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        url = options.url, init = options.init, timeout = options.timeout;\n                        headers = new Headers(init.headers || {});\n                        if (!!options.bypassAuthentication) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.setAuthHeaders(headers, forceRenew)];\n                    case 1:\n                        headers = _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        init.headers = headers;\n                        return [2 /*return*/, withTimeout(fetch(url, init), timeout)];\n                }\n            });\n        });\n    };\n    return HttpClient;\n}(Dispatcher));\nexport default HttpClient;\n//# sourceMappingURL=index.js.map","function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root && root.host) {\n        return root;\n    }\n    return node.ownerDocument;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element.sheet;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element_base(nodes, name, attributes, create_element) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => create_element(name));\n}\nfunction claim_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, element);\n}\nfunction claim_svg_element(nodes, name, attributes) {\n    return claim_element_base(nodes, name, attributes, svg_element);\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index - start_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    if (value === null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n    select.selectedIndex = -1; // no option should be selected\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\n// we need to store the information for multiple documents because a Svelte application could also contain iframes\n// https://github.com/sveltejs/svelte/issues/3624\nconst managed_styles = new Map();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_style_information(doc, node) {\n    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };\n    managed_styles.set(doc, info);\n    return info;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);\n    if (!rules[name]) {\n        rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        managed_styles.forEach(info => {\n            const { stylesheet } = info;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            info.rules = {};\n        });\n        managed_styles.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (flushidx < dirty_components.length) {\n            const component = dirty_components[flushidx];\n            flushidx++;\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro  we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro  needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, attrs_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (attrs_to_add) {\n        const classes_to_add = attrs_to_add.classes;\n        const styles_to_add = attrs_to_add.styles;\n        if (classes_to_add) {\n            if (attributes.class == null) {\n                attributes.class = classes_to_add;\n            }\n            else {\n                attributes.class += ' ' + classes_to_add;\n            }\n        }\n        if (styles_to_add) {\n            if (attributes.style == null) {\n                attributes.style = style_object_to_string(styles_to_add);\n            }\n            else {\n                attributes.style = style_object_to_string(merge_ssr_styles(attributes.style, styles_to_add));\n            }\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nfunction merge_ssr_styles(style_attribute, style_directive) {\n    const style_object = {};\n    for (const individual_style of style_attribute.split(';')) {\n        const colon_index = individual_style.indexOf(':');\n        const name = individual_style.slice(0, colon_index).trim();\n        const value = individual_style.slice(colon_index + 1).trim();\n        if (!name)\n            continue;\n        style_object[name] = value;\n    }\n    for (const name in style_directive) {\n        const value = style_directive[name];\n        if (value) {\n            style_object[name] = value;\n        }\n        else {\n            delete style_object[name];\n        }\n    }\n    return style_object;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(context || (parent_component ? parent_component.$$.context : [])),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    const assignment = (boolean && value === true) ? '' : `=\"${escape_attribute_value(value.toString())}\"`;\n    return ` ${name}${assignment}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\nfunction style_object_to_string(style_object) {\n    return Object.keys(style_object)\n        .filter(key => style_object[key])\n        .map(key => `${key}: ${style_object[key]};`)\n        .join(' ');\n}\nfunction add_styles(style_object) {\n    const styles = style_object_to_string(style_object);\n    return styles ? ` style=\"${styles}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.46.6' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_styles, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_svg_element, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, merge_ssr_styles, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","<script>\n  export let callback;\n  export let inputName;\n\n  const existingValue = callback?.getInputValue();\n  const textInputLabel = callback.getPrompt();\n  const stringAttributeName = callback.getName && callback.getName();\n\n  function setValue(event) {\n    console.log(event.target.value);\n    callback.setInputValue(event.target.value);\n  }\n</script>\n\n<div>\n  <label\n    class=\"flex pt-4 w-full\"\n    for={inputName}>\n      {textInputLabel}\n  </label>\n  <input\n    class=\"rounded w-full\"\n    id={inputName}\n    on:change={setValue}\n    type=\"password\"\n    value={existingValue}\n    />\n</div>\n","<script>\n  export let callback;\n  export let inputName;\n\n  const existingValue = callback?.getInputValue();\n  const textInputLabel = callback.getPrompt();\n  const stringAttributeName = callback.getName && callback.getName();\n\n  function setValue(event) {\n    console.log(event.target.value);\n    callback.setInputValue(event.target.value);\n  }\n</script>\n\n<div>\n  <label\n    class=\"flex pt-4 w-full\"\n    for={inputName}>\n      {textInputLabel}\n  </label>\n  <input\n    class=\"rounded w-full\"\n    id={inputName}\n    on:change={setValue}\n    type={stringAttributeName == 'mail' ? 'email' : 'text'}\n    value={existingValue}\n    />\n</div>\n","<script>\n  import { FRAuth, TokenManager, UserManager } from '@forgerock/javascript-sdk';\n  import Password from './password.svelte';\n  import Text from './text.svelte';\n\n  export let closeModal;\n  export let authCallback;\n  let step;\n  let submitForm = () => {};\n\n  if (typeof window === 'object') {\n    (async () => {\n      step = await FRAuth.next();\n      console.log(step);\n\n      if (step.type === 'LoginSuccess') {\n        const tokens = await TokenManager.getTokens();\n        const user = await UserManager.getCurrentUser();\n        console.log(tokens);\n        closeModal && closeModal();\n        authCallback && authCallback(user);\n      }\n    })();\n\n    submitForm = async (event) => {\n      step = await FRAuth.next(step);\n      console.log(step);\n\n      if (step.type === 'LoginSuccess') {\n        const tokens = await TokenManager.getTokens();\n        const user = await UserManager.getCurrentUser();\n        console.log(tokens);\n        closeModal && closeModal();\n        authCallback && authCallback(user);\n      }\n    };\n  }\n</script>\n\n{#if !step}\n  <p>Loading ...</p>\n{:else if step.type === 'Step'}\n  <form on:submit|preventDefault={submitForm}>\n    {#each step?.callbacks as callback}\n      {#if callback.getType() === 'NameCallback'}\n        <Text {callback} inputName={callback?.payload?.input?.[0].name} />\n      {/if}\n      {#if callback.getType() === 'PasswordCallback'}\n        <Password {callback} inputName={callback?.payload?.input?.[0].name} />\n      {/if}\n    {/each}\n    <button\n      class=\"flex bg-blue-600 justify-center my-5 p-2 rounded text-white w-full\"\n      type=\"submit\">\n        Submit\n    </button>\n  </form>\n{:else if step.type === 'LoginSuccess'}\n  <p>Login Success!</p>\n{/if}\n","<script>\n  export let classes = '';\n  export let size = '24px';\n</script>\n\n<svg\n  class={classes}\n  height={size}\n  width={size}\n  viewBox=\"0 0 24 24\"\n  xmlns=\"http://www.w3.org/2000/svg\"\n>\n  <path d=\"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z\" />\n</svg>\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import { writable } from 'svelte/store';\n\nexport const isModalOpen = writable(false);\n\nexport const openModal = () => {\n  isModalOpen.set(true);\n};\n\nexport const closeModal = () => {\n  isModalOpen.set(false);\n};\n","<script>\n  import { Config } from '@forgerock/javascript-sdk';\n\n  import Form from './components/journey/form.svelte';\n  import KeyIcon from './components/icons/key-icon.svelte';\n  import { isModalOpen, closeModal } from './widget.store';\n\n  export let config;\n  export let authCallback;\n\n  Config.set(config);\n</script>\n\n<div\n  class={$isModalOpen ?\n    'absolute top-2 left-2/4 w-[500px] -translate-x-2/4 my-5 min-h-full' :\n    'hidden'}>\n  <div class=\"max-w-lg w-full bg-white p-10 rounded shadow-md\">\n    <div class=\"flex w-full justify-center\">\n      <KeyIcon classes=\"text-gray-400 fill-current\" size=\"72px\" />\n    </div>\n    <h1 class=\"flex justify-center text-4xl text-gray-600 font-family-\">Sign In</h1>\n    <Form {closeModal} {authCallback} />\n  </div>\n</div>","import { FRUser } from '@forgerock/javascript-sdk';\nimport LoginWidget from './widget.svelte';\nimport { openModal } from './widget.store';\n\nexport default LoginWidget;\n\nexport const open = openModal;\nexport const User = FRUser;\n"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","ActionTypes","Config","set","options","isValid","Error","serverConfig","validateServerConfig","oauthThreshold","setDefaults","get","merged","baseUrl","timeout","url","charAt","withTimeout","promise","effectiveTimeout","timeoutP","Promise","_","reject","window","setTimeout","race","__spreadArray","to","from","pack","ar","l","Array","slice","concat","getBaseUrl","port","protocol","indexOf","hostname","getEndpointPath","endpoint","realmPath","customPaths","realmUrlPath","names","split","map","x","trim","filter","unshift","join","getRealmUrlPath","defaultPaths","authenticate","authorize","accessToken","endSession","userInfo","revoke","sessions","resolve","path","URL","startsWith","basePath","pathname","destPath","newPath","stringify","data","pairs","k","push","encodeURIComponent","middlewareWrapper","request","_a","type","payload","actionCopy","freeze","middleware","isArray","mwareCopy","fn","iterator","nextMiddlewareToBeCalled","shift","ErrorCode","CallbackType","__awaiter","thisArg","_arguments","P","generator","fulfilled","value","step","next","e","rejected","result","done","then","__generator","body","f","y","g","label","sent","trys","ops","verb","throw","return","Symbol","v","op","TypeError","pop","Auth","previousStep","tree","query","runMiddleware","req","res","_b","constructUrl","init","configureRequest","Authenticate","StartAuthenticate","fetch","toString","getResponseJson","treeParams","authIndexType","authIndexValue","undefined","params","queryString","keys","paths","JSON","credentials","headers","Headers","accept","method","contentType","json","status","ok","PolicyKey","Dispatcher","callbacks","addEventListener","listener","container","add","removeEventListener","index","splice","remove","clearEventListeners","forEach","clear","dispatchEvent","event","_i","plural","singularText","pluralText","getProp","obj","prop","defaultValue","StepType","defaultMessageCreator","CannotContainCharacters","property","forbiddenChars","CannotContainDuplicates","duplicateValue","CannotContainOthers","disallowedFields","LeastCapitalLetters","numCaps","LeastNumbers","numNums","MatchRegexp","MaximumLength","maxLength","MaximumNumber","MinimumLength","minLength","MinimumNumber","Required","Unique","UnknownPolicy","policyRequirement","ValidArrayItems","ValidDate","ValidEmailAddress","ValidNameFormat","ValidNumber","ValidPhoneFormat","ValidQueryFilter","ValidType","FRPolicy","parseErrors","err","messageCreator","_this","errors","detail","failedPolicyRequirements","messages","parseFailedPolicyRequirement","failedPolicy","policyRequirements","parsePolicyRequirement","policy","policyObject","parse","extendStatics","FRLoginFailure","LoginFailure","getCode","Number","code","getDetail","getMessage","message","getProcessedMessage","getReason","reason","FRLoginSuccess","LoginSuccess","getRealm","realm","getSessionToken","tokenId","getSuccessUrl","successUrl","FRCallback","getType","getInputValue","selector","getArrayElement","input","setInputValue","getOutputValue","output","getOutputByName","name","find","array","test","exec","__extends","d","b","setPrototypeOf","__proto__","String","__","constructor","create","AttributeInputCallback","_super","getName","getPrompt","isRequired","getFailedPolicies","getPolicies","setValidateOnly","setValue","ChoiceCallback","getDefaultChoice","getChoices","setChoiceIndex","setChoiceValue","ConfirmationCallback","getDefaultOption","getMessageType","getOptions","getOptionType","setOptionIndex","setOptionValue","DeviceProfileCallback","isMetadataRequired","isLocationRequired","setProfile","profile","HiddenValueCallback","KbaCreateCallback","getPredefinedQuestions","setQuestion","question","setAnswer","answer","endsWith","MetadataCallback","getData","NameCallback","setName","PasswordCallback","setPassword","password","PollingWaitCallback","getWaitTime","ReCaptchaCallback","getSiteKey","setResult","RedirectCallback","getRedirectUrl","SelectIdPCallback","getProviders","setProvider","item","provider","TextOutputCallback","SuspendedTextOutputCallback","TermsAndConditionsCallback","getTerms","getVersion","getCreateDate","date","Date","setAccepted","accepted","ValidatedCreatePasswordCallback","ValidatedCreateUsernameCallback","createCallback","callback","BooleanAttributeInputCallback","NumberAttributeInputCallback","StringAttributeInputCallback","FRStep","callbackFactory","Step","convertCallbacks","getCallbackOfType","getCallbacksOfType","setCallbackValue","getDescription","description","getHeader","header","getStage","stage","FRAuth","nextPayload","authId","redirect","redirectUrl","localStorage","setItem","previousStepKey","location","resume","parsedUrl","form_post_entry","nonce","scope","state","suspendedId","redirectStepString","nextOptions","searchParams","getItem","removeItem","start","browserProps","configurableCategories","devicePlatforms","mac","windows","ios","displayProps","fontNames","hardwareProps","platformProps","Collector","reduceToObject","props","src","reduce","prev","curr","includes","propArr","prop1","prop2","reduceToString","filename","FRDevice","config","key","getBrowserMeta","navigator","console","warn","getBrowserPluginsNames","plugins","getDeviceName","userAgent","platform","getDisplayMeta","screen","getHardwareMeta","getIdentifier","crypto","getRandomValues","id","Uint32Array","getInstalledFonts","canvas","document","createElement","context","getContext","text","font","baseWidth","measureText","width","getLocationCoordinates","geolocation","getCurrentPosition","position","latitude","coords","longitude","error","enableHighAccuracy","maximumAge","getOSMeta","getProfile","metadata","_c","identifier","hardware","display","browser","deviceName","fonts","timezone","getTimezoneOffset","DB_NAME","IndexedDBWrapper","clientId","onError","openReq","indexedDB","open","onsuccess","objectStoreNames","contains","close","getReq","transaction","objectStore","target","onerror","onupgradeneeded","tokens","onSetSuccess","onUpgradeNeeded","createObjectStore","onOpenSuccess","version","txnReq","putReq","put","removeReq","delete","LocalStorageWrapper","tokenString","SessionStorageWrapper","sessionStorage","TokenStorage","tokenStore","getClientConfig","isOkOr4xx","response","Math","floor","ResponseType","PKCE","createState","createRandomString","createVerifier","createChallenge","verifier","sha256","base64UrlEncode","numbers","btoa","fromCharCode","replace","uint8Array","hashBuffer","TextEncoder","encode","subtle","digest","Uint8Array","num","random","allowedErrors","OAuth2Client","createAuthorizeUrl","redirectUri","requestParams","challenge","client_id","redirect_uri","response_type","responseType","code_challenge","code_challenge_method","getUrl","Authorize","getAuthCodeByIframe","cleanUp","iframe","noop","onLoad","clearTimeout","contentWindow","newHref","href","containsAuthCode","containsAuthError","style","appendChild","getOAuth2Tokens","responseBody","responseObject","tokenExpiry","authorizationCode","grant_type","code_verifier","getBody","parseError","access_token","expires_in","now","idToken","id_token","refreshToken","refresh_token","getUserInfo","id_token_hint","revokeToken","token","includeToken","getActionType","ExchangeToken","EndSession","RevokeToken","UserInfo","error_description","SessionManager","logout","Logout","WebAuthnOutcome","WebAuthnOutcomeType","WebAuthnStepType","TokenManager","getTokens","_d","support","error_1","error_2","storedString","storedValues","authorizeUrlOptions","authorizeUrl","_e","parsedQuery","err_1","_f","info","forceRenew","tokensWillExpireWithinThreshold","deleteTokens","tokenExchange","Code","bind","mode","fullUrl","login","stored","getTokensOptions","error_3","UserManager","getCurrentUser","FRUser","handler","loginWithUI","ui","getSession","examineForRESTAuthz","clone","advices","getXMLValueFromURL","urlString","parser","DOMParser","decodedValue","decodeURIComponent","el","parseFromString","querySelector","innerHTML","isAuthzStep","normalizeRESTJSON","run","blank_object","run_all","fns","is_function","thing","safe_not_equal","a","component_subscribe","component","store","$$","on_destroy","unsub","subscribe","unsubscribe","append","node","insert","anchor","insertBefore","detach","parentNode","removeChild","element","svg_element","createElementNS","createTextNode","space","empty","listen","attr","attribute","removeAttribute","getAttribute","setAttribute","current_component","set_current_component","HttpClient","authorizationJSON","hasIG","authzOptions","authUrl","authInit","initialStep","_request","requiresNewToken","newTokenRequired","authorization","handleStep","redirected","examineForIGAuthz","AuthenticateToServiceConditionAdvice","TransactionConditionAdvice","resource","actions","attributes","ttl","normalizeIGJSON","authzObj","baseURL","treeAuthAdvices","txnAuthAdvices","attributeValue","attributeName","prevWithSpace","nameTag","valueTag","fullXML","queryParams","buildAuthzOptions","stepIterator","updatedURL","txId","addAuthzInfoToURL","addAuthzInfoToHeaders","setAuthHeaders","jsonRes","handleNext","bypassAuthentication","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","add_render_callback","seen_callbacks","Set","flushidx","flush","saved_component","update","has","fragment","before_update","dirty","ctx","after_update","outroing","outros","group_outros","r","c","check_outros","transition_in","block","local","transition_out","o","create_component","mount_component","customElement","on_mount","m","new_on_destroy","destroy_component","detaching","make_dirty","fill","instance","create_fragment","not_equal","append_styles","parent_component","bound","on_disconnect","Map","skip_bound","root","ready","ret","rest","hydrate","nodes","childNodes","children","intro","SvelteComponent","$destroy","$on","$set","$$props","$$set","div","inputName","existingValue","textInputLabel","log","stringAttributeName","each_value","form","button","preventDefault","each_blocks","iterations","text_1_changes","password_changes","closeModal","authCallback","submitForm","user","$$invalidate","svg","classes","size","subscriber_queue","isModalOpen","stop","subscribers","new_value","run_queue","subscriber","invalidate","writable","div2","div1","div0","h1","User"],"mappings":"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"}